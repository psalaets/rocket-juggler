!function e(t,n,o){function i(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return i(n?n:e)},c,c.exports,e,t,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({"./app/index.js":[function(e){(function(t){var n=("undefined"!=typeof window?window.window:"undefined"!=typeof t?t.window:null).document,o=e("./lib/config/persistence"),i=e("./lib/config/game-config");i.apply(o.load());var r=e("./lib/config/config-panel");r.updateViewModel(i.values());var s=e("knockout");s.applyBindings(r.viewModel);var a=e("./lib/game"),l=n.getElementById("stage"),u=new a(l);u.defineState("title",e("./lib/state/title")),u.defineState("help",e("./lib/state/help")),u.defineState("gameplay",e("./lib/state/gameplay")),u.changeState("title"),u.start()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/config/config-panel":"/Users/paul/dev/projects/rocket-juggler/app/lib/config/config-panel.js","./lib/config/game-config":"/Users/paul/dev/projects/rocket-juggler/app/lib/config/game-config.js","./lib/config/persistence":"/Users/paul/dev/projects/rocket-juggler/app/lib/config/persistence.js","./lib/game":"/Users/paul/dev/projects/rocket-juggler/app/lib/game.js","./lib/state/gameplay":"/Users/paul/dev/projects/rocket-juggler/app/lib/state/gameplay.js","./lib/state/help":"/Users/paul/dev/projects/rocket-juggler/app/lib/state/help.js","./lib/state/title":"/Users/paul/dev/projects/rocket-juggler/app/lib/state/title.js",knockout:"/Users/paul/dev/projects/rocket-juggler/node_modules/knockout/build/output/knockout-latest.debug.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/collision-handler.js":[function(e,t){function n(e){return function(t,n){return e.call(null,n,t)}}function o(){var e=Object.create(i);return e.initialize(),e}t.exports=o;var i={initialize:function(){this.handlerTuples=[]},addHandler:function(e,t,o){return this.handlerTuples.push({entityATest:e,entityBTest:t,handler:o},{entityATest:t,entityBTest:e,handler:n(o)}),this},handleCollision:function(e,t){var n=this.handlerTuples.filter(function(n){return n.entityATest(e)&&n.entityBTest(t)});n.length&&n[0].handler(e,t)}}},{}],"/Users/paul/dev/projects/rocket-juggler/app/lib/config/config-panel.js":[function(e,t){function n(e){return parseInt(e,10)}var o=e("knockout"),i=e("./game-config"),r=e("./persistence"),s=i.keys(),a={saveGameConfig:function(){s.forEach(function(e){var t=this[e]();i.set(e,n(t))},this),r.save(i.values())},restoreDefaults:function(){this.apply(i.defaultValues()),this.saveGameConfig()},apply:function(e){s.forEach(function(t){this[t](e[t])},this)}};s.forEach(function(e){a[e]=o.observable()}),t.exports={updateViewModel:function(e){this.viewModel.apply(e)},viewModel:a}},{"./game-config":"/Users/paul/dev/projects/rocket-juggler/app/lib/config/game-config.js","./persistence":"/Users/paul/dev/projects/rocket-juggler/app/lib/config/persistence.js",knockout:"/Users/paul/dev/projects/rocket-juggler/node_modules/knockout/build/output/knockout-latest.debug.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/config/game-config.js":[function(e,t){function n(e){return e in i}function o(e,t){for(var n in e)t[n]=e[n];return t}var i={ballRadius:50,ballMass:1,ballSpawnDelay:1e4,rocketSpeed:800,rocketRadius:10,explosionBallPush:800,explosionRadius:70,explosionDuration:100,playerSpeed:400},r=o(i,{});t.exports={get:function(e){return r[e]},set:function(e,t){n(e)&&(r[e]=t)},keys:function(){return Object.keys(i)},apply:function(e){for(var t in e)this.set(t,e[t])},values:function(){return o(r,{})},defaultValues:function(){return o(i,{})}}},{}],"/Users/paul/dev/projects/rocket-juggler/app/lib/config/persistence.js":[function(e,t){(function(n){function o(e){for(var t in r)t in e||(e[t]=r[t])}var i="undefined"!=typeof window?window.localStorage:"undefined"!=typeof n?n.localStorage:null,r=e("./game-config").defaultValues();t.exports={load:function(){var e=i.getItem("config");return e?o(JSON.parse(e)):(this.save(r),r)},save:function(e){i.setItem("config",JSON.stringify(e))}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./game-config":"/Users/paul/dev/projects/rocket-juggler/app/lib/config/game-config.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/ball.js":[function(e,t){(function(n){function o(e,t,n){this.view=i(n),this.view.x=e,this.view.y=t,this.body=r(e,t,n)}function i(e){var t=new s.Graphics;return t.setStrokeStyle(1),t.beginStroke("#000000"),t.beginFill("#ff0000"),t.drawCircle(0,0,e),new s.Shape(t)}function r(e,t,n){var o=new a.Body({mass:1,fixedRotation:!0,position:[e,t]});return o.addShape(new a.Circle(n)),o}var s="undefined"!=typeof window?window.createjs:"undefined"!=typeof n?n.createjs:null,a=e("p2");t.exports=o;var l=o.prototype;l.update=function(){this.view.x=this.body.position[0],this.view.y=this.body.position[1]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{p2:"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/p2.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/explosion.js":[function(e,t){(function(n){function o(e,t,n){this.view=i(n),this.view.x=e,this.view.y=t,this.body=r(e,t,n),this.timeLeft=100,this.ballPush=800,this.alreadyHit=[]}function i(e){var t=new s.Graphics;return t.beginStroke("#00ff00"),t.drawCircle(0,0,e),new s.Shape(t)}function r(e,t,n){var o=new a.Body({mass:1,position:[e,t]});return o.gravityScale=0,o.fixedRotation=!0,l.ghostify(o),o.addShape(new a.Circle(n)),o}var s="undefined"!=typeof window?window.createjs:"undefined"!=typeof n?n.createjs:null,a=e("p2"),l=e("ghost-body"),u=e("vec2");t.exports=o;var c=o.prototype;c.update=function(e){this.view.x=this.body.position[0],this.view.y=this.body.position[1],this.timeLeft<=0&&(this.inactive=!0),this.timeLeft-=e.delta},c.pushBall=function(e){if(-1==this.alreadyHit.indexOf(e)){this.alreadyHit.push(e);var t=new u(e.body.position[0],e.body.position[1]);t.subtract(this.body.position[0],this.body.position[1]),t.normalize(),t.multiply(this.ballPush);var n=e.body.velocity;n[0]+=t.x,n[1]+=t.y}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"ghost-body":"/Users/paul/dev/projects/rocket-juggler/node_modules/ghost-body/index.js",p2:"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/p2.js",vec2:"/Users/paul/dev/projects/rocket-juggler/node_modules/vec2/vec2.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/index.js":[function(e,t){var n=e("../config/game-config"),o=e("./ball"),i=e("./wall"),r=e("./explosion"),s=e("./rocket"),a=e("./text"),l=e("./player");t.exports={rocket:function(e,t){var o=new s(e,t,n.get("rocketRadius"));return o.speed=n.get("rocketSpeed"),o},ball:function(e,t){var i=new o(e,t,n.get("ballRadius"));return i.body.mass=n.get("ballMass"),i},wall:function(e,t,n,o){return new i(e,t,n,o)},explosion:function(e,t){var o=new r(e,t,n.get("explosionRadius"));return o.ballPush=n.get("explosionBallPush"),o.timeLeft=n.get("explosionDuration"),o},text:function(e,t,n){return new a(e,t,n)},player:function(e,t){return new l(e,t)}}},{"../config/game-config":"/Users/paul/dev/projects/rocket-juggler/app/lib/config/game-config.js","./ball":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/ball.js","./explosion":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/explosion.js","./player":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/player.js","./rocket":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/rocket.js","./text":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/text.js","./wall":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/wall.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/player.js":[function(e,t){(function(n){function o(e,t){this.width=64,this.height=128,this.view=i(e,t,this.width,this.height),this.body=r(e,t,this.width,this.height)}function i(e,t,n,o){var i=new s.Graphics;i.beginFill("#bbbbbb");var r=-o/2,a=-n/2;i.drawRect(a,r,n,o);var l=new s.Shape(i);return l.x=e,l.y=t,l}function r(e,t,n,o){var i=new a.Body({mass:1,fixedRotation:!0,position:[e,t]});return i.addShape(new a.Rectangle(n,o)),i}var s="undefined"!=typeof window?window.createjs:"undefined"!=typeof n?n.createjs:null,a=e("p2");t.exports=o;var l=o.prototype;l.update=function(e){this.view.x=this.body.position[0],this.view.y=this.body.position[1],this.updateLauncher(e)},l.aim=function(e,t){this.launcher.aim(e,t)},l.fire=function(){return this.launcher.fire()},l.updateLauncher=function(e){if(this.launcher){this.launcher.update(e);var t=this.body.position[0],n=this.body.position[1];this.launcher.move(t,n-this.height/2-10)}},l.moveLeft=function(e){this.body.velocity[0]=-e},l.moveRight=function(e){this.body.velocity[0]=e},l.stop=function(){this.body.velocity[0]=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{p2:"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/p2.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/rocket.js":[function(e,t){(function(n){function o(e,t,n){this.view=i(n),this.x=this.view.x=e,this.y=this.view.y=t,this.body=r(e,t,n),this.speed=800}function i(e){var t=new s.Graphics;return t.beginFill("#0000ff"),t.drawCircle(0,0,e),new s.Shape(t)}function r(e,t,n){var o=new a.Body({mass:10,fixedRotation:!0,position:[e,t]});return o.gravityScale=0,l.ghostify(o),o.addShape(new a.Circle(n)),o}var s="undefined"!=typeof window?window.createjs:"undefined"!=typeof n?n.createjs:null,a=e("p2"),l=e("ghost-body");t.exports=o;var u=o.prototype;u.update=function(){this.x=this.view.x=this.body.position[0],this.y=this.view.y=this.body.position[1]},u.launch=function(e){e.normalize(),e.multiply(this.speed),this.body.velocity=[e.x,e.y]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"ghost-body":"/Users/paul/dev/projects/rocket-juggler/node_modules/ghost-body/index.js",p2:"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/p2.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/text.js":[function(e,t){(function(e){function n(e,t,n){var i=new o.Text(n);i.x=e,i.y=t,this.view=i}var o="undefined"!=typeof window?window.createjs:"undefined"!=typeof e?e.createjs:null;t.exports=n;var i=n.prototype;Object.defineProperty(i,"message",{get:function(){return this.view.text},set:function(e){this.view.text=e}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/wall.js":[function(e,t){(function(n){function o(e,t,n,o){this.view=i(n,o),this.view.x=e,this.view.y=t,this.body=r(e,t,n,o)}function i(e,t){var n=new s.Graphics;return n.beginFill("#000000"),n.drawRect(0,0,e,t),new s.Shape(n)}function r(e,t,n,o){var i=new a.Body({mass:0,position:[e+n/2,t+o/2]});return i.addShape(new a.Rectangle(n,o)),i}var s="undefined"!=typeof window?window.createjs:"undefined"!=typeof n?n.createjs:null,a=e("p2");t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{p2:"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/p2.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/game.js":[function(e,t){(function(n){function o(e){this.stage=new r.Stage(e),this.width=e.width,this.height=e.height,this.entities=[],this.entitiesByBodyId={},this.timer=s,this.states={dummy:{setUp:function(){},update:function(){},tearDown:function(){}}},this.currentState=this.states.dummy,this.nextStateInfo=null,this.input=a}var i=e("p2"),r="undefined"!=typeof window?window.createjs:"undefined"!=typeof n?n.createjs:null,s=e("./ticker-countdown")(),a=e("./input");t.exports=o;var l=o.prototype;l.defineState=function(e,t){t.init(this),this.states[e]=t},l.createWorld=function(e){this.world=new i.World,e(this.world)},l.addBall=function(e){this.addEntity(e)},l.addWall=function(e){this.addEntity(e)},l.addRocket=function(e){this.addEntity(e)},l.getEntityByBody=function(e){return this.entitiesByBodyId[e.id]},l.addEntity=function(e){if(e.view&&this.stage.addChild(e.view),e.body){if(this.entitiesByBodyId[e.body.id]=e,!this.world)throw new Error("Cannot add physical entity until world has been created, see Game#createWorld");this.world.addBody(e.body)}this.entities.push(e)},l.removeBodyOf=function(e){e.body&&(this.world.removeBody(e.body),delete this.entitiesByBodyId[e.body.id])},l.removeViewOf=function(e){e.view&&this.stage.removeChild(e.view)},l.update=function(e){this.input.updateMouseLocation(this.stage.mouseX,this.stage.mouseY),this.world&&this.world.step(.025);for(var t=0;t<this.entities.length;t++)this.entities[t].update&&this.entities[t].update(e);for(this.currentState.update(this,this.input,e),t=0;t<this.entities.length;t++)this.entities[t].inactive&&(this.removeBodyOf(this.entities[t]),this.removeViewOf(this.entities[t]));this.entities=this.entities.filter(function(e){return!e.inactive}),this.stage.update(),this.stateChangeRequested()&&this.changeToNextState()},l.withStage=function(e){e(this.stage)},l.changeState=function(e){var t=Array.prototype.slice.call(arguments,1),n=this.states[e];if(!n)throw new Error('No such state "'+e+'". Known states are '+Object.keys(this.states).sort());this.nextStateInfo={state:n,params:t}},l.stateChangeRequested=function(){return this.nextStateInfo},l.changeToNextState=function(){this.currentState.tearDown(this),this.currentState=this.nextStateInfo.state;var e=this.nextStateInfo.params;e.unshift(this),delete this.nextStateInfo,this.reset(),this.currentState.setUp.apply(this.currentState,e)},l.reset=function(){this.stage.removeAllChildren(),this.world&&(this.world.clear(),delete this.world),this.entities=[],this.entitiesByBodyId={},["click","dblclick","drawend","drawstart","mousedown","mouseenter","mouseleave","mouseout","mouseover","pressmove","pressup","rollout","rollover","stagemousedown","stagemousemove","stagemouseup"].forEach(this.stage.removeAllEventListeners,this.stage)},l.start=function(){var e=this;r.Ticker.setFPS(40),r.Ticker.on("tick",this.timer),r.Ticker.on("tick",function(t){e.update(t)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./input":"/Users/paul/dev/projects/rocket-juggler/app/lib/input.js","./ticker-countdown":"/Users/paul/dev/projects/rocket-juggler/app/lib/ticker-countdown.js",p2:"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/p2.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/high-score.js":[function(e,t){(function(e){function n(){var e=i.getItem("highScore");return e?parseInt(e,10):null}function o(e){var t=n()||-1;return e>t?(i.setItem("highScore",e),!0):!1}var i="undefined"!=typeof window?window.localStorage:"undefined"!=typeof e?e.localStorage:null;t.exports={getHighScore:n,newScore:o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/Users/paul/dev/projects/rocket-juggler/app/lib/input.js":[function(e,t){(function(e){var n=("undefined"!=typeof window?window.window:"undefined"!=typeof e?e.window:null).document,o={};n.onkeydown=function(e){o[e.keyCode]=!0},n.onkeyup=function(e){delete o[e.keyCode]},t.exports={keys:o,mouseLocation:{x:0,y:0},updateMouseLocation:function(e,t){this.mouseLocation.x=e,this.mouseLocation.y=t}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/Users/paul/dev/projects/rocket-juggler/app/lib/launcher.js":[function(e,t){function n(){this.fireDelay=300,this.lastFireTime,this.currentTime,this.source={x:0,y:0},this.target={x:0,y:0}}var o=e("vec2"),i=e("./entity");t.exports=n;var r=n.prototype;r.move=function(e,t){this.source.x=e,this.source.y=t},r.aim=function(e,t){this.target.x=e,this.target.y=t},r.fire=function(){if(this.canFire()){this.lastFireTime=this.currentTime;var e=i.rocket(this.source.x,this.source.y);return e.launch(this.aimVector()),e}},r.aimVector=function(){var e=new o(this.target.x,this.target.y);return e.subtract(this.source.x,this.source.y),e},r.canFire=function(){return!this.lastFireTime||this.currentTime>=this.lastFireTime+this.fireDelay},r.update=function(e){this.currentTime=e.time}},{"./entity":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/index.js",vec2:"/Users/paul/dev/projects/rocket-juggler/node_modules/vec2/vec2.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/state/gameplay-collision-handler.js":[function(e,t){function n(e){return function(t){return t instanceof e}}function o(e){return e.inactive=!0,u.explosion(e.x,e.y)}var i=e("../entity/ball"),r=e("../entity/wall"),s=e("../entity/rocket"),a=e("../entity/explosion"),l=e("../collision-handler"),u=e("../entity");t.exports=function(e,t){var u=l();return u.addHandler(n(s),n(r),function(t){e.addEntity(o(t))}).addHandler(n(s),n(i),function(t){e.addEntity(o(t))}).addHandler(n(a),n(i),function(e,t){e.pushBall(t)}).addHandler(n(i),function(e){return e.isFloor},function(){e.changeState("title",t.score)}),u}},{"../collision-handler":"/Users/paul/dev/projects/rocket-juggler/app/lib/collision-handler.js","../entity":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/index.js","../entity/ball":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/ball.js","../entity/explosion":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/explosion.js","../entity/rocket":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/rocket.js","../entity/wall":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/wall.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/state/gameplay.js":[function(e,t){function n(e){var t=e.width,n=e.height,o=20,r=20,s=20,a=500,l=i.wall(0-a,0+s,o+a,n-r-s),u=i.wall(t-o,s,o+a,n-r-s),c=i.wall(0-a,0-a,t+2*a,s+a),p=i.wall(0-a,n-r,t+2*a,r+a);return p.isFloor=!0,[p,l,u,c]}var o=e("ghost-body"),i=e("../entity"),r=e("../launcher"),s=e("./gameplay-collision-handler"),a=e("../config/game-config"),l=e("./spawn-locations"),u={init:function(e){this.game=e},setUp:function(e){var t=s(e,this);e.createWorld(function(n){o.enable(n),n.gravity=[0,293],n.on("beginContact",function(n){var o=n.bodyA,i=n.bodyB,r=e.getEntityByBody(o),s=e.getEntityByBody(i);t.handleCollision(r,s)})}),n(e).forEach(e.addWall,e);var u=l(),c=function(){var t=u.nextLocation(),n=i.ball(t.x,t.y);e.addBall(n),e.timer.addCountdown(a.get("ballSpawnDelay"),c)};c(),this.score=0;var p=function(){this.score+=1,e.timer.addCountdown(1e3,p)}.bind(this);p(),this.player=i.player(400,684),this.player.launcher=new r,e.addEntity(this.player),e.withStage(function(e){e.on("stagemousedown",this.mouseFire,this),e.canvas.classList.add("playing")}.bind(this)),this.actualFps=i.text(40,30),this.targetFps=i.text(40,40),this.scoreText=i.text(40,50),e.addEntity(this.actualFps),e.addEntity(this.targetFps),e.addEntity(this.scoreText)},update:function(e,t){this.actualFps.message=createjs.Ticker.getMeasuredFPS(),this.targetFps.message=createjs.Ticker.getFPS(),this.scoreText.message="Score: "+this.score,this.player.aim(t.mouseLocation.x,t.mouseLocation.y),t.keys[16]&&this.fire(),t.keys[65]||t.keys[37]?this.player.moveLeft(a.get("playerSpeed")):t.keys[68]||t.keys[39]?this.player.moveRight(a.get("playerSpeed")):this.player.stop()},tearDown:function(e){e.timer.clearCountdowns(),e.withStage(function(e){e.canvas.classList.remove("playing")})},fire:function(){var e=this.player.fire();e&&this.game.addRocket(e)},mouseFire:function(e){this.player.aim(e.stageX,e.stageY),this.fire()}};t.exports=u},{"../config/game-config":"/Users/paul/dev/projects/rocket-juggler/app/lib/config/game-config.js","../entity":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/index.js","../launcher":"/Users/paul/dev/projects/rocket-juggler/app/lib/launcher.js","./gameplay-collision-handler":"/Users/paul/dev/projects/rocket-juggler/app/lib/state/gameplay-collision-handler.js","./spawn-locations":"/Users/paul/dev/projects/rocket-juggler/app/lib/state/spawn-locations.js","ghost-body":"/Users/paul/dev/projects/rocket-juggler/node_modules/ghost-body/index.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/state/help.js":[function(e,t){var n=e("../entity"),o={init:function(e){this.game=e},setUp:function(e){["***don't drop a ball***","a = move left","d = move right","mouse aims","mouse click = shoot"].forEach(function(t,o){var i=20*o;e.addEntity(n.text(500,150+i,t))});e.addEntity(n.text(500,100,"Press <esc> to return"))},update:function(e,t){t.keys[27]&&e.changeState("title")},tearDown:function(){}};t.exports=o},{"../entity":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/index.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/state/spawn-locations.js":[function(e,t){t.exports=function(){var e=0,t=[{x:656,y:80},{x:328,y:80}];return{nextLocation:function(){var n=t[e];return e+=1,e==t.length&&(e=0),n}}}},{}],"/Users/paul/dev/projects/rocket-juggler/app/lib/state/title.js":[function(e,t){var n=e("../entity"),o=e("../high-score"),i={init:function(e){this.game=e},setUp:function(e,t){var i="High Score: ";void 0!==t&&(o.newScore(t)&&(i="NEW! "+i),e.addEntity(n.text(500,300,"GAME OVER")),e.addEntity(n.text(500,320,"Score: "+t))),i+=o.getHighScore()||"N/A",e.addEntity(n.text(500,100,"ROCKET JUGGLER")),e.addEntity(n.text(500,120,"Press <enter> to begin")),e.addEntity(n.text(500,140,"Press <h> for help")),e.addEntity(n.text(500,170,i))},update:function(e,t){t.keys[13]?e.changeState("gameplay"):t.keys[72]&&e.changeState("help")},tearDown:function(){}};t.exports=i},{"../entity":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/index.js","../high-score":"/Users/paul/dev/projects/rocket-juggler/app/lib/high-score.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/ticker-countdown.js":[function(e,t){function n(){var e=[],t=function(t){var n=e.slice();n.forEach(function(e){e.timeLeft-=t.delta,e.timeLeft<=0&&e.callback()}),e=e.filter(function(e){return e.timeLeft>0})};return t.addCountdown=function(t,n){e.push({timeLeft:t,callback:n})},t.clearCountdowns=function(){e=[]},t}t.exports=n},{}],"/Users/paul/dev/projects/rocket-juggler/node_modules/ghost-body/index.js":[function(e,t){function n(e){return e.ghost=!0,e}function o(e){return delete e.ghost,e}function i(e){return e.ghost===!0}function r(e){e.on("preSolve",a)}function s(e){e.off("preSolve",a)}function a(e){l(e.contactEquations),l(e.frictionEquations)}function l(e){e.forEach(function(e){(i(e.bodyA)||i(e.bodyB))&&(e.enabled=!1)})}t.exports={ghostify:n,unghostify:o,isGhost:i,enable:r,disable:s}},{}],"/Users/paul/dev/projects/rocket-juggler/node_modules/knockout/build/output/knockout-latest.debug.js":[function(e,t,n){!function(){var o=!0;!function(i){var r=this||(0,eval)("this"),s=r.document,a=r.navigator,l=r.jQuery,u=r.JSON;!function(o){if("function"==typeof e&&"object"==typeof n&&"object"==typeof t){var i=t.exports||n;o(i,e)}else"function"==typeof define&&define.amd?define(["exports","require"],o):o(r.ko={})}(function(e,t){function n(e,t){var n=null===e||typeof e in m;return n?e===t:!1}function c(e,t){var n;return function(){n||(n=setTimeout(function(){n=i,e()},t))}}function p(e,t){var n;return function(){clearTimeout(n),n=setTimeout(e,t)}}function d(e){var t=this;return e&&v.utils.objectForEach(e,function(e,n){var o=v.extenders[e];"function"==typeof o&&(t=o(t,n)||t)}),t}function h(e){v.bindingHandlers[e]={init:function(t,n,o,i,r){var s=function(){var t={};return t[e]=n(),t};return v.bindingHandlers.event.init.call(this,t,s,o,i,r)}}}function f(e,t,n,o){v.bindingHandlers[e]={init:function(e,i,r,s,a){var l,u;return v.computed(function(){var r=v.utils.unwrapObservable(i()),s=!n!=!r,c=!u,p=c||t||s!==l;p&&(c&&v.computedContext.getDependenciesCount()&&(u=v.utils.cloneNodes(v.virtualElements.childNodes(e),!0)),s?(c||v.virtualElements.setDomNodeChildren(e,v.utils.cloneNodes(u)),v.applyBindingsToDescendants(o?o(a,r):a,e)):v.virtualElements.emptyNode(e),l=s)},null,{disposeWhenNodeIsRemoved:e}),{controlsDescendantBindings:!0}}},v.expressionRewriting.bindingRewriteValidators[e]=!1,v.virtualElements.allowedBindings[e]=!0}var v="undefined"!=typeof e?e:{};v.exportSymbol=function(e,t){for(var n=e.split("."),o=v,i=0;i<n.length-1;i++)o=o[n[i]];o[n[n.length-1]]=t},v.exportProperty=function(e,t,n){e[t]=n},v.version="3.2.0",v.exportSymbol("version",v.version),v.utils=function(){function e(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function t(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function n(e,t){return e.__proto__=t,e}function o(e,t){if("input"!==v.utils.tagNameLower(e)||!e.type)return!1;if("click"!=t.toLowerCase())return!1;var n=e.type;return"checkbox"==n||"radio"==n}var c={__proto__:[]}instanceof Array,p={},d={},h=a&&/Firefox\/2/i.test(a.userAgent)?"KeyboardEvent":"UIEvents";p[h]=["keyup","keydown","keypress"],p.MouseEvents=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"],e(p,function(e,t){if(t.length)for(var n=0,o=t.length;o>n;n++)d[t[n]]=e});var f={propertychange:!0},m=s&&function(){for(var e=3,t=s.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",n[0];);return e>4?e:i}(),g=6===m,y=7===m;return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(e,t){for(var n=0,o=e.length;o>n;n++)t(e[n],n)},arrayIndexOf:function(e,t){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var n=0,o=e.length;o>n;n++)if(e[n]===t)return n;return-1},arrayFirst:function(e,t,n){for(var o=0,i=e.length;i>o;o++)if(t.call(n,e[o],o))return e[o];return null},arrayRemoveItem:function(e,t){var n=v.utils.arrayIndexOf(e,t);n>0?e.splice(n,1):0===n&&e.shift()},arrayGetDistinctValues:function(e){e=e||[];for(var t=[],n=0,o=e.length;o>n;n++)v.utils.arrayIndexOf(t,e[n])<0&&t.push(e[n]);return t},arrayMap:function(e,t){e=e||[];for(var n=[],o=0,i=e.length;i>o;o++)n.push(t(e[o],o));return n},arrayFilter:function(e,t){e=e||[];for(var n=[],o=0,i=e.length;i>o;o++)t(e[o],o)&&n.push(e[o]);return n},arrayPushAll:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,o=t.length;o>n;n++)e.push(t[n]);return e},addOrRemoveItem:function(e,t,n){var o=v.utils.arrayIndexOf(v.utils.peekObservable(e),t);0>o?n&&e.push(t):n||e.splice(o,1)},canSetPrototype:c,extend:t,setPrototypeOf:n,setPrototypeOfOrExtend:c?n:t,objectForEach:e,objectMap:function(e,t){if(!e)return e;var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=t(e[o],o,e));return n},emptyDomNode:function(e){for(;e.firstChild;)v.removeNode(e.firstChild)},moveCleanedNodesToContainerElement:function(e){for(var t=v.utils.makeArray(e),n=s.createElement("div"),o=0,i=t.length;i>o;o++)n.appendChild(v.cleanNode(t[o]));return n},cloneNodes:function(e,t){for(var n=0,o=e.length,i=[];o>n;n++){var r=e[n].cloneNode(!0);i.push(t?v.cleanNode(r):r)}return i},setDomNodeChildren:function(e,t){if(v.utils.emptyDomNode(e),t)for(var n=0,o=t.length;o>n;n++)e.appendChild(t[n])},replaceDomNodes:function(e,t){var n=e.nodeType?[e]:e;if(n.length>0){for(var o=n[0],i=o.parentNode,r=0,s=t.length;s>r;r++)i.insertBefore(t[r],o);for(var r=0,s=n.length;s>r;r++)v.removeNode(n[r])}},fixUpContinuousNodeArray:function(e,t){if(e.length){for(t=8===t.nodeType&&t.parentNode||t;e.length&&e[0].parentNode!==t;)e.shift();if(e.length>1){var n=e[0],o=e[e.length-1];for(e.length=0;n!==o;)if(e.push(n),n=n.nextSibling,!n)return;e.push(o)}}return e},setOptionNodeSelectionState:function(e,t){7>m?e.setAttribute("selected",t):e.selected=t},stringTrim:function(e){return null===e||e===i?"":e.trim?e.trim():e.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},stringStartsWith:function(e,t){return e=e||"",t.length>e.length?!1:e.substring(0,t.length)===t},domNodeIsContainedBy:function(e,t){if(e===t)return!0;if(11===e.nodeType)return!1;if(t.contains)return t.contains(3===e.nodeType?e.parentNode:e);if(t.compareDocumentPosition)return 16==(16&t.compareDocumentPosition(e));for(;e&&e!=t;)e=e.parentNode;return!!e},domNodeIsAttachedToDocument:function(e){return v.utils.domNodeIsContainedBy(e,e.ownerDocument.documentElement)},anyDomNodeIsAttachedToDocument:function(e){return!!v.utils.arrayFirst(e,v.utils.domNodeIsAttachedToDocument)},tagNameLower:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},registerEventHandler:function(e,t,n){var o=m&&f[t];if(!o&&l)l(e).bind(t,n);else if(o||"function"!=typeof e.addEventListener){if("undefined"==typeof e.attachEvent)throw new Error("Browser doesn't support addEventListener or attachEvent");var i=function(t){n.call(e,t)},r="on"+t;e.attachEvent(r,i),v.utils.domNodeDisposal.addDisposeCallback(e,function(){e.detachEvent(r,i)})}else e.addEventListener(t,n,!1)},triggerEvent:function(e,t){if(!e||!e.nodeType)throw new Error("element must be a DOM node when calling triggerEvent");var n=o(e,t);if(l&&!n)l(e).trigger(t);else if("function"==typeof s.createEvent){if("function"!=typeof e.dispatchEvent)throw new Error("The supplied element doesn't support dispatchEvent");var i=d[t]||"HTMLEvents",a=s.createEvent(i);a.initEvent(t,!0,!0,r,0,0,0,0,0,!1,!1,!1,!1,0,e),e.dispatchEvent(a)}else if(n&&e.click)e.click();else{if("undefined"==typeof e.fireEvent)throw new Error("Browser doesn't support triggering events");e.fireEvent("on"+t)}},unwrapObservable:function(e){return v.isObservable(e)?e():e},peekObservable:function(e){return v.isObservable(e)?e.peek():e},toggleDomNodeCssClass:function(e,t,n){if(t){var o=/\S+/g,i=e.className.match(o)||[];v.utils.arrayForEach(t.match(o),function(e){v.utils.addOrRemoveItem(i,e,n)}),e.className=i.join(" ")}},setTextContent:function(e,t){var n=v.utils.unwrapObservable(t);(null===n||n===i)&&(n="");var o=v.virtualElements.firstChild(e);!o||3!=o.nodeType||v.virtualElements.nextSibling(o)?v.virtualElements.setDomNodeChildren(e,[e.ownerDocument.createTextNode(n)]):o.data=n,v.utils.forceRefresh(e)},setElementName:function(e,t){if(e.name=t,7>=m)try{e.mergeAttributes(s.createElement("<input name='"+e.name+"'/>"),!1)}catch(n){}},forceRefresh:function(e){if(m>=9){var t=1==e.nodeType?e:e.parentNode;t.style&&(t.style.zoom=t.style.zoom)}},ensureSelectElementIsRenderedCorrectly:function(e){if(m){var t=e.style.width;e.style.width=0,e.style.width=t}},range:function(e,t){e=v.utils.unwrapObservable(e),t=v.utils.unwrapObservable(t);for(var n=[],o=e;t>=o;o++)n.push(o);return n},makeArray:function(e){for(var t=[],n=0,o=e.length;o>n;n++)t.push(e[n]);return t},isIe6:g,isIe7:y,ieVersion:m,getFormFields:function(e,t){for(var n=v.utils.makeArray(e.getElementsByTagName("input")).concat(v.utils.makeArray(e.getElementsByTagName("textarea"))),o="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},i=[],r=n.length-1;r>=0;r--)o(n[r])&&i.push(n[r]);return i},parseJson:function(e){return"string"==typeof e&&(e=v.utils.stringTrim(e))?u&&u.parse?u.parse(e):new Function("return "+e)():null},stringifyJson:function(e,t,n){if(!u||!u.stringify)throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return u.stringify(v.utils.unwrapObservable(e),t,n)},postJson:function(t,n,o){o=o||{};var i=o.params||{},r=o.includeFields||this.fieldsIncludedWithJsonPost,a=t;if("object"==typeof t&&"form"===v.utils.tagNameLower(t)){var l=t;a=l.action;for(var u=r.length-1;u>=0;u--)for(var c=v.utils.getFormFields(l,r[u]),p=c.length-1;p>=0;p--)i[c[p].name]=c[p].value}n=v.utils.unwrapObservable(n);var d=s.createElement("form");d.style.display="none",d.action=a,d.method="post";
for(var h in n){var f=s.createElement("input");f.type="hidden",f.name=h,f.value=v.utils.stringifyJson(v.utils.unwrapObservable(n[h])),d.appendChild(f)}e(i,function(e,t){var n=s.createElement("input");n.type="hidden",n.name=e,n.value=t,d.appendChild(n)}),s.body.appendChild(d),o.submitter?o.submitter(d):d.submit(),setTimeout(function(){d.parentNode.removeChild(d)},0)}}}(),v.exportSymbol("utils",v.utils),v.exportSymbol("utils.arrayForEach",v.utils.arrayForEach),v.exportSymbol("utils.arrayFirst",v.utils.arrayFirst),v.exportSymbol("utils.arrayFilter",v.utils.arrayFilter),v.exportSymbol("utils.arrayGetDistinctValues",v.utils.arrayGetDistinctValues),v.exportSymbol("utils.arrayIndexOf",v.utils.arrayIndexOf),v.exportSymbol("utils.arrayMap",v.utils.arrayMap),v.exportSymbol("utils.arrayPushAll",v.utils.arrayPushAll),v.exportSymbol("utils.arrayRemoveItem",v.utils.arrayRemoveItem),v.exportSymbol("utils.extend",v.utils.extend),v.exportSymbol("utils.fieldsIncludedWithJsonPost",v.utils.fieldsIncludedWithJsonPost),v.exportSymbol("utils.getFormFields",v.utils.getFormFields),v.exportSymbol("utils.peekObservable",v.utils.peekObservable),v.exportSymbol("utils.postJson",v.utils.postJson),v.exportSymbol("utils.parseJson",v.utils.parseJson),v.exportSymbol("utils.registerEventHandler",v.utils.registerEventHandler),v.exportSymbol("utils.stringifyJson",v.utils.stringifyJson),v.exportSymbol("utils.range",v.utils.range),v.exportSymbol("utils.toggleDomNodeCssClass",v.utils.toggleDomNodeCssClass),v.exportSymbol("utils.triggerEvent",v.utils.triggerEvent),v.exportSymbol("utils.unwrapObservable",v.utils.unwrapObservable),v.exportSymbol("utils.objectForEach",v.utils.objectForEach),v.exportSymbol("utils.addOrRemoveItem",v.utils.addOrRemoveItem),v.exportSymbol("unwrap",v.utils.unwrapObservable),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice.call(arguments),e=n.shift();return function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}}),v.utils.domData=new function(){function e(e,r){var s=e[n],a=s&&"null"!==s&&o[s];if(!a){if(!r)return i;s=e[n]="ko"+t++,o[s]={}}return o[s]}var t=0,n="__ko__"+(new Date).getTime(),o={};return{get:function(t,n){var o=e(t,!1);return o===i?i:o[n]},set:function(t,n,o){if(o!==i||e(t,!1)!==i){var r=e(t,!0);r[n]=o}},clear:function(e){var t=e[n];return t?(delete o[t],e[n]=null,!0):!1},nextKey:function(){return t++ +n}}},v.exportSymbol("utils.domData",v.utils.domData),v.exportSymbol("utils.domData.clear",v.utils.domData.clear),v.utils.domNodeDisposal=new function(){function e(e,t){var n=v.utils.domData.get(e,r);return n===i&&t&&(n=[],v.utils.domData.set(e,r,n)),n}function t(e){v.utils.domData.set(e,r,i)}function n(t){var n=e(t,!1);if(n){n=n.slice(0);for(var i=0;i<n.length;i++)n[i](t)}v.utils.domData.clear(t),v.utils.domNodeDisposal.cleanExternalData(t),a[t.nodeType]&&o(t)}function o(e){for(var t,o=e.firstChild;t=o;)o=t.nextSibling,8===t.nodeType&&n(t)}var r=v.utils.domData.nextKey(),s={1:!0,8:!0,9:!0},a={1:!0,9:!0};return{addDisposeCallback:function(t,n){if("function"!=typeof n)throw new Error("Callback must be a function");e(t,!0).push(n)},removeDisposeCallback:function(n,o){var i=e(n,!1);i&&(v.utils.arrayRemoveItem(i,o),0==i.length&&t(n))},cleanNode:function(e){if(s[e.nodeType]&&(n(e),a[e.nodeType])){var t=[];v.utils.arrayPushAll(t,e.getElementsByTagName("*"));for(var o=0,i=t.length;i>o;o++)n(t[o])}return e},removeNode:function(e){v.cleanNode(e),e.parentNode&&e.parentNode.removeChild(e)},cleanExternalData:function(e){l&&"function"==typeof l.cleanData&&l.cleanData([e])}}},v.cleanNode=v.utils.domNodeDisposal.cleanNode,v.removeNode=v.utils.domNodeDisposal.removeNode,v.exportSymbol("cleanNode",v.cleanNode),v.exportSymbol("removeNode",v.removeNode),v.exportSymbol("utils.domNodeDisposal",v.utils.domNodeDisposal),v.exportSymbol("utils.domNodeDisposal.addDisposeCallback",v.utils.domNodeDisposal.addDisposeCallback),v.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",v.utils.domNodeDisposal.removeDisposeCallback),function(){function e(e){var t=v.utils.stringTrim(e).toLowerCase(),n=s.createElement("div"),o=t.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!t.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!t.indexOf("<td")||!t.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],i="ignored<div>"+o[1]+e+o[2]+"</div>";for("function"==typeof r.innerShiv?n.appendChild(r.innerShiv(i)):n.innerHTML=i;o[0]--;)n=n.lastChild;return v.utils.makeArray(n.lastChild.childNodes)}function t(e){if(l.parseHTML)return l.parseHTML(e)||[];var t=l.clean([e]);if(t&&t[0]){for(var n=t[0];n.parentNode&&11!==n.parentNode.nodeType;)n=n.parentNode;n.parentNode&&n.parentNode.removeChild(n)}return t}v.utils.parseHtmlFragment=function(n){return l?t(n):e(n)},v.utils.setHtml=function(e,t){if(v.utils.emptyDomNode(e),t=v.utils.unwrapObservable(t),null!==t&&t!==i)if("string"!=typeof t&&(t=t.toString()),l)l(e).html(t);else for(var n=v.utils.parseHtmlFragment(t),o=0;o<n.length;o++)e.appendChild(n[o])}}(),v.exportSymbol("utils.parseHtmlFragment",v.utils.parseHtmlFragment),v.exportSymbol("utils.setHtml",v.utils.setHtml),v.memoization=function(){function e(){return(4294967296*(1+Math.random())|0).toString(16).substring(1)}function t(){return e()+e()}function n(e,t){if(e)if(8==e.nodeType){var o=v.memoization.parseMemoText(e.nodeValue);null!=o&&t.push({domNode:e,memoId:o})}else if(1==e.nodeType)for(var i=0,r=e.childNodes,s=r.length;s>i;i++)n(r[i],t)}var o={};return{memoize:function(e){if("function"!=typeof e)throw new Error("You can only pass a function to ko.memoization.memoize()");var n=t();return o[n]=e,"<!--[ko_memo:"+n+"]-->"},unmemoize:function(e,t){var n=o[e];if(n===i)throw new Error("Couldn't find any memo with ID "+e+". Perhaps it's already been unmemoized.");try{return n.apply(null,t||[]),!0}finally{delete o[e]}},unmemoizeDomNodeAndDescendants:function(e,t){var o=[];n(e,o);for(var i=0,r=o.length;r>i;i++){var s=o[i].domNode,a=[s];t&&v.utils.arrayPushAll(a,t),v.memoization.unmemoize(o[i].memoId,a),s.nodeValue="",s.parentNode&&s.parentNode.removeChild(s)}},parseMemoText:function(e){var t=e.match(/^\[ko_memo\:(.*?)\]$/);return t?t[1]:null}}}(),v.exportSymbol("memoization",v.memoization),v.exportSymbol("memoization.memoize",v.memoization.memoize),v.exportSymbol("memoization.unmemoize",v.memoization.unmemoize),v.exportSymbol("memoization.parseMemoText",v.memoization.parseMemoText),v.exportSymbol("memoization.unmemoizeDomNodeAndDescendants",v.memoization.unmemoizeDomNodeAndDescendants),v.extenders={throttle:function(e,t){e.throttleEvaluation=t;var n=null;return v.dependentObservable({read:e,write:function(o){clearTimeout(n),n=setTimeout(function(){e(o)},t)}})},rateLimit:function(e,t){var n,o,i;"number"==typeof t?n=t:(n=t.timeout,o=t.method),i="notifyWhenChangesStop"==o?p:c,e.limit(function(e){return i(e,n)})},notify:function(e,t){e.equalityComparer="always"==t?null:n}};var m={undefined:1,"boolean":1,number:1,string:1};v.exportSymbol("extenders",v.extenders),v.subscription=function(e,t,n){this.target=e,this.callback=t,this.disposeCallback=n,this.isDisposed=!1,v.exportProperty(this,"dispose",this.dispose)},v.subscription.prototype.dispose=function(){this.isDisposed=!0,this.disposeCallback()},v.subscribable=function(){v.utils.setPrototypeOfOrExtend(this,v.subscribable.fn),this._subscriptions={}};var g="change",y={subscribe:function(e,t,n){var o=this;n=n||g;var i=t?e.bind(t):e,r=new v.subscription(o,i,function(){v.utils.arrayRemoveItem(o._subscriptions[n],r),o.afterSubscriptionRemove&&o.afterSubscriptionRemove(n)});return o.beforeSubscriptionAdd&&o.beforeSubscriptionAdd(n),o._subscriptions[n]||(o._subscriptions[n]=[]),o._subscriptions[n].push(r),r},notifySubscribers:function(e,t){if(t=t||g,this.hasSubscriptionsForEvent(t))try{v.dependencyDetection.begin();for(var n,o=this._subscriptions[t].slice(0),i=0;n=o[i];++i)n.isDisposed||n.callback(e)}finally{v.dependencyDetection.end()}},limit:function(e){var t,n,o,i=this,r=v.isObservable(i),s="beforeChange";i._origNotifySubscribers||(i._origNotifySubscribers=i.notifySubscribers,i.notifySubscribers=function(e,t){t&&t!==g?t===s?i._rateLimitedBeforeChange(e):i._origNotifySubscribers(e,t):i._rateLimitedChange(e)});var a=e(function(){r&&o===i&&(o=i()),t=!1,i.isDifferent(n,o)&&i._origNotifySubscribers(n=o)});i._rateLimitedChange=function(e){t=!0,o=e,a()},i._rateLimitedBeforeChange=function(e){t||(n=e,i._origNotifySubscribers(e,s))}},hasSubscriptionsForEvent:function(e){return this._subscriptions[e]&&this._subscriptions[e].length},getSubscriptionsCount:function(){var e=0;return v.utils.objectForEach(this._subscriptions,function(t,n){e+=n.length}),e},isDifferent:function(e,t){return!this.equalityComparer||!this.equalityComparer(e,t)},extend:d};v.exportProperty(y,"subscribe",y.subscribe),v.exportProperty(y,"extend",y.extend),v.exportProperty(y,"getSubscriptionsCount",y.getSubscriptionsCount),v.utils.canSetPrototype&&v.utils.setPrototypeOf(y,Function.prototype),v.subscribable.fn=y,v.isSubscribable=function(e){return null!=e&&"function"==typeof e.subscribe&&"function"==typeof e.notifySubscribers},v.exportSymbol("subscribable",v.subscribable),v.exportSymbol("isSubscribable",v.isSubscribable),v.computedContext=v.dependencyDetection=function(){function e(){return++r}function t(e){i.push(o),o=e}function n(){o=i.pop()}var o,i=[],r=0;return{begin:t,end:n,registerDependency:function(t){if(o){if(!v.isSubscribable(t))throw new Error("Only subscribable things can act as dependencies");o.callback(t,t._id||(t._id=e()))}},ignore:function(e,o,i){try{return t(),e.apply(o,i||[])}finally{n()}},getDependenciesCount:function(){return o?o.computed.getDependenciesCount():void 0},isInitial:function(){return o?o.isInitial:void 0}}}(),v.exportSymbol("computedContext",v.computedContext),v.exportSymbol("computedContext.getDependenciesCount",v.computedContext.getDependenciesCount),v.exportSymbol("computedContext.isInitial",v.computedContext.isInitial),v.exportSymbol("computedContext.isSleeping",v.computedContext.isSleeping),v.observable=function(e){function t(){return arguments.length>0?(t.isDifferent(n,arguments[0])&&(t.valueWillMutate(),n=arguments[0],o&&(t._latestValue=n),t.valueHasMutated()),this):(v.dependencyDetection.registerDependency(t),n)}var n=e;return v.subscribable.call(t),v.utils.setPrototypeOfOrExtend(t,v.observable.fn),o&&(t._latestValue=n),t.peek=function(){return n},t.valueHasMutated=function(){t.notifySubscribers(n)},t.valueWillMutate=function(){t.notifySubscribers(n,"beforeChange")},v.exportProperty(t,"peek",t.peek),v.exportProperty(t,"valueHasMutated",t.valueHasMutated),v.exportProperty(t,"valueWillMutate",t.valueWillMutate),t},v.observable.fn={equalityComparer:n};var b=v.observable.protoProperty="__ko_proto__";v.observable.fn[b]=v.observable,v.utils.canSetPrototype&&v.utils.setPrototypeOf(v.observable.fn,v.subscribable.fn),v.hasPrototype=function(e,t){return null===e||e===i||e[b]===i?!1:e[b]===t?!0:v.hasPrototype(e[b],t)},v.isObservable=function(e){return v.hasPrototype(e,v.observable)},v.isWriteableObservable=function(e){return"function"==typeof e&&e[b]===v.observable?!0:"function"==typeof e&&e[b]===v.dependentObservable&&e.hasWriteFunction?!0:!1},v.exportSymbol("observable",v.observable),v.exportSymbol("isObservable",v.isObservable),v.exportSymbol("isWriteableObservable",v.isWriteableObservable),v.exportSymbol("isWritableObservable",v.isWriteableObservable),v.observableArray=function(e){if(e=e||[],"object"!=typeof e||!("length"in e))throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");var t=v.observable(e);return v.utils.setPrototypeOfOrExtend(t,v.observableArray.fn),t.extend({trackArrayChanges:!0})},v.observableArray.fn={remove:function(e){for(var t=this.peek(),n=[],o="function"!=typeof e||v.isObservable(e)?function(t){return t===e}:e,i=0;i<t.length;i++){var r=t[i];o(r)&&(0===n.length&&this.valueWillMutate(),n.push(r),t.splice(i,1),i--)}return n.length&&this.valueHasMutated(),n},removeAll:function(e){if(e===i){var t=this.peek(),n=t.slice(0);return this.valueWillMutate(),t.splice(0,t.length),this.valueHasMutated(),n}return e?this.remove(function(t){return v.utils.arrayIndexOf(e,t)>=0}):[]},destroy:function(e){var t=this.peek(),n="function"!=typeof e||v.isObservable(e)?function(t){return t===e}:e;this.valueWillMutate();for(var o=t.length-1;o>=0;o--){var i=t[o];n(i)&&(t[o]._destroy=!0)}this.valueHasMutated()},destroyAll:function(e){return e===i?this.destroy(function(){return!0}):e?this.destroy(function(t){return v.utils.arrayIndexOf(e,t)>=0}):[]},indexOf:function(e){var t=this();return v.utils.arrayIndexOf(t,e)},replace:function(e,t){var n=this.indexOf(e);n>=0&&(this.valueWillMutate(),this.peek()[n]=t,this.valueHasMutated())}},v.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift"],function(e){v.observableArray.fn[e]=function(){var t=this.peek();this.valueWillMutate(),this.cacheDiffForKnownOperation(t,e,arguments);var n=t[e].apply(t,arguments);return this.valueHasMutated(),n}}),v.utils.arrayForEach(["slice"],function(e){v.observableArray.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}}),v.utils.canSetPrototype&&v.utils.setPrototypeOf(v.observableArray.fn,v.observable.fn),v.exportSymbol("observableArray",v.observableArray);var j="arrayChange";v.extenders.trackArrayChanges=function(e){function t(){if(!o){o=!0;var t=e.notifySubscribers;e.notifySubscribers=function(e,n){return n&&n!==g||++r,t.apply(this,arguments)};var s=[].concat(e.peek()||[]);i=null,e.subscribe(function(t){if(t=[].concat(t||[]),e.hasSubscriptionsForEvent(j)){var o=n(s,t);o.length&&e.notifySubscribers(o,j)}s=t,i=null,r=0})}}function n(e,t){return(!i||r>1)&&(i=v.utils.compareArrays(e,t,{sparse:!0})),i}if(!e.cacheDiffForKnownOperation){var o=!1,i=null,r=0,s=e.subscribe;e.subscribe=e.subscribe=function(e,n,o){return o===j&&t(),s.apply(this,arguments)},e.cacheDiffForKnownOperation=function(e,t,n){function s(e,t,n){return a[a.length]={status:e,value:t,index:n}}if(o&&!r){var a=[],l=e.length,u=n.length,c=0;switch(t){case"push":c=l;case"unshift":for(var p=0;u>p;p++)s("added",n[p],c+p);break;case"pop":c=l-1;case"shift":l&&s("deleted",e[c],c);break;case"splice":for(var d=Math.min(Math.max(0,n[0]<0?l+n[0]:n[0]),l),h=1===u?l:Math.min(d+(n[1]||0),l),f=d+u-2,m=Math.max(h,f),g=[],y=[],p=d,b=2;m>p;++p,++b)h>p&&y.push(s("deleted",e[p],p)),f>p&&g.push(s("added",n[b],p));v.utils.findMovesInArrayComparison(y,g);break;default:return}i=a}}}},v.computed=v.dependentObservable=function(e,t,n){function r(e,t){C[t]||(C[t]=e.subscribe(l),++B)}function s(){v.utils.objectForEach(C,function(e,t){t.dispose()}),C={}}function a(){s(),B=0,y=!0,f=!1}function l(){var e=c.throttleEvaluation;e&&e>=0?(clearTimeout(_),_=setTimeout(u,e)):c._evalRateLimited?c._evalRateLimited():u()}function u(e){if(m){if(j)throw Error("A 'pure' computed must not be called recursively")}else if(!y){if(S&&S()){if(!g)return void k()}else g=!1;if(m=!0,E)try{var n={};v.dependencyDetection.begin({callback:function(e,t){n[t]||(n[t]=1,++B)},computed:c,isInitial:i}),B=0,h=b.call(t)}finally{v.dependencyDetection.end(),m=!1}else try{var s=C,a=B;v.dependencyDetection.begin({callback:function(e,t){y||(a&&s[t]?(C[t]=s[t],++B,delete s[t],--a):r(e,t))},computed:c,isInitial:j?i:!B}),C={},B=0;try{var l=t?b.call(t):b()}finally{v.dependencyDetection.end(),a&&v.utils.objectForEach(s,function(e,t){t.dispose()}),f=!1}c.isDifferent(h,l)&&(c.notifySubscribers(h,"beforeChange"),h=l,o&&(c._latestValue=h),e!==!0&&c.notifySubscribers(h))}finally{m=!1}B||k()}}function c(){if(arguments.length>0){if("function"!=typeof w)throw new Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return w.apply(t,arguments),this}return v.dependencyDetection.registerDependency(c),f&&u(!0),h}function p(){return f&&!B&&u(!0),h}function d(){return f||B>0}var h,f=!0,m=!1,g=!1,y=!1,b=e,j=!1,E=!1;if(b&&"object"==typeof b?(n=b,b=n.read):(n=n||{},b||(b=n.read)),"function"!=typeof b)throw new Error("Pass a function that returns the value of the ko.computed");var w=n.write,x=n.disposeWhenNodeIsRemoved||n.disposeWhenNodeIsRemoved||null,A=n.disposeWhen||n.disposeWhen,S=A,k=a,C={},B=0,_=null;t||(t=n.owner),v.subscribable.call(c),v.utils.setPrototypeOfOrExtend(c,v.dependentObservable.fn),c.peek=p,c.getDependenciesCount=function(){return B},c.hasWriteFunction="function"==typeof n.write,c.dispose=function(){k()},c.isActive=d;var U=c.limit;return c.limit=function(e){U.call(c,e),c._evalRateLimited=function(){c._rateLimitedBeforeChange(h),f=!0,c._rateLimitedChange(c)}},n.pure?(j=!0,E=!0,c.beforeSubscriptionAdd=function(){E&&(E=!1,u(!0))},c.afterSubscriptionRemove=function(){c.getSubscriptionsCount()||(s(),E=f=!0)}):n.deferEvaluation&&(c.beforeSubscriptionAdd=function(){p(),delete c.beforeSubscriptionAdd}),v.exportProperty(c,"peek",c.peek),v.exportProperty(c,"dispose",c.dispose),v.exportProperty(c,"isActive",c.isActive),v.exportProperty(c,"getDependenciesCount",c.getDependenciesCount),x&&(g=!0,x.nodeType&&(S=function(){return!v.utils.domNodeIsAttachedToDocument(x)||A&&A()})),E||n.deferEvaluation||u(),x&&d()&&x.nodeType&&(k=function(){v.utils.domNodeDisposal.removeDisposeCallback(x,k),a()},v.utils.domNodeDisposal.addDisposeCallback(x,k)),c},v.isComputed=function(e){return v.hasPrototype(e,v.dependentObservable)};var E=v.observable.protoProperty;v.dependentObservable[E]=v.observable,v.dependentObservable.fn={equalityComparer:n},v.dependentObservable.fn[E]=v.dependentObservable,v.utils.canSetPrototype&&v.utils.setPrototypeOf(v.dependentObservable.fn,v.subscribable.fn),v.exportSymbol("dependentObservable",v.dependentObservable),v.exportSymbol("computed",v.dependentObservable),v.exportSymbol("isComputed",v.isComputed),v.pureComputed=function(e,t){return"function"==typeof e?v.computed(e,t,{pure:!0}):(e=v.utils.extend({},e),e.pure=!0,v.computed(e,t))},v.exportSymbol("pureComputed",v.pureComputed),function(){function e(o,r,s){s=s||new n,o=r(o);var a=!("object"!=typeof o||null===o||o===i||o instanceof Date||o instanceof String||o instanceof Number||o instanceof Boolean);if(!a)return o;var l=o instanceof Array?[]:{};return s.save(o,l),t(o,function(t){var n=r(o[t]);switch(typeof n){case"boolean":case"number":case"string":case"function":l[t]=n;break;case"object":case"undefined":var a=s.get(n);l[t]=a!==i?a:e(n,r,s)}}),l}function t(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)t(n);"function"==typeof e.toJSON&&t("toJSON")}else for(var o in e)t(o)}function n(){this.keys=[],this.values=[]}var o=10;v.toJS=function(t){if(0==arguments.length)throw new Error("When calling ko.toJS, pass the object you want to convert.");return e(t,function(e){for(var t=0;v.isObservable(e)&&o>t;t++)e=e();return e})},v.toJSON=function(e,t,n){var o=v.toJS(e);return v.utils.stringifyJson(o,t,n)},n.prototype={constructor:n,save:function(e,t){var n=v.utils.arrayIndexOf(this.keys,e);n>=0?this.values[n]=t:(this.keys.push(e),this.values.push(t))},get:function(e){var t=v.utils.arrayIndexOf(this.keys,e);return t>=0?this.values[t]:i}}}(),v.exportSymbol("toJS",v.toJS),v.exportSymbol("toJSON",v.toJSON),function(){var e="__ko__hasDomDataOptionValue__";v.selectExtensions={readValue:function(t){switch(v.utils.tagNameLower(t)){case"option":return t[e]===!0?v.utils.domData.get(t,v.bindingHandlers.options.optionValueDomDataKey):v.utils.ieVersion<=7?t.getAttributeNode("value")&&t.getAttributeNode("value").specified?t.value:t.text:t.value;case"select":return t.selectedIndex>=0?v.selectExtensions.readValue(t.options[t.selectedIndex]):i;default:return t.value}},writeValue:function(t,n,o){switch(v.utils.tagNameLower(t)){case"option":switch(typeof n){case"string":v.utils.domData.set(t,v.bindingHandlers.options.optionValueDomDataKey,i),e in t&&delete t[e],t.value=n;break;default:v.utils.domData.set(t,v.bindingHandlers.options.optionValueDomDataKey,n),t[e]=!0,t.value="number"==typeof n?n:""}break;case"select":(""===n||null===n)&&(n=i);for(var r,s=-1,a=0,l=t.options.length;l>a;++a)if(r=v.selectExtensions.readValue(t.options[a]),r==n||""==r&&n===i){s=a;break}(o||s>=0||n===i&&t.size>1)&&(t.selectedIndex=s);break;default:(null===n||n===i)&&(n=""),t.value=n}}}}(),v.exportSymbol("selectExtensions",v.selectExtensions),v.exportSymbol("selectExtensions.readValue",v.selectExtensions.readValue),v.exportSymbol("selectExtensions.writeValue",v.selectExtensions.writeValue),v.expressionRewriting=function(){function e(e){if(v.utils.arrayIndexOf(o,e)>=0)return!1;var t=e.match(i);return null===t?!1:t[1]?"Object("+t[1]+")"+t[2]:e}function t(e){var t=v.utils.stringTrim(e);123===t.charCodeAt(0)&&(t=t.slice(1,-1));var n,o,i=[],r=t.match(p),s=0;if(r){r.push(",");for(var a,l=0;a=r[l];++l){var u=a.charCodeAt(0);if(44===u){if(0>=s){n&&i.push(o?{key:n,value:o.join("")}:{unknown:n}),n=o=s=0;continue}}else if(58===u){if(!o)continue}else if(47===u&&l&&a.length>1){var c=r[l-1].match(d);c&&!h[c[0]]&&(t=t.substr(t.indexOf(a)+1),r=t.match(p),r.push(","),l=-1,a="/")}else if(40===u||123===u||91===u)++s;else if(41===u||125===u||93===u)--s;else if(!n&&!o){n=34===u||39===u?a.slice(1,-1):a;continue}o?o.push(a):o=[a]}}return i}function n(n,o){function i(t,n){function o(e){return e&&e.preprocess?n=e.preprocess(n,t,i):!0}var u;if(!l){if(!o(v.getBindingHandler(t)))return;f[t]&&(u=e(n))&&s.push("'"+t+"':function(_z){"+u+"=_z}")}a&&(n="function(){return "+n+" }"),r.push("'"+t+"':"+n)}o=o||{};var r=[],s=[],a=o.valueAccessors,l=o.bindingParams,u="string"==typeof n?t(n):n;return v.utils.arrayForEach(u,function(e){i(e.key||e.unknown,e.value)}),s.length&&i("_ko_property_writers","{"+s.join(",")+" }"),r.join(",")}var o=["true","false","null","undefined"],i=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,r='"(?:[^"\\\\]|\\\\.)*"',s="'(?:[^'\\\\]|\\\\.)*'",a="/(?:[^/\\\\]|\\\\.)*/w*",l=",\"'{}()/:[\\]",u="[^\\s:,/][^"+l+"]*[^\\s"+l+"]",c="[^\\s]",p=RegExp(r+"|"+s+"|"+a+"|"+u+"|"+c,"g"),d=/[\])"'A-Za-z0-9_$]+$/,h={"in":1,"return":1,"typeof":1},f={};return{bindingRewriteValidators:[],twoWayBindings:f,parseObjectLiteral:t,preProcessBindings:n,keyValueArrayContainsKey:function(e,t){for(var n=0;n<e.length;n++)if(e[n].key==t)return!0;return!1},writeValueToProperty:function(e,t,n,o,i){if(e&&v.isObservable(e))!v.isWriteableObservable(e)||i&&e.peek()===o||e(o);else{var r=t.get("_ko_property_writers");r&&r[n]&&r[n](o)}}}}(),v.exportSymbol("expressionRewriting",v.expressionRewriting),v.exportSymbol("expressionRewriting.bindingRewriteValidators",v.expressionRewriting.bindingRewriteValidators),v.exportSymbol("expressionRewriting.parseObjectLiteral",v.expressionRewriting.parseObjectLiteral),v.exportSymbol("expressionRewriting.preProcessBindings",v.expressionRewriting.preProcessBindings),v.exportSymbol("expressionRewriting._twoWayBindings",v.expressionRewriting.twoWayBindings),v.exportSymbol("jsonExpressionRewriting",v.expressionRewriting),v.exportSymbol("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",v.expressionRewriting.preProcessBindings),function(){function e(e){return 8==e.nodeType&&a.test(r?e.text:e.nodeValue)}function t(e){return 8==e.nodeType&&l.test(r?e.text:e.nodeValue)}function n(n,o){for(var i=n,r=1,s=[];i=i.nextSibling;){if(t(i)&&(r--,0===r))return s;s.push(i),e(i)&&r++}if(!o)throw new Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function o(e,t){var o=n(e,t);return o?o.length>0?o[o.length-1].nextSibling:e.nextSibling:null}function i(n){var i=n.firstChild,r=null;if(i)do if(r)r.push(i);else if(e(i)){var s=o(i,!0);s?i=s:r=[i]}else t(i)&&(r=[i]);while(i=i.nextSibling);return r}var r=s&&"<!--test-->"===s.createComment("test").text,a=r?/^<!--\s*ko(?:\s+([\s\S]+))?\s*-->$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,l=r?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,u={ul:!0,ol:!0};v.virtualElements={allowedBindings:{},childNodes:function(t){return e(t)?n(t):t.childNodes},emptyNode:function(t){if(e(t))for(var n=v.virtualElements.childNodes(t),o=0,i=n.length;i>o;o++)v.removeNode(n[o]);else v.utils.emptyDomNode(t)},setDomNodeChildren:function(t,n){if(e(t)){v.virtualElements.emptyNode(t);for(var o=t.nextSibling,i=0,r=n.length;r>i;i++)o.parentNode.insertBefore(n[i],o)}else v.utils.setDomNodeChildren(t,n)},prepend:function(t,n){e(t)?t.parentNode.insertBefore(n,t.nextSibling):t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)},insertAfter:function(t,n,o){o?e(t)?t.parentNode.insertBefore(n,o.nextSibling):o.nextSibling?t.insertBefore(n,o.nextSibling):t.appendChild(n):v.virtualElements.prepend(t,n)},firstChild:function(n){return e(n)?!n.nextSibling||t(n.nextSibling)?null:n.nextSibling:n.firstChild},nextSibling:function(n){return e(n)&&(n=o(n)),n.nextSibling&&t(n.nextSibling)?null:n.nextSibling},hasBindingValue:e,virtualNodeBindingValue:function(e){var t=(r?e.text:e.nodeValue).match(a);return t?t[1]:null},normaliseVirtualElementDomStructure:function(e){if(u[v.utils.tagNameLower(e)]){var t=e.firstChild;if(t)do if(1===t.nodeType){var n=i(t);if(n)for(var o=t.nextSibling,r=0;r<n.length;r++)o?e.insertBefore(n[r],o):e.appendChild(n[r])}while(t=t.nextSibling)}}}}(),v.exportSymbol("virtualElements",v.virtualElements),v.exportSymbol("virtualElements.allowedBindings",v.virtualElements.allowedBindings),v.exportSymbol("virtualElements.emptyNode",v.virtualElements.emptyNode),v.exportSymbol("virtualElements.insertAfter",v.virtualElements.insertAfter),v.exportSymbol("virtualElements.prepend",v.virtualElements.prepend),v.exportSymbol("virtualElements.setDomNodeChildren",v.virtualElements.setDomNodeChildren),function(){function e(e,n,o){var i=e+(o&&o.valueAccessors||"");return n[i]||(n[i]=t(e,o))}function t(e,t){var n=v.expressionRewriting.preProcessBindings(e,t),o="with($context){with($data||{}){return{"+n+"}}}";return new Function("$context","$element",o)}var n="data-bind";v.bindingProvider=function(){this.bindingCache={}},v.utils.extend(v.bindingProvider.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return null!=e.getAttribute(n)||v.components.getComponentNameForNode(e);case 8:return v.virtualElements.hasBindingValue(e);default:return!1}},getBindings:function(e,t){var n=this.getBindingsString(e,t),o=n?this.parseBindingsString(n,t,e):null;return v.components.addBindingsForCustomElement(o,e,t,!1)},getBindingAccessors:function(e,t){var n=this.getBindingsString(e,t),o=n?this.parseBindingsString(n,t,e,{valueAccessors:!0}):null;return v.components.addBindingsForCustomElement(o,e,t,!0)},getBindingsString:function(e){switch(e.nodeType){case 1:return e.getAttribute(n);case 8:return v.virtualElements.virtualNodeBindingValue(e);default:return null}},parseBindingsString:function(t,n,o,i){try{var r=e(t,this.bindingCache,i);return r(n,o)}catch(s){throw s.message="Unable to parse bindings.\nBindings value: "+t+"\nMessage: "+s.message,s}}}),v.bindingProvider.instance=new v.bindingProvider}(),v.exportSymbol("bindingProvider",v.bindingProvider),function(){function e(e){return function(){return e}}function t(e){return e()}function n(e){return v.utils.objectMap(v.dependencyDetection.ignore(e),function(t,n){return function(){return e()[n]}})}function o(t,o,i){return"function"==typeof t?n(t.bind(null,o,i)):v.utils.objectMap(t,e)}function s(e,t){return n(this.getBindings.bind(this,e,t))}function a(e){var t=v.virtualElements.allowedBindings[e];if(!t)throw new Error("The binding '"+e+"' cannot be used with virtual elements")}function u(e,t,n){var o,i=v.virtualElements.firstChild(t),r=v.bindingProvider.instance,s=r.preprocessNode;if(s){for(;o=i;)i=v.virtualElements.nextSibling(o),s.call(r,o);i=v.virtualElements.firstChild(t)}for(;o=i;)i=v.virtualElements.nextSibling(o),c(e,o,n)}function c(e,t,n){var o=!0,i=1===t.nodeType;i&&v.virtualElements.normaliseVirtualElementDomStructure(t);var r=i&&n||v.bindingProvider.instance.nodeHasBindings(t);r&&(o=d(t,null,e,n).shouldBindDescendants),o&&!f[v.utils.tagNameLower(t)]&&u(e,t,!i)}function p(e){var t=[],n={},o=[];return v.utils.objectForEach(e,function i(r){if(!n[r]){var s=v.getBindingHandler(r);s&&(s.after&&(o.push(r),v.utils.arrayForEach(s.after,function(t){if(e[t]){if(-1!==v.utils.arrayIndexOf(o,t))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+o.join(", "));i(t)}}),o.length--),t.push({key:r,handler:s})),n[r]=!0}}),t}function d(e,n,o,r){function l(){return v.utils.objectMap(f?f():c,t)}var u=v.utils.domData.get(e,m);if(!n){if(u)throw Error("You cannot apply bindings multiple times to the same element.");v.utils.domData.set(e,m,!0)}!u&&r&&v.storedBindingContextForNode(e,o);var c;if(n&&"function"!=typeof n)c=n;else{var d=v.bindingProvider.instance,h=d.getBindingAccessors||s,f=v.dependentObservable(function(){return c=n?n(o,e):h.call(d,e,o),c&&o._subscribable&&o._subscribable(),c},null,{disposeWhenNodeIsRemoved:e});c&&f.isActive()||(f=null)}var g;if(c){var y=f?function(e){return function(){return t(f()[e])}}:function(e){return c[e]};l.get=function(e){return c[e]&&t(y(e))},l.has=function(e){return e in c};var b=p(c);v.utils.arrayForEach(b,function(t){var n=t.handler.init,r=t.handler.update,s=t.key;8===e.nodeType&&a(s);try{"function"==typeof n&&v.dependencyDetection.ignore(function(){var t=n(e,y(s),l,o.$data,o);if(t&&t.controlsDescendantBindings){if(g!==i)throw new Error("Multiple bindings ("+g+" and "+s+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");g=s}}),"function"==typeof r&&v.dependentObservable(function(){r(e,y(s),l,o.$data,o)},null,{disposeWhenNodeIsRemoved:e})}catch(u){throw u.message='Unable to process binding "'+s+": "+c[s]+'"\nMessage: '+u.message,u}})}return{shouldBindDescendants:g===i}}function h(e){return e&&e instanceof v.bindingContext?e:new v.bindingContext(e)}v.bindingHandlers={};var f={script:!0};v.getBindingHandler=function(e){return v.bindingHandlers[e]},v.bindingContext=function(e,t,n,o){function r(){var i=u?e():e,r=v.utils.unwrapObservable(i);return t?(t._subscribable&&t._subscribable(),v.utils.extend(l,t),c&&(l._subscribable=c)):(l.$parents=[],l.$root=r,l.ko=v),l.$rawData=i,l.$data=r,n&&(l[n]=r),o&&o(l,t,r),l.$data}function s(){return a&&!v.utils.anyDomNodeIsAttachedToDocument(a)}var a,l=this,u="function"==typeof e&&!v.isObservable(e),c=v.dependentObservable(r,null,{disposeWhen:s,disposeWhenNodeIsRemoved:!0});c.isActive()&&(l._subscribable=c,c.equalityComparer=null,a=[],c._addNode=function(e){a.push(e),v.utils.domNodeDisposal.addDisposeCallback(e,function(e){v.utils.arrayRemoveItem(a,e),a.length||(c.dispose(),l._subscribable=c=i)})})},v.bindingContext.prototype.createChildContext=function(e,t,n){return new v.bindingContext(e,this,t,function(e,t){e.$parentContext=t,e.$parent=t.$data,e.$parents=(t.$parents||[]).slice(0),e.$parents.unshift(e.$parent),n&&n(e)})},v.bindingContext.prototype.extend=function(e){return new v.bindingContext(this._subscribable||this.$data,this,null,function(t,n){t.$rawData=n.$rawData,v.utils.extend(t,"function"==typeof e?e():e)})};var m=v.utils.domData.nextKey(),g=v.utils.domData.nextKey();v.storedBindingContextForNode=function(e,t){return 2!=arguments.length?v.utils.domData.get(e,g):(v.utils.domData.set(e,g,t),void(t._subscribable&&t._subscribable._addNode(e)))},v.applyBindingAccessorsToNode=function(e,t,n){return 1===e.nodeType&&v.virtualElements.normaliseVirtualElementDomStructure(e),d(e,t,h(n),!0)},v.applyBindingsToNode=function(e,t,n){var i=h(n);return v.applyBindingAccessorsToNode(e,o(t,i,e),i)},v.applyBindingsToDescendants=function(e,t){(1===t.nodeType||8===t.nodeType)&&u(h(e),t,!0)},v.applyBindings=function(e,t){if(!l&&r.jQuery&&(l=r.jQuery),t&&1!==t.nodeType&&8!==t.nodeType)throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");t=t||r.document.body,c(h(e),t,!0)},v.contextFor=function(e){switch(e.nodeType){case 1:case 8:var t=v.storedBindingContextForNode(e);if(t)return t;if(e.parentNode)return v.contextFor(e.parentNode)
}return i},v.dataFor=function(e){var t=v.contextFor(e);return t?t.$data:i},v.exportSymbol("bindingHandlers",v.bindingHandlers),v.exportSymbol("applyBindings",v.applyBindings),v.exportSymbol("applyBindingsToDescendants",v.applyBindingsToDescendants),v.exportSymbol("applyBindingAccessorsToNode",v.applyBindingAccessorsToNode),v.exportSymbol("applyBindingsToNode",v.applyBindingsToNode),v.exportSymbol("contextFor",v.contextFor),v.exportSymbol("dataFor",v.dataFor)}(),function(e){function t(t,n){return t.hasOwnProperty(n)?t[n]:e}function n(e,n){var i,a=t(r,e);a||(a=r[e]=new v.subscribable,o(e,function(t){s[e]=t,delete r[e],i?a.notifySubscribers(t):setTimeout(function(){a.notifySubscribers(t)},0)}),i=!0),a.subscribe(n)}function o(e,t){i("getConfig",[e],function(n){n?i("loadComponent",[e,n],function(e){t(e)}):t(null)})}function i(t,n,o,r){r||(r=v.components.loaders.slice(0));var s=r.shift();if(s){var a=s[t];if(a){var l=!1,u=a.apply(s,n.concat(function(e){l?o(null):null!==e?o(e):i(t,n,o,r)}));if(u!==e&&(l=!0,!s.suppressLoaderExceptions))throw new Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else i(t,n,o,r)}else o(null)}var r={},s={};v.components={get:function(e,o){var i=t(s,e);i?setTimeout(function(){o(i)},0):n(e,o)},clearCachedDefinition:function(e){delete s[e]},_getFirstResultFromLoaders:i},v.components.loaders=[],v.exportSymbol("components",v.components),v.exportSymbol("components.get",v.components.get),v.exportSymbol("components.clearCachedDefinition",v.components.clearCachedDefinition)}(),function(){function e(e,t,n,o){var i={},r=2,s=function(){0===--r&&o(i)},a=n.template,l=n.viewModel;a?u(t,a,function(t){v.components._getFirstResultFromLoaders("loadTemplate",[e,t],function(e){i.template=e,s()})}):s(),l?u(t,l,function(t){v.components._getFirstResultFromLoaders("loadViewModel",[e,t],function(e){i[d]=e,s()})}):s()}function n(e,t,n){if("string"==typeof t)n(v.utils.parseHtmlFragment(t));else if(t instanceof Array)n(t);else if(l(t))n(v.utils.makeArray(t.childNodes));else if(t.element){var o=t.element;if(a(o))n(i(o));else if("string"==typeof o){var r=s.getElementById(o);r?n(i(r)):e("Cannot find element with ID "+o)}else e("Unknown element type: "+o)}else e("Unknown template value: "+t)}function o(e,t,n){if("function"==typeof t)n(function(e){return new t(e)});else if("function"==typeof t[d])n(t[d]);else if("instance"in t){var i=t.instance;n(function(){return i})}else"viewModel"in t?o(e,t.viewModel,n):e("Unknown viewModel value: "+t)}function i(e){switch(v.utils.tagNameLower(e)){case"script":return v.utils.parseHtmlFragment(e.text);case"textarea":return v.utils.parseHtmlFragment(e.value);case"template":if(l(e.content))return v.utils.cloneNodes(e.content.childNodes)}return v.utils.cloneNodes(e.childNodes)}function a(e){return r.HTMLElement?e instanceof HTMLElement:e&&e.tagName&&1===e.nodeType}function l(e){return r.DocumentFragment?e instanceof DocumentFragment:e&&11===e.nodeType}function u(e,n,o){"string"==typeof n.require?t||r.require?(t||r.require)([n.require],o):e("Uses require, but no AMD loader is present"):o(n)}function c(e){return function(t){throw new Error("Component '"+e+"': "+t)}}var p={};v.components.register=function(e,t){if(!t)throw new Error("Invalid configuration for "+e);if(v.components.isRegistered(e))throw new Error("Component "+e+" is already registered");p[e]=t},v.components.isRegistered=function(e){return e in p},v.components.unregister=function(e){delete p[e],v.components.clearCachedDefinition(e)},v.components.defaultLoader={getConfig:function(e,t){var n=p.hasOwnProperty(e)?p[e]:null;t(n)},loadComponent:function(t,n,o){var i=c(t);u(i,n,function(n){e(t,i,n,o)})},loadTemplate:function(e,t,o){n(c(e),t,o)},loadViewModel:function(e,t,n){o(c(e),t,n)}};var d="createViewModel";v.exportSymbol("components.register",v.components.register),v.exportSymbol("components.isRegistered",v.components.isRegistered),v.exportSymbol("components.unregister",v.components.unregister),v.exportSymbol("components.defaultLoader",v.components.defaultLoader),v.components.loaders.push(v.components.defaultLoader),v.components._allRegisteredComponents=p}(),function(){function e(e,n){var o=e.getAttribute("params");if(o){var i=t.parseBindingsString(o,n,e,{valueAccessors:!0,bindingParams:!0}),r=v.utils.objectMap(i,function(t){return v.computed(t,null,{disposeWhenNodeIsRemoved:e})}),s=v.utils.objectMap(r,function(t){return t.isActive()?v.computed(function(){return v.utils.unwrapObservable(t())},null,{disposeWhenNodeIsRemoved:e}):t.peek()});return s.hasOwnProperty("$raw")||(s.$raw=r),s}return{$raw:{}}}v.components.getComponentNameForNode=function(e){var t=v.utils.tagNameLower(e);return v.components.isRegistered(t)&&t},v.components.addBindingsForCustomElement=function(t,n,o,i){if(1===n.nodeType){var r=v.components.getComponentNameForNode(n);if(r){if(t=t||{},t.component)throw new Error('Cannot use the "component" binding on a custom element matching a component');var s={name:r,params:e(n,o)};t.component=i?function(){return s}:s}}return t};var t=new v.bindingProvider;v.utils.ieVersion<9&&(v.components.register=function(e){return function(t){return s.createElement(t),e.apply(this,arguments)}}(v.components.register),s.createDocumentFragment=function(e){return function(){var t=e(),n=v.components._allRegisteredComponents;for(var o in n)n.hasOwnProperty(o)&&t.createElement(o);return t}}(s.createDocumentFragment))}(),function(){function e(e,t,n){var o=t.template;if(!o)throw new Error("Component '"+e+"' has no template");var i=v.utils.cloneNodes(o);v.virtualElements.setDomNodeChildren(n,i)}function t(e,t,n){var o=e.createViewModel;return o?o.call(e,n,{element:t}):n}var n=0;v.bindingHandlers.component={init:function(o,i,r,s,a){var l,u,c=function(){var e=l&&l.dispose;"function"==typeof e&&e.call(l),u=null};return v.utils.domNodeDisposal.addDisposeCallback(o,c),v.computed(function(){var r,s,p=v.utils.unwrapObservable(i());if("string"==typeof p?r=p:(r=v.utils.unwrapObservable(p.name),s=v.utils.unwrapObservable(p.params)),!r)throw new Error("No component name specified");var d=u=++n;v.components.get(r,function(n){if(u===d){if(c(),!n)throw new Error("Unknown component '"+r+"'");e(r,n,o);var i=t(n,o,s),p=a.createChildContext(i);l=i,v.applyBindingsToDescendants(p,o)}})},null,{disposeWhenNodeIsRemoved:o}),{controlsDescendantBindings:!0}}},v.virtualElements.allowedBindings.component=!0}();var w={"class":"className","for":"htmlFor"};v.bindingHandlers.attr={update:function(e,t){var n=v.utils.unwrapObservable(t())||{};v.utils.objectForEach(n,function(t,n){n=v.utils.unwrapObservable(n);var o=n===!1||null===n||n===i;o&&e.removeAttribute(t),v.utils.ieVersion<=8&&t in w?(t=w[t],o?e.removeAttribute(t):e[t]=n):o||e.setAttribute(t,n.toString()),"name"===t&&v.utils.setElementName(e,o?"":n.toString())})}},function(){v.bindingHandlers.checked={after:["value","attr"],init:function(e,t,n){function o(){var o=e.checked,i=p?s():o;if(!v.computedContext.isInitial()&&(!l||o)){var r=v.dependencyDetection.ignore(t);u?c!==i?(o&&(v.utils.addOrRemoveItem(r,i,!0),v.utils.addOrRemoveItem(r,c,!1)),c=i):v.utils.addOrRemoveItem(r,i,o):v.expressionRewriting.writeValueToProperty(r,n,"checked",i,!0)}}function r(){var n=v.utils.unwrapObservable(t());e.checked=u?v.utils.arrayIndexOf(n,s())>=0:a?n:s()===n}var s=v.pureComputed(function(){return n.has("checkedValue")?v.utils.unwrapObservable(n.get("checkedValue")):n.has("value")?v.utils.unwrapObservable(n.get("value")):e.value}),a="checkbox"==e.type,l="radio"==e.type;if(a||l){var u=a&&v.utils.unwrapObservable(t())instanceof Array,c=u?s():i,p=l||u;l&&!e.name&&v.bindingHandlers.uniqueName.init(e,function(){return!0}),v.computed(o,null,{disposeWhenNodeIsRemoved:e}),v.utils.registerEventHandler(e,"click",o),v.computed(r,null,{disposeWhenNodeIsRemoved:e})}}},v.expressionRewriting.twoWayBindings.checked=!0,v.bindingHandlers.checkedValue={update:function(e,t){e.value=v.utils.unwrapObservable(t())}}}();var x="__ko__cssValue";v.bindingHandlers.css={update:function(e,t){var n=v.utils.unwrapObservable(t());"object"==typeof n?v.utils.objectForEach(n,function(t,n){n=v.utils.unwrapObservable(n),v.utils.toggleDomNodeCssClass(e,t,n)}):(n=String(n||""),v.utils.toggleDomNodeCssClass(e,e[x],!1),e[x]=n,v.utils.toggleDomNodeCssClass(e,n,!0))}},v.bindingHandlers.enable={update:function(e,t){var n=v.utils.unwrapObservable(t());n&&e.disabled?e.removeAttribute("disabled"):n||e.disabled||(e.disabled=!0)}},v.bindingHandlers.disable={update:function(e,t){v.bindingHandlers.enable.update(e,function(){return!v.utils.unwrapObservable(t())})}},v.bindingHandlers.event={init:function(e,t,n,o,i){var r=t()||{};v.utils.objectForEach(r,function(r){"string"==typeof r&&v.utils.registerEventHandler(e,r,function(e){var s,a=t()[r];if(a){try{var l=v.utils.makeArray(arguments);o=i.$data,l.unshift(o),s=a.apply(o,l)}finally{s!==!0&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}var u=n.get(r+"Bubble")!==!1;u||(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())}})})}},v.bindingHandlers.foreach={makeTemplateValueAccessor:function(e){return function(){var t=e(),n=v.utils.peekObservable(t);return n&&"number"!=typeof n.length?(v.utils.unwrapObservable(t),{foreach:n.data,as:n.as,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:v.nativeTemplateEngine.instance}):{foreach:t,templateEngine:v.nativeTemplateEngine.instance}}},init:function(e,t){return v.bindingHandlers.template.init(e,v.bindingHandlers.foreach.makeTemplateValueAccessor(t))},update:function(e,t,n,o,i){return v.bindingHandlers.template.update(e,v.bindingHandlers.foreach.makeTemplateValueAccessor(t),n,o,i)}},v.expressionRewriting.bindingRewriteValidators.foreach=!1,v.virtualElements.allowedBindings.foreach=!0;var A="__ko_hasfocusUpdating",S="__ko_hasfocusLastValue";v.bindingHandlers.hasfocus={init:function(e,t,n){var o=function(o){e[A]=!0;var i=e.ownerDocument;if("activeElement"in i){var r;try{r=i.activeElement}catch(s){r=i.body}o=r===e}var a=t();v.expressionRewriting.writeValueToProperty(a,n,"hasfocus",o,!0),e[S]=o,e[A]=!1},i=o.bind(null,!0),r=o.bind(null,!1);v.utils.registerEventHandler(e,"focus",i),v.utils.registerEventHandler(e,"focusin",i),v.utils.registerEventHandler(e,"blur",r),v.utils.registerEventHandler(e,"focusout",r)},update:function(e,t){var n=!!v.utils.unwrapObservable(t());e[A]||e[S]===n||(n?e.focus():e.blur(),v.dependencyDetection.ignore(v.utils.triggerEvent,null,[e,n?"focusin":"focusout"]))}},v.expressionRewriting.twoWayBindings.hasfocus=!0,v.bindingHandlers.hasFocus=v.bindingHandlers.hasfocus,v.expressionRewriting.twoWayBindings.hasFocus=!0,v.bindingHandlers.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){v.utils.setHtml(e,t())}},f("if"),f("ifnot",!1,!0),f("with",!0,!1,function(e,t){return e.createChildContext(t)});var k={};v.bindingHandlers.options={init:function(e){if("select"!==v.utils.tagNameLower(e))throw new Error("options binding applies only to SELECT elements");for(;e.length>0;)e.remove(0);return{controlsDescendantBindings:!0}},update:function(e,t,n){function o(){return v.utils.arrayFilter(e.options,function(e){return e.selected})}function r(e,t,n){var o=typeof t;return"function"==o?t(e):"string"==o?e[t]:n}function s(t,o,s){s.length&&(c=s[0].selected?[v.selectExtensions.readValue(s[0])]:[],g=!0);var a=e.ownerDocument.createElement("option");if(t===k)v.utils.setTextContent(a,n.get("optionsCaption")),v.selectExtensions.writeValue(a,i);else{var l=r(t,n.get("optionsValue"),t);v.selectExtensions.writeValue(a,v.utils.unwrapObservable(l));var u=r(t,n.get("optionsText"),l);v.utils.setTextContent(a,u)}return[a]}function a(t,n){if(c.length){var o=v.utils.arrayIndexOf(c,v.selectExtensions.readValue(n[0]))>=0;v.utils.setOptionNodeSelectionState(n[0],o),g&&!o&&v.dependencyDetection.ignore(v.utils.triggerEvent,null,[e,"change"])}}var l,u,c,p=0==e.length,d=!p&&e.multiple?e.scrollTop:null,h=v.utils.unwrapObservable(t()),f=n.get("optionsIncludeDestroyed"),m={};c=e.multiple?v.utils.arrayMap(o(),v.selectExtensions.readValue):e.selectedIndex>=0?[v.selectExtensions.readValue(e.options[e.selectedIndex])]:[],h&&("undefined"==typeof h.length&&(h=[h]),u=v.utils.arrayFilter(h,function(e){return f||e===i||null===e||!v.utils.unwrapObservable(e._destroy)}),n.has("optionsCaption")&&(l=v.utils.unwrapObservable(n.get("optionsCaption")),null!==l&&l!==i&&u.unshift(k)));var g=!1;m.beforeRemove=function(t){e.removeChild(t)};var y=a;n.has("optionsAfterRender")&&(y=function(e,t){a(e,t),v.dependencyDetection.ignore(n.get("optionsAfterRender"),null,[t[0],e!==k?e:i])}),v.utils.setDomNodeChildrenFromArrayMapping(e,u,s,m,y),v.dependencyDetection.ignore(function(){if(n.get("valueAllowUnset")&&n.has("value"))v.selectExtensions.writeValue(e,v.utils.unwrapObservable(n.get("value")),!0);else{var t;t=e.multiple?c.length&&o().length<c.length:c.length&&e.selectedIndex>=0?v.selectExtensions.readValue(e.options[e.selectedIndex])!==c[0]:c.length||e.selectedIndex>=0,t&&v.utils.triggerEvent(e,"change")}}),v.utils.ensureSelectElementIsRenderedCorrectly(e),d&&Math.abs(d-e.scrollTop)>20&&(e.scrollTop=d)}},v.bindingHandlers.options.optionValueDomDataKey=v.utils.domData.nextKey(),v.bindingHandlers.selectedOptions={after:["options","foreach"],init:function(e,t,n){v.utils.registerEventHandler(e,"change",function(){var o=t(),i=[];v.utils.arrayForEach(e.getElementsByTagName("option"),function(e){e.selected&&i.push(v.selectExtensions.readValue(e))}),v.expressionRewriting.writeValueToProperty(o,n,"selectedOptions",i)})},update:function(e,t){if("select"!=v.utils.tagNameLower(e))throw new Error("values binding applies only to SELECT elements");var n=v.utils.unwrapObservable(t());n&&"number"==typeof n.length&&v.utils.arrayForEach(e.getElementsByTagName("option"),function(e){var t=v.utils.arrayIndexOf(n,v.selectExtensions.readValue(e))>=0;v.utils.setOptionNodeSelectionState(e,t)})}},v.expressionRewriting.twoWayBindings.selectedOptions=!0,v.bindingHandlers.style={update:function(e,t){var n=v.utils.unwrapObservable(t()||{});v.utils.objectForEach(n,function(t,n){n=v.utils.unwrapObservable(n),(null===n||n===i||n===!1)&&(n=""),e.style[t]=n})}},v.bindingHandlers.submit={init:function(e,t,n,o,i){if("function"!=typeof t())throw new Error("The value for a submit binding must be a function");v.utils.registerEventHandler(e,"submit",function(n){var o,r=t();try{o=r.call(i.$data,e)}finally{o!==!0&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}})}},v.bindingHandlers.text={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){v.utils.setTextContent(e,t())}},v.virtualElements.allowedBindings.text=!0,function(){if(r&&r.navigator)var e=function(e){return e?parseFloat(e[1]):void 0},t=r.opera&&r.opera.version&&parseInt(r.opera.version()),n=r.navigator.userAgent,s=e(n.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),a=e(n.match(/Firefox\/([^ ]*)/));if(v.utils.ieVersion<10)var l=v.utils.domData.nextKey(),u=v.utils.domData.nextKey(),c=function(e){var t=this.activeElement,n=t&&v.utils.domData.get(t,u);n&&n(e)},p=function(e,t){var n=e.ownerDocument;v.utils.domData.get(n,l)||(v.utils.domData.set(n,l,!0),v.utils.registerEventHandler(n,"selectionchange",c)),v.utils.domData.set(e,u,t)};v.bindingHandlers.textInput={init:function(e,n,r){var l,u,c=e.value,d=function(t){clearTimeout(l),u=l=i;var s=e.value;c!==s&&(o&&t&&(e._ko_textInputProcessedEvent=t.type),c=s,v.expressionRewriting.writeValueToProperty(n(),r,"textInput",s))},h=function(t){if(!l){u=e.value;var n=o?d.bind(e,{type:t.type}):d;l=setTimeout(n,4)}},f=function(){var t=v.utils.unwrapObservable(n());return(null===t||t===i)&&(t=""),u!==i&&t===u?void setTimeout(f,4):void(e.value!==t&&(c=t,e.value=t))},m=function(t,n){v.utils.registerEventHandler(e,t,n)};o&&v.bindingHandlers.textInput._forceUpdateOn?v.utils.arrayForEach(v.bindingHandlers.textInput._forceUpdateOn,function(e){"after"==e.slice(0,5)?m(e.slice(5),h):m(e,d)}):v.utils.ieVersion<10?(m("propertychange",function(e){"value"===e.propertyName&&d(e)}),8==v.utils.ieVersion&&(m("keyup",d),m("keydown",d)),v.utils.ieVersion>=8&&(p(e,d),m("dragend",h))):(m("input",d),5>s&&"textarea"===v.utils.tagNameLower(e)?(m("keydown",h),m("paste",h),m("cut",h)):11>t?m("keydown",h):4>a&&(m("DOMAutoComplete",d),m("dragdrop",d),m("drop",d))),m("change",d),v.computed(f,null,{disposeWhenNodeIsRemoved:e})}},v.expressionRewriting.twoWayBindings.textInput=!0,v.bindingHandlers.textinput={preprocess:function(e,t,n){n("textInput",e)}}}(),v.bindingHandlers.uniqueName={init:function(e,t){if(t()){var n="ko_unique_"+ ++v.bindingHandlers.uniqueName.currentIndex;v.utils.setElementName(e,n)}}},v.bindingHandlers.uniqueName.currentIndex=0,v.bindingHandlers.value={after:["options","foreach"],init:function(e,t,n){if("input"==e.tagName.toLowerCase()&&("checkbox"==e.type||"radio"==e.type))return void v.applyBindingAccessorsToNode(e,{checkedValue:t});var o=["change"],i=n.get("valueUpdate"),r=!1,s=null;i&&("string"==typeof i&&(i=[i]),v.utils.arrayPushAll(o,i),o=v.utils.arrayGetDistinctValues(o));var a=function(){s=null,r=!1;var o=t(),i=v.selectExtensions.readValue(e);v.expressionRewriting.writeValueToProperty(o,n,"value",i)},l=v.utils.ieVersion&&"input"==e.tagName.toLowerCase()&&"text"==e.type&&"off"!=e.autocomplete&&(!e.form||"off"!=e.form.autocomplete);l&&-1==v.utils.arrayIndexOf(o,"propertychange")&&(v.utils.registerEventHandler(e,"propertychange",function(){r=!0}),v.utils.registerEventHandler(e,"focus",function(){r=!1}),v.utils.registerEventHandler(e,"blur",function(){r&&a()})),v.utils.arrayForEach(o,function(t){var n=a;v.utils.stringStartsWith(t,"after")&&(n=function(){s=v.selectExtensions.readValue(e),setTimeout(a,0)},t=t.substring("after".length)),v.utils.registerEventHandler(e,t,n)});var u=function(){var o=v.utils.unwrapObservable(t()),i=v.selectExtensions.readValue(e);if(null!==s&&o===s)return void setTimeout(u,0);var r=o!==i;if(r)if("select"===v.utils.tagNameLower(e)){var a=n.get("valueAllowUnset"),l=function(){v.selectExtensions.writeValue(e,o,a)};l(),a||o===v.selectExtensions.readValue(e)?setTimeout(l,0):v.dependencyDetection.ignore(v.utils.triggerEvent,null,[e,"change"])}else v.selectExtensions.writeValue(e,o)};v.computed(u,null,{disposeWhenNodeIsRemoved:e})},update:function(){}},v.expressionRewriting.twoWayBindings.value=!0,v.bindingHandlers.visible={update:function(e,t){var n=v.utils.unwrapObservable(t()),o=!("none"==e.style.display);n&&!o?e.style.display="":!n&&o&&(e.style.display="none")}},h("click"),v.templateEngine=function(){},v.templateEngine.prototype.renderTemplateSource=function(){throw new Error("Override renderTemplateSource")},v.templateEngine.prototype.createJavaScriptEvaluatorBlock=function(){throw new Error("Override createJavaScriptEvaluatorBlock")},v.templateEngine.prototype.makeTemplateSource=function(e,t){if("string"==typeof e){t=t||s;var n=t.getElementById(e);if(!n)throw new Error("Cannot find template with ID "+e);return new v.templateSources.domElement(n)}if(1==e.nodeType||8==e.nodeType)return new v.templateSources.anonymousTemplate(e);throw new Error("Unknown template type: "+e)},v.templateEngine.prototype.renderTemplate=function(e,t,n,o){var i=this.makeTemplateSource(e,o);return this.renderTemplateSource(i,t,n)},v.templateEngine.prototype.isTemplateRewritten=function(e,t){return this.allowTemplateRewriting===!1?!0:this.makeTemplateSource(e,t).data("isRewritten")},v.templateEngine.prototype.rewriteTemplate=function(e,t,n){var o=this.makeTemplateSource(e,n),i=t(o.text());o.text(i),o.data("isRewritten",!0)},v.exportSymbol("templateEngine",v.templateEngine),v.templateRewriting=function(){function e(e){for(var t=v.expressionRewriting.bindingRewriteValidators,n=0;n<e.length;n++){var o=e[n].key;if(t.hasOwnProperty(o)){var i=t[o];if("function"==typeof i){var r=i(e[n].value);if(r)throw new Error(r)}else if(!i)throw new Error("This template engine does not support the '"+o+"' binding within its templates")}}}function t(t,n,o,i){var r=v.expressionRewriting.parseObjectLiteral(t);e(r);var s=v.expressionRewriting.preProcessBindings(r,{valueAccessors:!0}),a="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+s+" } })()},'"+o.toLowerCase()+"')";return i.createJavaScriptEvaluatorBlock(a)+n}var n=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,o=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;return{ensureTemplateIsRewritten:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,function(e){return v.templateRewriting.memoizeBindingAttributeSyntax(e,t)},n)},memoizeBindingAttributeSyntax:function(e,i){return e.replace(n,function(){return t(arguments[4],arguments[1],arguments[2],i)}).replace(o,function(){return t(arguments[1],"<!-- ko -->","#comment",i)})},applyMemoizedBindingsToNextSibling:function(e,t){return v.memoization.memoize(function(n,o){var i=n.nextSibling;i&&i.nodeName.toLowerCase()===t&&v.applyBindingAccessorsToNode(i,e,o)})}}}(),v.exportSymbol("__tr_ambtns",v.templateRewriting.applyMemoizedBindingsToNextSibling),function(){v.templateSources={},v.templateSources.domElement=function(e){this.domElement=e},v.templateSources.domElement.prototype.text=function(){var e=v.utils.tagNameLower(this.domElement),t="script"===e?"text":"textarea"===e?"value":"innerHTML";if(0==arguments.length)return this.domElement[t];var n=arguments[0];"innerHTML"===t?v.utils.setHtml(this.domElement,n):this.domElement[t]=n};var e=v.utils.domData.nextKey()+"_";v.templateSources.domElement.prototype.data=function(t){return 1===arguments.length?v.utils.domData.get(this.domElement,e+t):void v.utils.domData.set(this.domElement,e+t,arguments[1])};var t=v.utils.domData.nextKey();v.templateSources.anonymousTemplate=function(e){this.domElement=e},v.templateSources.anonymousTemplate.prototype=new v.templateSources.domElement,v.templateSources.anonymousTemplate.prototype.constructor=v.templateSources.anonymousTemplate,v.templateSources.anonymousTemplate.prototype.text=function(){if(0==arguments.length){var e=v.utils.domData.get(this.domElement,t)||{};return e.textData===i&&e.containerData&&(e.textData=e.containerData.innerHTML),e.textData}var n=arguments[0];v.utils.domData.set(this.domElement,t,{textData:n})},v.templateSources.domElement.prototype.nodes=function(){if(0==arguments.length){var e=v.utils.domData.get(this.domElement,t)||{};return e.containerData}var n=arguments[0];v.utils.domData.set(this.domElement,t,{containerData:n})},v.exportSymbol("templateSources",v.templateSources),v.exportSymbol("templateSources.domElement",v.templateSources.domElement),v.exportSymbol("templateSources.anonymousTemplate",v.templateSources.anonymousTemplate)}(),function(){function e(e,t,n){for(var o,i=e,r=v.virtualElements.nextSibling(t);i&&(o=i)!==r;)i=v.virtualElements.nextSibling(o),n(o,i)}function t(t,n){if(t.length){var o=t[0],i=t[t.length-1],r=o.parentNode,s=v.bindingProvider.instance,a=s.preprocessNode;if(a){if(e(o,i,function(e,t){var n=e.previousSibling,r=a.call(s,e);r&&(e===o&&(o=r[0]||t),e===i&&(i=r[r.length-1]||n))}),t.length=0,!o)return;o===i?t.push(o):(t.push(o,i),v.utils.fixUpContinuousNodeArray(t,r))}e(o,i,function(e){(1===e.nodeType||8===e.nodeType)&&v.applyBindings(n,e)}),e(o,i,function(e){(1===e.nodeType||8===e.nodeType)&&v.memoization.unmemoizeDomNodeAndDescendants(e,[n])}),v.utils.fixUpContinuousNodeArray(t,r)}}function n(e){return e.nodeType?e:e.length>0?e[0]:null}function o(e,o,i,r,s){s=s||{};var l=e&&n(e),u=l&&l.ownerDocument,c=s.templateEngine||a;v.templateRewriting.ensureTemplateIsRewritten(i,c,u);var p=c.renderTemplate(i,r,s,u);if("number"!=typeof p.length||p.length>0&&"number"!=typeof p[0].nodeType)throw new Error("Template engine must return an array of DOM nodes");var d=!1;switch(o){case"replaceChildren":v.virtualElements.setDomNodeChildren(e,p),d=!0;break;case"replaceNode":v.utils.replaceDomNodes(e,p),d=!0;break;case"ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+o)}return d&&(t(p,r),s.afterRender&&v.dependencyDetection.ignore(s.afterRender,null,[p,r.$data])),p}function r(e,t,n){return v.isObservable(e)?e():"function"==typeof e?e(t,n):e}function s(e,t){var n=v.utils.domData.get(e,l);n&&"function"==typeof n.dispose&&n.dispose(),v.utils.domData.set(e,l,t&&t.isActive()?t:i)}var a;v.setTemplateEngine=function(e){if(e!=i&&!(e instanceof v.templateEngine))throw new Error("templateEngine must inherit from ko.templateEngine");a=e},v.renderTemplate=function(e,t,s,l,u){if(s=s||{},(s.templateEngine||a)==i)throw new Error("Set a template engine before calling renderTemplate");if(u=u||"replaceChildren",l){var c=n(l),p=function(){return!c||!v.utils.domNodeIsAttachedToDocument(c)},d=c&&"replaceNode"==u?c.parentNode:c;return v.dependentObservable(function(){var i=t&&t instanceof v.bindingContext?t:new v.bindingContext(v.utils.unwrapObservable(t)),a=r(e,i.$data,i),p=o(l,u,a,i,s);"replaceNode"==u&&(l=p,c=n(l))},null,{disposeWhen:p,disposeWhenNodeIsRemoved:d})}return v.memoization.memoize(function(n){v.renderTemplate(e,t,s,n,"replaceNode")})},v.renderTemplateForEach=function(e,n,s,a,l){var u,c=function(t,n){u=l.createChildContext(t,s.as,function(e){e.$index=n});var i=r(e,t,u);return o(null,"ignoreTargetNode",i,u,s)},p=function(e,n){t(n,u),s.afterRender&&s.afterRender(n,e)};return v.dependentObservable(function(){var e=v.utils.unwrapObservable(n)||[];"undefined"==typeof e.length&&(e=[e]);var t=v.utils.arrayFilter(e,function(e){return s.includeDestroyed||e===i||null===e||!v.utils.unwrapObservable(e._destroy)});v.dependencyDetection.ignore(v.utils.setDomNodeChildrenFromArrayMapping,null,[a,t,c,s,p])},null,{disposeWhenNodeIsRemoved:a})};var l=v.utils.domData.nextKey();v.bindingHandlers.template={init:function(e,t){var n=v.utils.unwrapObservable(t());if("string"==typeof n||n.name)v.virtualElements.emptyNode(e);else{var o=v.virtualElements.childNodes(e),i=v.utils.moveCleanedNodesToContainerElement(o);new v.templateSources.anonymousTemplate(e).nodes(i)}return{controlsDescendantBindings:!0}},update:function(e,t,n,o,i){var r,a,l=t(),u=v.utils.unwrapObservable(l),c=!0,p=null;if("string"==typeof u?(a=l,u={}):(a=u.name,"if"in u&&(c=v.utils.unwrapObservable(u["if"])),c&&"ifnot"in u&&(c=!v.utils.unwrapObservable(u.ifnot)),r=v.utils.unwrapObservable(u.data)),"foreach"in u){var d=c&&u.foreach||[];p=v.renderTemplateForEach(a||e,d,u,e,i)}else if(c){var h="data"in u?i.createChildContext(r,u.as):i;p=v.renderTemplate(a||e,h,u,e)}else v.virtualElements.emptyNode(e);s(e,p)}},v.expressionRewriting.bindingRewriteValidators.template=function(e){var t=v.expressionRewriting.parseObjectLiteral(e);return 1==t.length&&t[0].unknown?null:v.expressionRewriting.keyValueArrayContainsKey(t,"name")?null:"This template engine does not support anonymous templates nested within its templates"},v.virtualElements.allowedBindings.template=!0}(),v.exportSymbol("setTemplateEngine",v.setTemplateEngine),v.exportSymbol("renderTemplate",v.renderTemplate),v.utils.findMovesInArrayComparison=function(e,t,n){if(e.length&&t.length){var o,i,r,s,a;for(o=i=0;(!n||n>o)&&(s=e[i]);++i){for(r=0;a=t[r];++r)if(s.value===a.value){s.moved=a.index,a.moved=s.index,t.splice(r,1),o=r=0;break}o+=r}}},v.utils.compareArrays=function(){function e(e,i,r){return r="boolean"==typeof r?{dontLimitMoves:r}:r||{},e=e||[],i=i||[],e.length<=i.length?t(e,i,n,o,r):t(i,e,o,n,r)}function t(e,t,n,o,i){var r,s,a,l,u,c,p=Math.min,d=Math.max,h=[],f=e.length,m=t.length,g=m-f||1,y=f+m+1;for(r=0;f>=r;r++)for(l=a,h.push(a=[]),u=p(m,r+g),c=d(0,r-1),s=c;u>=s;s++)if(s)if(r)if(e[r-1]===t[s-1])a[s]=l[s-1];else{var b=l[s]||y,j=a[s-1]||y;a[s]=p(b,j)+1}else a[s]=s+1;else a[s]=r+1;var E,w=[],x=[],A=[];for(r=f,s=m;r||s;)E=h[r][s]-1,s&&E===h[r][s-1]?x.push(w[w.length]={status:n,value:t[--s],index:s}):r&&E===h[r-1][s]?A.push(w[w.length]={status:o,value:e[--r],index:r}):(--s,--r,i.sparse||w.push({status:"retained",value:t[s]}));return v.utils.findMovesInArrayComparison(x,A,10*f),w.reverse()}var n="added",o="deleted";return e}(),v.exportSymbol("utils.compareArrays",v.utils.compareArrays),function(){function e(e,t,n,o,r){var s=[],a=v.dependentObservable(function(){var i=t(n,r,v.utils.fixUpContinuousNodeArray(s,e))||[];s.length>0&&(v.utils.replaceDomNodes(s,i),o&&v.dependencyDetection.ignore(o,null,[n,i,r])),s.length=0,v.utils.arrayPushAll(s,i)},null,{disposeWhenNodeIsRemoved:e,disposeWhen:function(){return!v.utils.anyDomNodeIsAttachedToDocument(s)}});return{mappedNodes:s,dependentObservable:a.isActive()?a:i}}var t=v.utils.domData.nextKey();v.utils.setDomNodeChildrenFromArrayMapping=function(n,o,r,s,a){function l(e,t){c=f[t],j!==t&&(A[e]=c),c.indexObservable(j++),v.utils.fixUpContinuousNodeArray(c.mappedNodes,n),y.push(c),w.push(c)}function u(e,t){if(e)for(var n=0,o=t.length;o>n;n++)t[n]&&v.utils.arrayForEach(t[n].mappedNodes,function(o){e(o,n,t[n].arrayEntry)})}o=o||[],s=s||{};for(var c,p,d,h=v.utils.domData.get(n,t)===i,f=v.utils.domData.get(n,t)||[],m=v.utils.arrayMap(f,function(e){return e.arrayEntry}),g=v.utils.compareArrays(m,o,s.dontLimitMoves),y=[],b=0,j=0,E=[],w=[],x=[],A=[],S=[],k=0;p=g[k];k++)switch(d=p.moved,p.status){case"deleted":d===i&&(c=f[b],c.dependentObservable&&c.dependentObservable.dispose(),E.push.apply(E,v.utils.fixUpContinuousNodeArray(c.mappedNodes,n)),s.beforeRemove&&(x[k]=c,w.push(c))),b++;break;case"retained":l(k,b++);break;case"added":d!==i?l(k,d):(c={arrayEntry:p.value,indexObservable:v.observable(j++)},y.push(c),w.push(c),h||(S[k]=c))}u(s.beforeMove,A),v.utils.arrayForEach(E,s.beforeRemove?v.cleanNode:v.removeNode);for(var C,B,k=0,_=v.virtualElements.firstChild(n);c=w[k];k++){c.mappedNodes||v.utils.extend(c,e(n,r,c.arrayEntry,a,c.indexObservable));for(var U=0;B=c.mappedNodes[U];_=B.nextSibling,C=B,U++)B!==_&&v.virtualElements.insertAfter(n,B,C);!c.initialized&&a&&(a(c.arrayEntry,c.mappedNodes,c.indexObservable),c.initialized=!0)}u(s.beforeRemove,x),u(s.afterMove,A),u(s.afterAdd,S),v.utils.domData.set(n,t,y)}}(),v.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",v.utils.setDomNodeChildrenFromArrayMapping),v.nativeTemplateEngine=function(){this.allowTemplateRewriting=!1},v.nativeTemplateEngine.prototype=new v.templateEngine,v.nativeTemplateEngine.prototype.constructor=v.nativeTemplateEngine,v.nativeTemplateEngine.prototype.renderTemplateSource=function(e){var t=!(v.utils.ieVersion<9),n=t?e.nodes:null,o=n?e.nodes():null;if(o)return v.utils.makeArray(o.cloneNode(!0).childNodes);var i=e.text();return v.utils.parseHtmlFragment(i)},v.nativeTemplateEngine.instance=new v.nativeTemplateEngine,v.setTemplateEngine(v.nativeTemplateEngine.instance),v.exportSymbol("nativeTemplateEngine",v.nativeTemplateEngine),function(){v.jqueryTmplTemplateEngine=function(){function e(){if(2>n)throw new Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.")}function t(e,t,n){return l.tmpl(e,t,n)}var n=this.jQueryTmplVersion=function(){if(!l||!l.tmpl)return 0;try{if(l.tmpl.tag.tmpl.open.toString().indexOf("__")>=0)return 2}catch(e){}return 1}();this.renderTemplateSource=function(n,o,i){i=i||{},e();var r=n.data("precompiled");if(!r){var a=n.text()||"";a="{{ko_with $item.koBindingContext}}"+a+"{{/ko_with}}",r=l.template(null,a),n.data("precompiled",r)}var u=[o.$data],c=l.extend({koBindingContext:o},i.templateOptions),p=t(r,u,c);return p.appendTo(s.createElement("div")),l.fragments={},p},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){s.write("<script type='text/html' id='"+e+"'>"+t+"</script>")},n>0&&(l.tmpl.tag.ko_code={open:"__.push($1 || '');"},l.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},v.jqueryTmplTemplateEngine.prototype=new v.templateEngine,v.jqueryTmplTemplateEngine.prototype.constructor=v.jqueryTmplTemplateEngine;var e=new v.jqueryTmplTemplateEngine;e.jQueryTmplVersion>0&&v.setTemplateEngine(e),v.exportSymbol("jqueryTmplTemplateEngine",v.jqueryTmplTemplateEngine)
}()})}()}()},{}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/node_modules/poly-decomp/src/Line.js":[function(e,t){function n(){}var o=e("./Scalar");t.exports=n,n.lineInt=function(e,t,n){n=n||0;var i,r,s,a,l,u,c,p=[0,0];return i=e[1][1]-e[0][1],r=e[0][0]-e[1][0],s=i*e[0][0]+r*e[0][1],a=t[1][1]-t[0][1],l=t[0][0]-t[1][0],u=a*t[0][0]+l*t[0][1],c=i*l-a*r,o.eq(c,0,n)||(p[0]=(l*s-r*u)/c,p[1]=(i*u-a*s)/c),p},n.segmentsIntersect=function(e,t,n,o){var i=t[0]-e[0],r=t[1]-e[1],s=o[0]-n[0],a=o[1]-n[1];if(s*r-a*i==0)return!1;var l=(i*(n[1]-e[1])+r*(e[0]-n[0]))/(s*r-a*i),u=(s*(e[1]-n[1])+a*(n[0]-e[0]))/(a*i-s*r);return l>=0&&1>=l&&u>=0&&1>=u}},{"./Scalar":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/node_modules/poly-decomp/src/Scalar.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/node_modules/poly-decomp/src/Point.js":[function(e,t){function n(){}t.exports=n,n.area=function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])},n.left=function(e,t,o){return n.area(e,t,o)>0},n.leftOn=function(e,t,o){return n.area(e,t,o)>=0},n.right=function(e,t,o){return n.area(e,t,o)<0},n.rightOn=function(e,t,o){return n.area(e,t,o)<=0};var o=[],i=[];n.collinear=function(e,t,r,s){if(s){var a=o,l=i;a[0]=t[0]-e[0],a[1]=t[1]-e[1],l[0]=r[0]-t[0],l[1]=r[1]-t[1];var u=a[0]*l[0]+a[1]*l[1],c=Math.sqrt(a[0]*a[0]+a[1]*a[1]),p=Math.sqrt(l[0]*l[0]+l[1]*l[1]),d=Math.acos(u/(c*p));return s>d}return 0==n.area(e,t,r)},n.sqdist=function(e,t){var n=t[0]-e[0],o=t[1]-e[1];return n*n+o*o}},{}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/node_modules/poly-decomp/src/Polygon.js":[function(e,t){function n(){this.vertices=[]}function o(e,t,n,o,i){i=i||0;var r=t[1]-e[1],a=e[0]-t[0],l=r*e[0]+a*e[1],u=o[1]-n[1],c=n[0]-o[0],p=u*n[0]+c*n[1],d=r*c-u*a;return s.eq(d,0,i)?[0,0]:[(c*l-a*p)/d,(r*p-u*l)/d]}var i=e("./Line"),r=e("./Point"),s=e("./Scalar");t.exports=n,n.prototype.at=function(e){var t=this.vertices,n=t.length;return t[0>e?e%n+n:e%n]},n.prototype.first=function(){return this.vertices[0]},n.prototype.last=function(){return this.vertices[this.vertices.length-1]},n.prototype.clear=function(){this.vertices.length=0},n.prototype.append=function(e,t,n){if("undefined"==typeof t)throw new Error("From is not given!");if("undefined"==typeof n)throw new Error("To is not given!");if(t>n-1)throw new Error("lol1");if(n>e.vertices.length)throw new Error("lol2");if(0>t)throw new Error("lol3");for(var o=t;n>o;o++)this.vertices.push(e.vertices[o])},n.prototype.makeCCW=function(){for(var e=0,t=this.vertices,n=1;n<this.vertices.length;++n)(t[n][1]<t[e][1]||t[n][1]==t[e][1]&&t[n][0]>t[e][0])&&(e=n);r.left(this.at(e-1),this.at(e),this.at(e+1))||this.reverse()},n.prototype.reverse=function(){for(var e=[],t=0,n=this.vertices.length;t!==n;t++)e.push(this.vertices.pop());this.vertices=e},n.prototype.isReflex=function(e){return r.right(this.at(e-1),this.at(e),this.at(e+1))};var a=[],l=[];n.prototype.canSee=function(e,t){var n,o,s=a,u=l;if(r.leftOn(this.at(e+1),this.at(e),this.at(t))&&r.rightOn(this.at(e-1),this.at(e),this.at(t)))return!1;o=r.sqdist(this.at(e),this.at(t));for(var c=0;c!==this.vertices.length;++c)if((c+1)%this.vertices.length!==e&&c!==e&&r.leftOn(this.at(e),this.at(t),this.at(c+1))&&r.rightOn(this.at(e),this.at(t),this.at(c))&&(s[0]=this.at(e),s[1]=this.at(t),u[0]=this.at(c),u[1]=this.at(c+1),n=i.lineInt(s,u),r.sqdist(this.at(e),n)<o))return!1;return!0},n.prototype.copy=function(e,t,o){var i=o||new n;if(i.clear(),t>e)for(var r=e;t>=r;r++)i.vertices.push(this.vertices[r]);else{for(var r=0;t>=r;r++)i.vertices.push(this.vertices[r]);for(var r=e;r<this.vertices.length;r++)i.vertices.push(this.vertices[r])}return i},n.prototype.getCutEdges=function(){for(var e=[],t=[],o=[],i=new n,r=Number.MAX_VALUE,s=0;s<this.vertices.length;++s)if(this.isReflex(s))for(var a=0;a<this.vertices.length;++a)if(this.canSee(s,a)){t=this.copy(s,a,i).getCutEdges(),o=this.copy(a,s,i).getCutEdges();for(var l=0;l<o.length;l++)t.push(o[l]);t.length<r&&(e=t,r=t.length,e.push([this.at(s),this.at(a)]))}return e},n.prototype.decomp=function(){var e=this.getCutEdges();return e.length>0?this.slice(e):[this]},n.prototype.slice=function(e){if(0==e.length)return[this];if(e instanceof Array&&e.length&&e[0]instanceof Array&&2==e[0].length&&e[0][0]instanceof Array){for(var t=[this],n=0;n<e.length;n++)for(var o=e[n],i=0;i<t.length;i++){var r=t[i],s=r.slice(o);if(s){t.splice(i,1),t.push(s[0],s[1]);break}}return t}var o=e,n=this.vertices.indexOf(o[0]),i=this.vertices.indexOf(o[1]);return-1!=n&&-1!=i?[this.copy(n,i),this.copy(i,n)]:!1},n.prototype.isSimple=function(){for(var e=this.vertices,t=0;t<e.length-1;t++)for(var n=0;t-1>n;n++)if(i.segmentsIntersect(e[t],e[t+1],e[n],e[n+1]))return!1;for(var t=1;t<e.length-2;t++)if(i.segmentsIntersect(e[0],e[e.length-1],e[t],e[t+1]))return!1;return!0},n.prototype.quickDecomp=function(e,t,i,s,a,l){a=a||100,l=l||0,s=s||25,e="undefined"!=typeof e?e:[],t=t||[],i=i||[];var u=[0,0],c=[0,0],p=[0,0],d=0,h=0,f=0,v=0,m=0,g=0,y=0,b=new n,j=new n,E=this,w=this.vertices;if(w.length<3)return e;if(l++,l>a)return console.warn("quickDecomp: max level ("+a+") reached."),e;for(var x=0;x<this.vertices.length;++x)if(E.isReflex(x)){t.push(E.vertices[x]),d=h=Number.MAX_VALUE;for(var A=0;A<this.vertices.length;++A)r.left(E.at(x-1),E.at(x),E.at(A))&&r.rightOn(E.at(x-1),E.at(x),E.at(A-1))&&(p=o(E.at(x-1),E.at(x),E.at(A),E.at(A-1)),r.right(E.at(x+1),E.at(x),p)&&(f=r.sqdist(E.vertices[x],p),h>f&&(h=f,c=p,g=A))),r.left(E.at(x+1),E.at(x),E.at(A+1))&&r.rightOn(E.at(x+1),E.at(x),E.at(A))&&(p=o(E.at(x+1),E.at(x),E.at(A),E.at(A+1)),r.left(E.at(x-1),E.at(x),p)&&(f=r.sqdist(E.vertices[x],p),d>f&&(d=f,u=p,m=A)));if(g==(m+1)%this.vertices.length)p[0]=(c[0]+u[0])/2,p[1]=(c[1]+u[1])/2,i.push(p),m>x?(b.append(E,x,m+1),b.vertices.push(p),j.vertices.push(p),0!=g&&j.append(E,g,E.vertices.length),j.append(E,0,x+1)):(0!=x&&b.append(E,x,E.vertices.length),b.append(E,0,m+1),b.vertices.push(p),j.vertices.push(p),j.append(E,g,x+1));else{if(g>m&&(m+=this.vertices.length),v=Number.MAX_VALUE,g>m)return e;for(var A=g;m>=A;++A)r.leftOn(E.at(x-1),E.at(x),E.at(A))&&r.rightOn(E.at(x+1),E.at(x),E.at(A))&&(f=r.sqdist(E.at(x),E.at(A)),v>f&&(v=f,y=A%this.vertices.length));y>x?(b.append(E,x,y+1),0!=y&&j.append(E,y,w.length),j.append(E,0,x+1)):(0!=x&&b.append(E,x,w.length),b.append(E,0,y+1),j.append(E,y,x+1))}return b.vertices.length<j.vertices.length?(b.quickDecomp(e,t,i,s,a,l),j.quickDecomp(e,t,i,s,a,l)):(j.quickDecomp(e,t,i,s,a,l),b.quickDecomp(e,t,i,s,a,l)),e}return e.push(this),e},n.prototype.removeCollinearPoints=function(e){for(var t=0,n=this.vertices.length-1;this.vertices.length>3&&n>=0;--n)r.collinear(this.at(n-1),this.at(n),this.at(n+1),e)&&(this.vertices.splice(n%this.vertices.length,1),n--,t++);return t}},{"./Line":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/node_modules/poly-decomp/src/Line.js","./Point":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/node_modules/poly-decomp/src/Point.js","./Scalar":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/node_modules/poly-decomp/src/Scalar.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/node_modules/poly-decomp/src/Scalar.js":[function(e,t){function n(){}t.exports=n,n.eq=function(e,t,n){return n=n||0,Math.abs(e-t)<n}},{}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/node_modules/poly-decomp/src/index.js":[function(e,t){t.exports={Polygon:e("./Polygon"),Point:e("./Point")}},{"./Point":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/node_modules/poly-decomp/src/Point.js","./Polygon":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/node_modules/poly-decomp/src/Polygon.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/package.json":[function(e,t){t.exports={name:"p2",version:"0.6.0",description:"A JavaScript 2D physics engine.",author:{name:"Stefan Hedman",email:"schteppe@gmail.com",url:"http://steffe.se"},keywords:["p2.js","p2","physics","engine","2d"],main:"./src/p2.js",engines:{node:"*"},repository:{type:"git",url:"https://github.com/schteppe/p2.js.git"},bugs:{url:"https://github.com/schteppe/p2.js/issues"},licenses:[{type:"MIT"}],devDependencies:{grunt:"~0.4.0","grunt-contrib-jshint":"~0.9.2","grunt-contrib-nodeunit":"~0.1.2","grunt-contrib-uglify":"~0.4.0","grunt-contrib-watch":"~0.5.0","grunt-browserify":"~2.0.1","grunt-contrib-concat":"^0.4.0"},dependencies:{"poly-decomp":"0.1.0"},homepage:"https://github.com/schteppe/p2.js",_id:"p2@0.6.0",dist:{shasum:"e0a98ca90fe0f95667ee0d6f0b4b164cab306382",tarball:"http://registry.npmjs.org/p2/-/p2-0.6.0.tgz"},_from:"p2@0.6.0",_npmVersion:"1.4.3",_npmUser:{name:"schteppe",email:"schteppe@gmail.com"},maintainers:[{name:"schteppe",email:"schteppe@gmail.com"}],directories:{},_shasum:"e0a98ca90fe0f95667ee0d6f0b4b164cab306382",_resolved:"https://registry.npmjs.org/p2/-/p2-0.6.0.tgz",readme:"ERROR: No README data found!"}},{}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/AABB.js":[function(e,t){function n(e){this.lowerBound=o.create(),e&&e.lowerBound&&o.copy(this.lowerBound,e.lowerBound),this.upperBound=o.create(),e&&e.upperBound&&o.copy(this.upperBound,e.upperBound)}{var o=e("../math/vec2");e("../utils/Utils")}t.exports=n;var i=o.create();n.prototype.setFromPoints=function(e,t,n,r){var s=this.lowerBound,a=this.upperBound;"number"!=typeof n&&(n=0),0!==n?o.rotate(s,e[0],n):o.copy(s,e[0]),o.copy(a,s);for(var l=Math.cos(n),u=Math.sin(n),c=1;c<e.length;c++){var p=e[c];if(0!==n){var d=p[0],h=p[1];i[0]=l*d-u*h,i[1]=u*d+l*h,p=i}for(var f=0;2>f;f++)p[f]>a[f]&&(a[f]=p[f]),p[f]<s[f]&&(s[f]=p[f])}t&&(o.add(this.lowerBound,this.lowerBound,t),o.add(this.upperBound,this.upperBound,t)),r&&(this.lowerBound[0]-=r,this.lowerBound[1]-=r,this.upperBound[0]+=r,this.upperBound[1]+=r)},n.prototype.copy=function(e){o.copy(this.lowerBound,e.lowerBound),o.copy(this.upperBound,e.upperBound)},n.prototype.extend=function(e){for(var t=2;t--;){var n=e.lowerBound[t];this.lowerBound[t]>n&&(this.lowerBound[t]=n);var o=e.upperBound[t];this.upperBound[t]<o&&(this.upperBound[t]=o)}},n.prototype.overlaps=function(e){var t=this.lowerBound,n=this.upperBound,o=e.lowerBound,i=e.upperBound;return(o[0]<=n[0]&&n[0]<=i[0]||t[0]<=i[0]&&i[0]<=n[0])&&(o[1]<=n[1]&&n[1]<=i[1]||t[1]<=i[1]&&i[1]<=n[1])}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/Broadphase.js":[function(e,t){function n(e){this.type=e,this.result=[],this.world=null,this.boundingVolumeType=n.AABB}var o=e("../math/vec2"),i=e("../objects/Body");t.exports=n,n.AABB=1,n.BOUNDING_CIRCLE=2,n.prototype.setWorld=function(e){this.world=e},n.prototype.getCollisionPairs=function(){throw new Error("getCollisionPairs must be implemented in a subclass!")};var r=o.create();n.boundingRadiusCheck=function(e,t){o.sub(r,e.position,t.position);var n=o.squaredLength(r),i=e.boundingRadius+t.boundingRadius;return i*i>=n},n.aabbCheck=function(e,t){return e.aabbNeedsUpdate&&e.updateAABB(),t.aabbNeedsUpdate&&t.updateAABB(),e.aabb.overlaps(t.aabb)},n.prototype.boundingVolumeCheck=function(e,t){var o;switch(this.boundingVolumeType){case n.BOUNDING_CIRCLE:o=n.boundingRadiusCheck(e,t);break;case n.AABB:o=n.aabbCheck(e,t);break;default:throw new Error("Bounding volume type not recognized: "+this.boundingVolumeType)}return o},n.canCollide=function(e,t){return e.type===i.STATIC&&t.type===i.STATIC?!1:e.type===i.KINEMATIC&&t.type===i.STATIC||e.type===i.STATIC&&t.type===i.KINEMATIC?!1:e.type===i.KINEMATIC&&t.type===i.KINEMATIC?!1:e.sleepState===i.SLEEPING&&t.sleepState===i.SLEEPING?!1:e.sleepState===i.SLEEPING&&t.type===i.STATIC||t.sleepState===i.SLEEPING&&e.type===i.STATIC?!1:!0},n.NAIVE=1,n.SAP=2},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../objects/Body":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/Body.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/GridBroadphase.js":[function(e,t){function n(e){o.apply(this),e=i.defaults(e,{xmin:-100,xmax:100,ymin:-100,ymax:100,nx:10,ny:10}),this.xmin=e.xmin,this.ymin=e.ymin,this.xmax=e.xmax,this.ymax=e.ymax,this.nx=e.nx,this.ny=e.ny,this.binsizeX=(this.xmax-this.xmin)/this.nx,this.binsizeY=(this.ymax-this.ymin)/this.ny}var o=(e("../shapes/Circle"),e("../shapes/Plane"),e("../shapes/Particle"),e("../collision/Broadphase")),i=(e("../math/vec2"),e("../utils/Utils"));t.exports=n,n.prototype=new o,n.prototype.getCollisionPairs=function(e){for(var t=[],n=e.bodies,i=n.length,r=(this.binsizeX,this.binsizeY,this.nx),s=this.ny,a=this.xmin,l=this.ymin,u=this.xmax,c=this.ymax,p=[],d=r*s,h=0;d>h;h++)p.push([]);for(var f=r/(u-a),v=s/(c-l),h=0;h!==i;h++)for(var m=n[h],g=m.aabb,y=Math.max(g.lowerBound[0],a),b=Math.max(g.lowerBound[1],l),j=Math.min(g.upperBound[0],u),E=Math.min(g.upperBound[1],c),w=Math.floor(f*(y-a)),x=Math.floor(v*(b-l)),A=Math.floor(f*(j-a)),S=Math.floor(v*(E-l)),k=w;A>=k;k++)for(var C=x;S>=C;C++){var B=k,_=C,U=B*(s-1)+_;U>=0&&d>U&&p[U].push(m)}for(var h=0;h!==d;h++)for(var P=p[h],k=0,q=P.length;k!==q;k++)for(var m=P[k],C=0;C!==k;C++){var N=P[C];o.canCollide(m,N)&&this.boundingVolumeCheck(m,N)&&t.push(m,N)}return t}},{"../collision/Broadphase":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/Broadphase.js","../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../shapes/Circle":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Circle.js","../shapes/Particle":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Particle.js","../shapes/Plane":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Plane.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/NaiveBroadphase.js":[function(e,t){function n(){o.call(this,o.NAIVE)}{var o=(e("../shapes/Circle"),e("../shapes/Plane"),e("../shapes/Shape"),e("../shapes/Particle"),e("../collision/Broadphase"));e("../math/vec2")}t.exports=n,n.prototype=new o,n.prototype.getCollisionPairs=function(e){var t=e.bodies,n=this.result;n.length=0;for(var i=0,r=t.length;i!==r;i++)for(var s=t[i],a=0;i>a;a++){var l=t[a];o.canCollide(s,l)&&this.boundingVolumeCheck(s,l)&&n.push(s,l)}return n}},{"../collision/Broadphase":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/Broadphase.js","../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../shapes/Circle":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Circle.js","../shapes/Particle":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Particle.js","../shapes/Plane":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Plane.js","../shapes/Shape":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Shape.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/Narrowphase.js":[function(e,t){function n(){this.contactEquations=[],this.frictionEquations=[],this.enableFriction=!0,this.slipForce=10,this.frictionCoefficient=.3,this.surfaceVelocity=0,this.reuseObjects=!0,this.reusableContactEquations=[],this.reusableFrictionEquations=[],this.restitution=0,this.stiffness=p.DEFAULT_STIFFNESS,this.relaxation=p.DEFAULT_RELAXATION,this.frictionStiffness=p.DEFAULT_STIFFNESS,this.frictionRelaxation=p.DEFAULT_RELAXATION,this.enableFrictionReduction=!0,this.collidingBodiesLastStep=new c,this.contactSkinSize=.01}function o(e,t){r.set(e.vertices[0],.5*-t.length,-t.radius),r.set(e.vertices[1],.5*t.length,-t.radius),r.set(e.vertices[2],.5*t.length,t.radius),r.set(e.vertices[3],.5*-t.length,t.radius)}function i(e,t,n,o){for(var i=G,l=H,u=W,c=z,p=e,d=t.vertices,h=null,f=0;f!==d.length+1;f++){var v=d[f%d.length],m=d[(f+1)%d.length];r.rotate(i,v,o),r.rotate(l,m,o),a(i,i,n),a(l,l,n),s(u,i,p),s(c,l,p);var g=r.crossLength(u,c);if(null===h&&(h=g),0>=g*h)return!1;h=g}return!0}var r=e("../math/vec2"),s=r.sub,a=r.add,l=r.dot,u=e("../utils/Utils"),c=e("../utils/TupleDictionary"),p=e("../equations/Equation"),d=e("../equations/ContactEquation"),h=e("../equations/FrictionEquation"),f=e("../shapes/Circle"),v=e("../shapes/Convex"),m=e("../shapes/Shape"),g=(e("../objects/Body"),e("../shapes/Rectangle"));t.exports=n;var y=r.fromValues(0,1),b=r.fromValues(0,0),j=r.fromValues(0,0),E=r.fromValues(0,0),w=r.fromValues(0,0),x=r.fromValues(0,0),A=r.fromValues(0,0),S=r.fromValues(0,0),k=r.fromValues(0,0),C=r.fromValues(0,0),B=r.fromValues(0,0),_=r.fromValues(0,0),U=r.fromValues(0,0),P=r.fromValues(0,0),q=r.fromValues(0,0),N=r.fromValues(0,0),L=r.fromValues(0,0),T=r.fromValues(0,0),F=r.fromValues(0,0),M=[];n.prototype.collidedLastStep=function(e,t){var n=0|e.id,o=0|t.id;return!!this.collidingBodiesLastStep.get(n,o)},n.prototype.reset=function(){this.collidingBodiesLastStep.reset();for(var e=this.contactEquations,t=e.length;t--;){var n=e[t],o=n.bodyA.id,i=n.bodyB.id;this.collidingBodiesLastStep.set(o,i,!0)}if(this.reuseObjects){var r=this.contactEquations,s=this.frictionEquations,a=this.reusableFrictionEquations,l=this.reusableContactEquations;u.appendArray(l,r),u.appendArray(a,s)}this.contactEquations.length=this.frictionEquations.length=0},n.prototype.createContactEquation=function(e,t,n,o){var i=this.reusableContactEquations.length?this.reusableContactEquations.pop():new d(e,t);return i.bodyA=e,i.bodyB=t,i.shapeA=n,i.shapeB=o,i.restitution=this.restitution,i.firstImpact=!this.collidedLastStep(e,t),i.stiffness=this.stiffness,i.relaxation=this.relaxation,i.needsUpdate=!0,i.enabled=!0,i.offset=this.contactSkinSize,i},n.prototype.createFrictionEquation=function(e,t,n,o){var i=this.reusableFrictionEquations.length?this.reusableFrictionEquations.pop():new h(e,t);return i.bodyA=e,i.bodyB=t,i.shapeA=n,i.shapeB=o,i.setSlipForce(this.slipForce),i.frictionCoefficient=this.frictionCoefficient,i.relativeVelocity=this.surfaceVelocity,i.enabled=!0,i.needsUpdate=!0,i.stiffness=this.frictionStiffness,i.relaxation=this.frictionRelaxation,i.contactEquations.length=0,i},n.prototype.createFrictionFromContact=function(e){var t=this.createFrictionEquation(e.bodyA,e.bodyB,e.shapeA,e.shapeB);return r.copy(t.contactPointA,e.contactPointA),r.copy(t.contactPointB,e.contactPointB),r.rotate90cw(t.t,e.normalA),t.contactEquations.push(e),t},n.prototype.createFrictionFromAverage=function(e){if(!e)throw new Error("numContacts == 0!");{var t=this.contactEquations[this.contactEquations.length-1],n=this.createFrictionEquation(t.bodyA,t.bodyB,t.shapeA,t.shapeB),o=t.bodyA;t.bodyB}r.set(n.contactPointA,0,0),r.set(n.contactPointB,0,0),r.set(n.t,0,0);for(var i=0;i!==e;i++)t=this.contactEquations[this.contactEquations.length-1-i],t.bodyA===o?(r.add(n.t,n.t,t.normalA),r.add(n.contactPointA,n.contactPointA,t.contactPointA),r.add(n.contactPointB,n.contactPointB,t.contactPointB)):(r.sub(n.t,n.t,t.normalA),r.add(n.contactPointA,n.contactPointA,t.contactPointB),r.add(n.contactPointB,n.contactPointB,t.contactPointA)),n.contactEquations.push(t);var s=1/e;return r.scale(n.contactPointA,n.contactPointA,s),r.scale(n.contactPointB,n.contactPointB,s),r.normalize(n.t,n.t),r.rotate90cw(n.t,n.t),n},n.prototype[m.LINE|m.CONVEX]=n.prototype.convexLine=function(e,t,n,o,i,r,s,a,l){return l?!1:0},n.prototype[m.LINE|m.RECTANGLE]=n.prototype.lineRectangle=function(e,t,n,o,i,r,s,a,l){return l?!1:0};var O=new g(1,1),D=r.create();n.prototype[m.CAPSULE|m.CONVEX]=n.prototype[m.CAPSULE|m.RECTANGLE]=n.prototype.convexCapsule=function(e,t,n,i,s,a,l,u,c){var p=D;r.set(p,a.length/2,0),r.rotate(p,p,u),r.add(p,p,l);var d=this.circleConvex(s,a,p,u,e,t,n,i,c,a.radius);r.set(p,-a.length/2,0),r.rotate(p,p,u),r.add(p,p,l);var h=this.circleConvex(s,a,p,u,e,t,n,i,c,a.radius);if(c&&(d||h))return!0;var f=O;o(f,a);var v=this.convexConvex(e,t,n,i,s,f,l,u,c);return v+d+h},n.prototype[m.CAPSULE|m.LINE]=n.prototype.lineCapsule=function(e,t,n,o,i,r,s,a,l){return l?!1:0};var R=r.create(),I=r.create(),V=new g(1,1);n.prototype[m.CAPSULE|m.CAPSULE]=n.prototype.capsuleCapsule=function(e,t,n,i,s,a,l,u,c){for(var p,d=R,h=I,f=0,v=0;2>v;v++){r.set(d,(0===v?-1:1)*t.length/2,0),r.rotate(d,d,i),r.add(d,d,n);for(var m=0;2>m;m++){r.set(h,(0===m?-1:1)*a.length/2,0),r.rotate(h,h,u),r.add(h,h,l),this.enableFrictionReduction&&(p=this.enableFriction,this.enableFriction=!1);var g=this.circleCircle(e,t,d,i,s,a,h,u,c,t.radius,a.radius);if(this.enableFrictionReduction&&(this.enableFriction=p),c&&g)return!0;f+=g}}this.enableFrictionReduction&&(p=this.enableFriction,this.enableFriction=!1);var y=V;o(y,t);var b=this.convexCapsule(e,y,n,i,s,a,l,u,c);if(this.enableFrictionReduction&&(this.enableFriction=p),c&&b)return!0;if(f+=b,this.enableFrictionReduction){var p=this.enableFriction;this.enableFriction=!1}o(y,a);var j=this.convexCapsule(s,y,l,u,e,t,n,i,c);return this.enableFrictionReduction&&(this.enableFriction=p),c&&j?!0:(f+=j,this.enableFrictionReduction&&f&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(f)),f)},n.prototype[m.LINE|m.LINE]=n.prototype.lineLine=function(e,t,n,o,i,r,s,a,l){return l?!1:0},n.prototype[m.PLANE|m.LINE]=n.prototype.planeLine=function(e,t,n,o,i,u,c,p,d){var h=b,f=j,v=E,m=w,g=x,B=A,_=S,U=k,P=C,q=M,N=0;r.set(h,-u.length/2,0),r.set(f,u.length/2,0),r.rotate(v,h,p),r.rotate(m,f,p),a(v,v,c),a(m,m,c),r.copy(h,v),r.copy(f,m),s(g,f,h),r.normalize(B,g),r.rotate90cw(P,B),r.rotate(U,y,o),q[0]=h,q[1]=f;for(var L=0;L<q.length;L++){var T=q[L];s(_,T,n);var F=l(_,U);if(0>F){if(d)return!0;var O=this.createContactEquation(e,i,t,u);N++,r.copy(O.normalA,U),r.normalize(O.normalA,O.normalA),r.scale(_,U,F),s(O.contactPointA,T,_),s(O.contactPointA,O.contactPointA,e.position),s(O.contactPointB,T,c),a(O.contactPointB,O.contactPointB,c),s(O.contactPointB,O.contactPointB,i.position),this.contactEquations.push(O),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(O))}}return d?!1:(this.enableFrictionReduction||N&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(N)),N)},n.prototype[m.PARTICLE|m.CAPSULE]=n.prototype.particleCapsule=function(e,t,n,o,i,r,s,a,l){return this.circleLine(e,t,n,o,i,r,s,a,l,r.radius,0)},n.prototype[m.CIRCLE|m.LINE]=n.prototype.circleLine=function(e,t,n,o,i,u,c,p,d,h,f){var h=h||0,f="undefined"!=typeof f?f:t.radius,v=b,m=j,g=E,y=w,N=x,L=A,T=S,F=k,O=C,D=B,R=_,I=U,V=P,G=q,H=M;r.set(F,-u.length/2,0),r.set(O,u.length/2,0),r.rotate(D,F,p),r.rotate(R,O,p),a(D,D,c),a(R,R,c),r.copy(F,D),r.copy(O,R),s(L,O,F),r.normalize(T,L),r.rotate90cw(N,T),s(I,n,F);var W=l(I,N);s(y,F,c),s(V,n,c);var z=f+h;if(Math.abs(W)<z){r.scale(v,N,W),s(g,n,v),r.scale(m,N,l(N,V)),r.normalize(m,m),r.scale(m,m,h),a(g,g,m);var X=l(T,g),K=l(T,F),$=l(T,O);if(X>K&&$>X){if(d)return!0;var Y=this.createContactEquation(e,i,t,u);return r.scale(Y.normalA,v,-1),r.normalize(Y.normalA,Y.normalA),r.scale(Y.contactPointA,Y.normalA,f),a(Y.contactPointA,Y.contactPointA,n),s(Y.contactPointA,Y.contactPointA,e.position),s(Y.contactPointB,g,c),a(Y.contactPointB,Y.contactPointB,c),s(Y.contactPointB,Y.contactPointB,i.position),this.contactEquations.push(Y),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(Y)),1}}H[0]=F,H[1]=O;for(var J=0;J<H.length;J++){var Z=H[J];if(s(I,Z,n),r.squaredLength(I)<Math.pow(z,2)){if(d)return!0;var Y=this.createContactEquation(e,i,t,u);return r.copy(Y.normalA,I),r.normalize(Y.normalA,Y.normalA),r.scale(Y.contactPointA,Y.normalA,f),a(Y.contactPointA,Y.contactPointA,n),s(Y.contactPointA,Y.contactPointA,e.position),s(Y.contactPointB,Z,c),r.scale(G,Y.normalA,-h),a(Y.contactPointB,Y.contactPointB,G),a(Y.contactPointB,Y.contactPointB,c),s(Y.contactPointB,Y.contactPointB,i.position),this.contactEquations.push(Y),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(Y)),1}}return 0},n.prototype[m.CIRCLE|m.CAPSULE]=n.prototype.circleCapsule=function(e,t,n,o,i,r,s,a,l){return this.circleLine(e,t,n,o,i,r,s,a,l,r.radius)},n.prototype[m.CIRCLE|m.CONVEX]=n.prototype[m.CIRCLE|m.RECTANGLE]=n.prototype.circleConvex=function(e,t,n,o,l,u,c,p,d,h){for(var h="number"==typeof h?h:t.radius,f=b,v=j,m=E,g=w,y=x,A=B,S=_,k=P,C=q,U=N,T=L,F=!1,M=Number.MAX_VALUE,O=u.vertices,D=0;D!==O.length+1;D++){var R=O[D%O.length],I=O[(D+1)%O.length];if(r.rotate(f,R,p),r.rotate(v,I,p),a(f,f,c),a(v,v,c),s(m,v,f),r.normalize(g,m),r.rotate90cw(y,g),r.scale(C,y,-t.radius),a(C,C,n),i(C,u,c,p)){r.sub(U,f,C);var V=Math.abs(r.dot(U,y));M>V&&(r.copy(T,C),M=V,r.scale(k,y,V),r.add(k,k,C),F=!0)}}if(F){if(d)return!0;var G=this.createContactEquation(e,l,t,u);return r.sub(G.normalA,T,n),r.normalize(G.normalA,G.normalA),r.scale(G.contactPointA,G.normalA,h),a(G.contactPointA,G.contactPointA,n),s(G.contactPointA,G.contactPointA,e.position),s(G.contactPointB,k,c),a(G.contactPointB,G.contactPointB,c),s(G.contactPointB,G.contactPointB,l.position),this.contactEquations.push(G),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(G)),1}if(h>0)for(var D=0;D<O.length;D++){var H=O[D];if(r.rotate(S,H,p),a(S,S,c),s(A,S,n),r.squaredLength(A)<Math.pow(h,2)){if(d)return!0;var G=this.createContactEquation(e,l,t,u);return r.copy(G.normalA,A),r.normalize(G.normalA,G.normalA),r.scale(G.contactPointA,G.normalA,h),a(G.contactPointA,G.contactPointA,n),s(G.contactPointA,G.contactPointA,e.position),s(G.contactPointB,S,c),a(G.contactPointB,G.contactPointB,c),s(G.contactPointB,G.contactPointB,l.position),this.contactEquations.push(G),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(G)),1}}return 0};var G=r.create(),H=r.create(),W=r.create(),z=r.create();n.prototype[m.PARTICLE|m.CONVEX]=n.prototype[m.PARTICLE|m.RECTANGLE]=n.prototype.particleConvex=function(e,t,n,o,u,c,p,d,h){var f=b,v=j,m=E,g=w,y=x,k=A,C=S,_=B,U=P,q=T,N=F,L=Number.MAX_VALUE,M=!1,O=c.vertices;if(!i(n,c,p,d))return 0;if(h)return!0;for(var D=0;D!==O.length+1;D++){var R=O[D%O.length],I=O[(D+1)%O.length];r.rotate(f,R,d),r.rotate(v,I,d),a(f,f,p),a(v,v,p),s(m,v,f),r.normalize(g,m),r.rotate90cw(y,g),s(_,n,f);{l(_,y)}s(k,f,p),s(C,n,p),r.sub(q,f,n);var V=Math.abs(r.dot(q,y));L>V&&(L=V,r.scale(U,y,V),r.add(U,U,n),r.copy(N,y),M=!0)}if(M){var G=this.createContactEquation(e,u,t,c);return r.scale(G.normalA,N,-1),r.normalize(G.normalA,G.normalA),r.set(G.contactPointA,0,0),a(G.contactPointA,G.contactPointA,n),s(G.contactPointA,G.contactPointA,e.position),s(G.contactPointB,U,p),a(G.contactPointB,G.contactPointB,p),s(G.contactPointB,G.contactPointB,u.position),this.contactEquations.push(G),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(G)),1}return 0},n.prototype[m.CIRCLE]=n.prototype.circleCircle=function(e,t,n,o,i,l,u,c,p,d,h){var f=b,d=d||t.radius,h=h||l.radius;s(f,n,u);var v=d+h;if(r.squaredLength(f)>Math.pow(v,2))return 0;if(p)return!0;var m=this.createContactEquation(e,i,t,l);return s(m.normalA,u,n),r.normalize(m.normalA,m.normalA),r.scale(m.contactPointA,m.normalA,d),r.scale(m.contactPointB,m.normalA,-h),a(m.contactPointA,m.contactPointA,n),s(m.contactPointA,m.contactPointA,e.position),a(m.contactPointB,m.contactPointB,u),s(m.contactPointB,m.contactPointB,i.position),this.contactEquations.push(m),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(m)),1},n.prototype[m.PLANE|m.CONVEX]=n.prototype[m.PLANE|m.RECTANGLE]=n.prototype.planeConvex=function(e,t,n,o,i,u,c,p,d){var h=b,f=j,v=E,m=0;r.rotate(f,y,o);for(var g=0;g!==u.vertices.length;g++){var w=u.vertices[g];if(r.rotate(h,w,p),a(h,h,c),s(v,h,n),l(v,f)<=0){if(d)return!0;m++;var x=this.createContactEquation(e,i,t,u);s(v,h,n),r.copy(x.normalA,f);var A=l(v,x.normalA);r.scale(v,x.normalA,A),s(x.contactPointB,h,i.position),s(x.contactPointA,h,v),s(x.contactPointA,x.contactPointA,e.position),this.contactEquations.push(x),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(x))}}return this.enableFrictionReduction&&this.enableFriction&&m&&this.frictionEquations.push(this.createFrictionFromAverage(m)),m},n.prototype[m.PARTICLE|m.PLANE]=n.prototype.particlePlane=function(e,t,n,o,i,a,u,c,p){var d=b,h=j;c=c||0,s(d,n,u),r.rotate(h,y,c);var f=l(d,h);if(f>0)return 0;if(p)return!0;var v=this.createContactEquation(i,e,a,t);return r.copy(v.normalA,h),r.scale(d,v.normalA,f),s(v.contactPointA,n,d),s(v.contactPointA,v.contactPointA,i.position),s(v.contactPointB,n,e.position),this.contactEquations.push(v),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(v)),1},n.prototype[m.CIRCLE|m.PARTICLE]=n.prototype.circleParticle=function(e,t,n,o,i,l,u,c,p){var d=b;if(s(d,u,n),r.squaredLength(d)>Math.pow(t.radius,2))return 0;if(p)return!0;var h=this.createContactEquation(e,i,t,l);return r.copy(h.normalA,d),r.normalize(h.normalA,h.normalA),r.scale(h.contactPointA,h.normalA,t.radius),a(h.contactPointA,h.contactPointA,n),s(h.contactPointA,h.contactPointA,e.position),s(h.contactPointB,u,i.position),this.contactEquations.push(h),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(h)),1};{var X=new f(1),K=r.create(),$=r.create();r.create()}n.prototype[m.PLANE|m.CAPSULE]=n.prototype.planeCapsule=function(e,t,n,o,i,s,l,u,c){var p=K,d=$,h=X;r.set(p,-s.length/2,0),r.rotate(p,p,u),a(p,p,l),r.set(d,s.length/2,0),r.rotate(d,d,u),a(d,d,l),h.radius=s.radius;var f;this.enableFrictionReduction&&(f=this.enableFriction,this.enableFriction=!1);var v=this.circlePlane(i,h,p,0,e,t,n,o,c),m=this.circlePlane(i,h,d,0,e,t,n,o,c);if(this.enableFrictionReduction&&(this.enableFriction=f),c)return v||m;var g=v+m;return this.enableFrictionReduction&&g&&this.frictionEquations.push(this.createFrictionFromAverage(g)),g},n.prototype[m.CIRCLE|m.PLANE]=n.prototype.circlePlane=function(e,t,n,o,i,u,c,p,d){var h=e,f=t,v=n,m=i,g=c,w=p;w=w||0;var x=b,A=j,S=E;s(x,v,g),r.rotate(A,y,w);var k=l(A,x);if(k>f.radius)return 0;if(d)return!0;var C=this.createContactEquation(m,h,u,t);return r.copy(C.normalA,A),r.scale(C.contactPointB,C.normalA,-f.radius),a(C.contactPointB,C.contactPointB,v),s(C.contactPointB,C.contactPointB,h.position),r.scale(S,C.normalA,k),s(C.contactPointA,x,S),a(C.contactPointA,C.contactPointA,g),s(C.contactPointA,C.contactPointA,m.position),this.contactEquations.push(C),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(C)),1},n.prototype[m.CONVEX]=n.prototype[m.CONVEX|m.RECTANGLE]=n.prototype[m.RECTANGLE]=n.prototype.convexConvex=function(e,t,o,i,u,c,p,d,h,f){var v=b,m=j,g=E,y=w,A=x,B=S,_=k,U=C,P=0,f="number"==typeof f?f:0,q=n.findSeparatingAxis(t,o,i,c,p,d,v);if(!q)return 0;s(_,p,o),l(v,_)>0&&r.scale(v,v,-1);var N=n.getClosestEdge(t,i,v,!0),L=n.getClosestEdge(c,d,v);if(-1===N||-1===L)return 0;for(var T=0;2>T;T++){var F=N,M=L,O=t,D=c,R=o,I=p,V=i,G=d,H=e,W=u;if(0===T){var z;z=F,F=M,M=z,z=O,O=D,D=z,z=R,R=I,I=z,z=V,V=G,G=z,z=H,H=W,W=z}for(var X=M;M+2>X;X++){var K=D.vertices[(X+D.vertices.length)%D.vertices.length];r.rotate(m,K,G),a(m,m,I);for(var $=0,Y=F-1;F+2>Y;Y++){var J=O.vertices[(Y+O.vertices.length)%O.vertices.length],Z=O.vertices[(Y+1+O.vertices.length)%O.vertices.length];r.rotate(g,J,V),r.rotate(y,Z,V),a(g,g,R),a(y,y,R),s(A,y,g),r.rotate90cw(U,A),r.normalize(U,U),s(_,m,g);var Q=l(U,_);(Y===F&&f>=Q||Y!==F&&0>=Q)&&$++}if($>=3){if(h)return!0;var et=this.createContactEquation(H,W,O,D);P++;var J=O.vertices[F%O.vertices.length],Z=O.vertices[(F+1)%O.vertices.length];r.rotate(g,J,V),r.rotate(y,Z,V),a(g,g,R),a(y,y,R),s(A,y,g),r.rotate90cw(et.normalA,A),r.normalize(et.normalA,et.normalA),s(_,m,g);var Q=l(et.normalA,_);r.scale(B,et.normalA,Q),s(et.contactPointA,m,R),s(et.contactPointA,et.contactPointA,B),a(et.contactPointA,et.contactPointA,R),s(et.contactPointA,et.contactPointA,H.position),s(et.contactPointB,m,I),a(et.contactPointB,et.contactPointB,I),s(et.contactPointB,et.contactPointB,W.position),this.contactEquations.push(et),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(et))
}}}return this.enableFrictionReduction&&this.enableFriction&&P&&this.frictionEquations.push(this.createFrictionFromAverage(P)),P};var Y=r.fromValues(0,0);n.projectConvexOntoAxis=function(e,t,n,o,i){var s,a,u=null,c=null,p=Y;r.rotate(p,o,-n);for(var d=0;d<e.vertices.length;d++)s=e.vertices[d],a=l(s,p),(null===u||a>u)&&(u=a),(null===c||c>a)&&(c=a);if(c>u){var h=c;c=u,u=h}var f=l(t,o);r.set(i,c+f,u+f)};var J=r.fromValues(0,0),Z=r.fromValues(0,0),Q=r.fromValues(0,0),et=r.fromValues(0,0),tt=r.fromValues(0,0),nt=r.fromValues(0,0);n.findSeparatingAxis=function(e,t,o,i,a,l,u){var c=null,p=!1,d=!1,h=J,f=Z,v=Q,m=et,y=tt,b=nt;if(e instanceof g&&i instanceof g)for(var j=0;2!==j;j++){var E=e,w=o;1===j&&(E=i,w=l);for(var x=0;2!==x;x++){0===x?r.set(m,0,1):1===x&&r.set(m,1,0),0!==w&&r.rotate(m,m,w),n.projectConvexOntoAxis(e,t,o,m,y),n.projectConvexOntoAxis(i,a,l,m,b);var A=y,S=b,k=!1;y[0]>b[0]&&(S=y,A=b,k=!0);var C=S[0]-A[1];p=0>=C,(null===c||C>c)&&(r.copy(u,m),c=C,d=p)}}else for(var j=0;2!==j;j++){var E=e,w=o;1===j&&(E=i,w=l);for(var x=0;x!==E.vertices.length;x++){r.rotate(f,E.vertices[x],w),r.rotate(v,E.vertices[(x+1)%E.vertices.length],w),s(h,v,f),r.rotate90cw(m,h),r.normalize(m,m),n.projectConvexOntoAxis(e,t,o,m,y),n.projectConvexOntoAxis(i,a,l,m,b);var A=y,S=b,k=!1;y[0]>b[0]&&(S=y,A=b,k=!0);var C=S[0]-A[1];p=0>=C,(null===c||C>c)&&(r.copy(u,m),c=C,d=p)}}return d};var ot=r.fromValues(0,0),it=r.fromValues(0,0),rt=r.fromValues(0,0);n.getClosestEdge=function(e,t,n,o){var i=ot,a=it,u=rt;r.rotate(i,n,-t),o&&r.scale(i,i,-1);for(var c=-1,p=e.vertices.length,d=-1,h=0;h!==p;h++){s(a,e.vertices[(h+1)%p],e.vertices[h%p]),r.rotate90cw(u,a),r.normalize(u,u);var f=l(u,i);(-1===c||f>d)&&(c=h%p,d=f)}return c};var st=r.create(),at=r.create(),lt=r.create(),ut=r.create(),ct=r.create(),pt=r.create(),dt=r.create();n.prototype[m.CIRCLE|m.HEIGHTFIELD]=n.prototype.circleHeightfield=function(e,t,n,o,i,l,u,c,p,d){var h=l.data,d=d||t.radius,f=l.elementWidth,v=at,m=st,g=ct,y=dt,b=pt,j=lt,E=ut,w=Math.floor((n[0]-d-u[0])/f),x=Math.ceil((n[0]+d-u[0])/f);0>w&&(w=0),x>=h.length&&(x=h.length-1);for(var A=h[w],S=h[x],k=w;x>k;k++)h[k]<S&&(S=h[k]),h[k]>A&&(A=h[k]);if(n[1]-d>A)return p?!1:0;n[1]+d<S;for(var C=!1,k=w;x>k;k++){r.set(j,k*f,h[k]),r.set(E,(k+1)*f,h[k+1]),r.add(j,j,u),r.add(E,E,u),r.sub(b,E,j),r.rotate(b,b,Math.PI/2),r.normalize(b,b),r.scale(m,b,-d),r.add(m,m,n),r.sub(v,m,j);var B=r.dot(v,b);if(m[0]>=j[0]&&m[0]<E[0]&&0>=B){if(p)return!0;C=!0,r.scale(v,b,-B),r.add(g,m,v),r.copy(y,b);var _=this.createContactEquation(i,e,l,t);r.copy(_.normalA,y),r.scale(_.contactPointB,_.normalA,-d),a(_.contactPointB,_.contactPointB,n),s(_.contactPointB,_.contactPointB,e.position),r.copy(_.contactPointA,g),r.sub(_.contactPointA,_.contactPointA,i.position),this.contactEquations.push(_),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(_))}}if(C=!1,d>0)for(var k=w;x>=k;k++)if(r.set(j,k*f,h[k]),r.add(j,j,u),r.sub(v,n,j),r.squaredLength(v)<Math.pow(d,2)){if(p)return!0;C=!0;var _=this.createContactEquation(i,e,l,t);r.copy(_.normalA,v),r.normalize(_.normalA,_.normalA),r.scale(_.contactPointB,_.normalA,-d),a(_.contactPointB,_.contactPointB,n),s(_.contactPointB,_.contactPointB,e.position),s(_.contactPointA,j,u),a(_.contactPointA,_.contactPointA,u),s(_.contactPointA,_.contactPointA,i.position),this.contactEquations.push(_),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(_))}return C?1:0};var ht=r.create(),ft=r.create(),vt=r.create(),mt=new v([r.create(),r.create(),r.create(),r.create()]);n.prototype[m.RECTANGLE|m.HEIGHTFIELD]=n.prototype[m.CONVEX|m.HEIGHTFIELD]=n.prototype.convexHeightfield=function(e,t,n,o,i,s,a,l,u){var c=s.data,p=s.elementWidth,d=ht,h=ft,f=vt,v=mt,m=Math.floor((e.aabb.lowerBound[0]-a[0])/p),g=Math.ceil((e.aabb.upperBound[0]-a[0])/p);0>m&&(m=0),g>=c.length&&(g=c.length-1);for(var y=c[m],b=c[g],j=m;g>j;j++)c[j]<b&&(b=c[j]),c[j]>y&&(y=c[j]);if(e.aabb.lowerBound[1]>y)return u?!1:0;for(var E=0,j=m;g>j;j++){r.set(d,j*p,c[j]),r.set(h,(j+1)*p,c[j+1]),r.add(d,d,a),r.add(h,h,a);var w=100;r.set(f,.5*(h[0]+d[0]),.5*(h[1]+d[1]-w)),r.sub(v.vertices[0],h,f),r.sub(v.vertices[1],d,f),r.copy(v.vertices[2],v.vertices[1]),r.copy(v.vertices[3],v.vertices[0]),v.vertices[2][1]-=w,v.vertices[3][1]-=w,E+=this.convexConvex(e,t,n,o,i,v,f,0,u)}return E}},{"../equations/ContactEquation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/ContactEquation.js","../equations/Equation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js","../equations/FrictionEquation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/FrictionEquation.js","../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../objects/Body":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/Body.js","../shapes/Circle":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Circle.js","../shapes/Convex":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Convex.js","../shapes/Rectangle":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Rectangle.js","../shapes/Shape":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Shape.js","../utils/TupleDictionary":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/TupleDictionary.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/SAPBroadphase.js":[function(e,t){function n(){i.call(this,i.SAP),this.axisList=[],this.world=null,this.axisIndex=0;var e=this.axisList;this._addBodyHandler=function(t){e.push(t.body)},this._removeBodyHandler=function(t){var n=e.indexOf(t.body);-1!==n&&e.splice(n,1)}}var o=e("../utils/Utils"),i=e("../collision/Broadphase");t.exports=n,n.prototype=new i,n.prototype.setWorld=function(e){this.axisList.length=0,o.appendArray(this.axisList,e.bodies),e.off("addBody",this._addBodyHandler).off("removeBody",this._removeBodyHandler),e.on("addBody",this._addBodyHandler).on("removeBody",this._removeBodyHandler),this.world=e},n.sortAxisList=function(e,t){t=0|t;for(var n=1,o=e.length;o>n;n++){for(var i=e[n],r=n-1;r>=0&&!(e[r].aabb.lowerBound[t]<=i.aabb.lowerBound[t]);r--)e[r+1]=e[r];e[r+1]=i}return e},n.prototype.getCollisionPairs=function(){var e=this.axisList,t=this.result,o=this.axisIndex;t.length=0;for(var r=e.length;r--;){var s=e[r];s.aabbNeedsUpdate&&s.updateAABB()}n.sortAxisList(e,o);for(var a=0,l=0|e.length;a!==l;a++)for(var u=e[a],c=a+1;l>c;c++){var p=e[c],d=p.aabb.lowerBound[o]<=u.aabb.upperBound[o];if(!d)break;i.canCollide(u,p)&&this.boundingVolumeCheck(u,p)&&t.push(u,p)}return t}},{"../collision/Broadphase":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/Broadphase.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/Constraint.js":[function(e,t){function n(e,t,n,i){this.type=n,i=o.defaults(i,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=e,this.bodyB=t,this.collideConnected=i.collideConnected,i.wakeUpBodies&&(e&&e.wakeUp(),t&&t.wakeUp())}t.exports=n;var o=e("../utils/Utils");n.prototype.update=function(){throw new Error("method update() not implmemented in this Constraint subclass!")},n.DISTANCE=1,n.GEAR=2,n.LOCK=3,n.PRISMATIC=4,n.REVOLUTE=5,n.prototype.setStiffness=function(e){for(var t=this.equations,n=0;n!==t.length;n++){var o=t[n];o.stiffness=e,o.needsUpdate=!0}},n.prototype.setRelaxation=function(e){for(var t=this.equations,n=0;n!==t.length;n++){var o=t[n];o.relaxation=e,o.needsUpdate=!0}}},{"../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/DistanceConstraint.js":[function(e,t){function n(e,t,n){n=s.defaults(n,{localAnchorA:[0,0],localAnchorB:[0,0]}),o.call(this,e,t,o.DISTANCE,n),this.localAnchorA=r.fromValues(n.localAnchorA[0],n.localAnchorA[1]),this.localAnchorB=r.fromValues(n.localAnchorB[0],n.localAnchorB[1]);var a=this.localAnchorA,l=this.localAnchorB;if(this.distance=0,"number"==typeof n.distance)this.distance=n.distance;else{var u=r.create(),c=r.create(),p=r.create();r.rotate(u,a,e.angle),r.rotate(c,l,t.angle),r.add(p,t.position,c),r.sub(p,p,u),r.sub(p,p,e.position),this.distance=r.length(p)}var d;d="undefined"==typeof n.maxForce?Number.MAX_VALUE:n.maxForce;var h=new i(e,t,-d,d);this.equations=[h],this.maxForce=d;var p=r.create(),f=r.create(),v=r.create(),m=this;h.computeGq=function(){var e=this.bodyA,t=this.bodyB,n=e.position,o=t.position;return r.rotate(f,a,e.angle),r.rotate(v,l,t.angle),r.add(p,o,v),r.sub(p,p,f),r.sub(p,p,n),r.length(p)-m.distance},this.setMaxForce(d),this.upperLimitEnabled=!1,this.upperLimit=1,this.lowerLimitEnabled=!1,this.lowerLimit=0,this.position=0}var o=e("./Constraint"),i=e("../equations/Equation"),r=e("../math/vec2"),s=e("../utils/Utils");t.exports=n,n.prototype=new o;var a=r.create(),l=r.create(),u=r.create();n.prototype.update=function(){var e=this.equations[0],t=this.bodyA,n=this.bodyB,o=(this.distance,t.position),i=n.position,s=this.equations[0],c=e.G;r.rotate(l,this.localAnchorA,t.angle),r.rotate(u,this.localAnchorB,n.angle),r.add(a,i,u),r.sub(a,a,l),r.sub(a,a,o),this.position=r.length(a);var p=!1;if(this.upperLimitEnabled&&this.position>this.upperLimit&&(s.maxForce=0,s.minForce=-this.maxForce,this.distance=this.upperLimit,p=!0),this.lowerLimitEnabled&&this.position<this.lowerLimit&&(s.maxForce=this.maxForce,s.minForce=0,this.distance=this.lowerLimit,p=!0),(this.lowerLimitEnabled||this.upperLimitEnabled)&&!p)return void(s.enabled=!1);s.enabled=!0,r.normalize(a,a);var d=r.crossLength(l,a),h=r.crossLength(u,a);c[0]=-a[0],c[1]=-a[1],c[2]=-d,c[3]=a[0],c[4]=a[1],c[5]=h},n.prototype.setMaxForce=function(e){var t=this.equations[0];t.minForce=-e,t.maxForce=e},n.prototype.getMaxForce=function(){var e=this.equations[0];return e.maxForce}},{"../equations/Equation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js","../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js","./Constraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/Constraint.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/GearConstraint.js":[function(e,t){function n(e,t,n){n=n||{},o.call(this,e,t,o.GEAR,n),this.ratio="number"==typeof n.ratio?n.ratio:1,this.angle="number"==typeof n.angle?n.angle:t.angle-this.ratio*e.angle,n.angle=this.angle,n.ratio=this.ratio,this.equations=[new i(e,t,n)],"number"==typeof n.maxTorque&&this.setMaxTorque(n.maxTorque)}{var o=e("./Constraint"),i=(e("../equations/Equation"),e("../equations/AngleLockEquation"));e("../math/vec2")}t.exports=n,n.prototype=new o,n.prototype.update=function(){var e=this.equations[0];e.ratio!==this.ratio&&e.setRatio(this.ratio),e.angle=this.angle},n.prototype.setMaxTorque=function(e){this.equations[0].setMaxTorque(e)},n.prototype.getMaxTorque=function(){return this.equations[0].maxForce}},{"../equations/AngleLockEquation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/AngleLockEquation.js","../equations/Equation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js","../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Constraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/Constraint.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/LockConstraint.js":[function(e,t){function n(e,t,n){n=n||{},o.call(this,e,t,o.LOCK,n);var s="undefined"==typeof n.maxForce?Number.MAX_VALUE:n.maxForce,a=(n.localAngleB||0,new r(e,t,-s,s)),l=new r(e,t,-s,s),u=new r(e,t,-s,s),c=i.create(),p=i.create(),d=this;a.computeGq=function(){return i.rotate(c,d.localOffsetB,e.angle),i.sub(p,t.position,e.position),i.sub(p,p,c),p[0]},l.computeGq=function(){return i.rotate(c,d.localOffsetB,e.angle),i.sub(p,t.position,e.position),i.sub(p,p,c),p[1]};var h=i.create(),f=i.create();u.computeGq=function(){return i.rotate(h,d.localOffsetB,t.angle-d.localAngleB),i.scale(h,h,-1),i.sub(p,e.position,t.position),i.add(p,p,h),i.rotate(f,h,-Math.PI/2),i.normalize(f,f),i.dot(p,f)},this.localOffsetB=i.create(),n.localOffsetB?i.copy(this.localOffsetB,n.localOffsetB):(i.sub(this.localOffsetB,t.position,e.position),i.rotate(this.localOffsetB,this.localOffsetB,-e.angle)),this.localAngleB=0,this.localAngleB="number"==typeof n.localAngleB?n.localAngleB:t.angle-e.angle,this.equations.push(a,l,u),this.setMaxForce(s)}var o=e("./Constraint"),i=e("../math/vec2"),r=e("../equations/Equation");t.exports=n,n.prototype=new o,n.prototype.setMaxForce=function(e){for(var t=this.equations,n=0;n<this.equations.length;n++)t[n].maxForce=e,t[n].minForce=-e},n.prototype.getMaxForce=function(){return this.equations[0].maxForce};var s=i.create(),a=i.create(),l=i.create(),u=i.fromValues(1,0),c=i.fromValues(0,1);n.prototype.update=function(){var e=this.equations[0],t=this.equations[1],n=this.equations[2],o=this.bodyA,r=this.bodyB;i.rotate(s,this.localOffsetB,o.angle),i.rotate(a,this.localOffsetB,r.angle-this.localAngleB),i.scale(a,a,-1),i.rotate(l,a,Math.PI/2),i.normalize(l,l),e.G[0]=-1,e.G[1]=0,e.G[2]=-i.crossLength(s,u),e.G[3]=1,t.G[0]=0,t.G[1]=-1,t.G[2]=-i.crossLength(s,c),t.G[4]=1,n.G[0]=-l[0],n.G[1]=-l[1],n.G[3]=l[0],n.G[4]=l[1],n.G[5]=i.crossLength(a,l)}},{"../equations/Equation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js","../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Constraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/Constraint.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/PrismaticConstraint.js":[function(e,t){function n(e,t,n){n=n||{},o.call(this,e,t,o.PRISMATIC,n);var l=s.fromValues(0,0),u=s.fromValues(1,0),c=s.fromValues(0,0);n.localAnchorA&&s.copy(l,n.localAnchorA),n.localAxisA&&s.copy(u,n.localAxisA),n.localAnchorB&&s.copy(c,n.localAnchorB),this.localAnchorA=l,this.localAnchorB=c,this.localAxisA=u;var p=this.maxForce="undefined"!=typeof n.maxForce?n.maxForce:Number.MAX_VALUE,d=new r(e,t,-p,p),h=new s.create,f=new s.create,v=new s.create,m=new s.create;if(d.computeGq=function(){return s.dot(v,m)},d.updateJacobian=function(){var n=this.G,o=e.position,i=t.position;s.rotate(h,l,e.angle),s.rotate(f,c,t.angle),s.add(v,i,f),s.sub(v,v,o),s.sub(v,v,h),s.rotate(m,u,e.angle+Math.PI/2),n[0]=-m[0],n[1]=-m[1],n[2]=-s.crossLength(h,m)+s.crossLength(m,v),n[3]=m[0],n[4]=m[1],n[5]=s.crossLength(f,m)},this.equations.push(d),!n.disableRotationalLock){var g=new a(e,t,-p,p);this.equations.push(g)}this.position=0,this.velocity=0,this.lowerLimitEnabled="undefined"!=typeof n.lowerLimit?!0:!1,this.upperLimitEnabled="undefined"!=typeof n.upperLimit?!0:!1,this.lowerLimit="undefined"!=typeof n.lowerLimit?n.lowerLimit:0,this.upperLimit="undefined"!=typeof n.upperLimit?n.upperLimit:1,this.upperLimitEquation=new i(e,t),this.lowerLimitEquation=new i(e,t),this.upperLimitEquation.minForce=this.lowerLimitEquation.minForce=0,this.upperLimitEquation.maxForce=this.lowerLimitEquation.maxForce=p,this.motorEquation=new r(e,t),this.motorEnabled=!1,this.motorSpeed=0;{var y=this,b=this.motorEquation;b.computeGW}b.computeGq=function(){return 0},b.computeGW=function(){var e=this.G,t=this.bodyA,n=this.bodyB,o=t.velocity,i=n.velocity,r=t.angularVelocity,s=n.angularVelocity;return this.gmult(e,o,r,i,s)+y.motorSpeed}}var o=e("./Constraint"),i=e("../equations/ContactEquation"),r=e("../equations/Equation"),s=e("../math/vec2"),a=e("../equations/RotationalLockEquation");t.exports=n,n.prototype=new o;var l=s.create(),u=s.create(),c=s.create(),p=s.create(),d=s.create(),h=s.create();n.prototype.update=function(){var e=this.equations,t=e[0],n=this.upperLimit,o=this.lowerLimit,i=this.upperLimitEquation,r=this.lowerLimitEquation,a=this.bodyA,f=this.bodyB,v=this.localAxisA,m=this.localAnchorA,g=this.localAnchorB;t.updateJacobian(),s.rotate(l,v,a.angle),s.rotate(p,m,a.angle),s.add(u,p,a.position),s.rotate(d,g,f.angle),s.add(c,d,f.position);var y=this.position=s.dot(c,l)-s.dot(u,l);if(this.motorEnabled){var b=this.motorEquation.G;b[0]=l[0],b[1]=l[1],b[2]=s.crossLength(l,d),b[3]=-l[0],b[4]=-l[1],b[5]=-s.crossLength(l,p)}if(this.upperLimitEnabled&&y>n)s.scale(i.normalA,l,-1),s.sub(i.contactPointA,u,a.position),s.sub(i.contactPointB,c,f.position),s.scale(h,l,n),s.add(i.contactPointA,i.contactPointA,h),-1===e.indexOf(i)&&e.push(i);else{var j=e.indexOf(i);-1!==j&&e.splice(j,1)}if(this.lowerLimitEnabled&&o>y)s.scale(r.normalA,l,1),s.sub(r.contactPointA,u,a.position),s.sub(r.contactPointB,c,f.position),s.scale(h,l,o),s.sub(r.contactPointB,r.contactPointB,h),-1===e.indexOf(r)&&e.push(r);else{var j=e.indexOf(r);-1!==j&&e.splice(j,1)}},n.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},n.prototype.disableMotor=function(){if(this.motorEnabled){var e=this.equations.indexOf(this.motorEquation);this.equations.splice(e,1),this.motorEnabled=!1}},n.prototype.setLimits=function(e,t){"number"==typeof e?(this.lowerLimit=e,this.lowerLimitEnabled=!0):(this.lowerLimit=e,this.lowerLimitEnabled=!1),"number"==typeof t?(this.upperLimit=t,this.upperLimitEnabled=!0):(this.upperLimit=t,this.upperLimitEnabled=!1)}},{"../equations/ContactEquation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/ContactEquation.js","../equations/Equation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js","../equations/RotationalLockEquation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/RotationalLockEquation.js","../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Constraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/Constraint.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/RevoluteConstraint.js":[function(e,t){function n(e,t,n){n=n||{},o.call(this,e,t,o.REVOLUTE,n);var h=this.maxForce="undefined"!=typeof n.maxForce?n.maxForce:Number.MAX_VALUE;this.pivotA=a.create(),this.pivotB=a.create(),n.worldPivot?(a.sub(this.pivotA,n.worldPivot,e.position),a.sub(this.pivotB,n.worldPivot,t.position),a.rotate(this.pivotA,this.pivotA,-e.angle),a.rotate(this.pivotB,this.pivotB,-t.angle)):(a.copy(this.pivotA,n.localPivotA),a.copy(this.pivotB,n.localPivotB));var f=this.equations=[new i(e,t,-h,h),new i(e,t,-h,h)],v=f[0],m=f[1],g=this;v.computeGq=function(){return a.rotate(l,g.pivotA,e.angle),a.rotate(u,g.pivotB,t.angle),a.add(d,t.position,u),a.sub(d,d,e.position),a.sub(d,d,l),a.dot(d,c)},m.computeGq=function(){return a.rotate(l,g.pivotA,e.angle),a.rotate(u,g.pivotB,t.angle),a.add(d,t.position,u),a.sub(d,d,e.position),a.sub(d,d,l),a.dot(d,p)},m.minForce=v.minForce=-h,m.maxForce=v.maxForce=h,this.motorEquation=new r(e,t),this.motorEnabled=!1,this.angle=0,this.lowerLimitEnabled=!1,this.upperLimitEnabled=!1,this.lowerLimit=0,this.upperLimit=0,this.upperLimitEquation=new s(e,t),this.lowerLimitEquation=new s(e,t),this.upperLimitEquation.minForce=0,this.lowerLimitEquation.maxForce=0}var o=e("./Constraint"),i=e("../equations/Equation"),r=e("../equations/RotationalVelocityEquation"),s=e("../equations/RotationalLockEquation"),a=e("../math/vec2");t.exports=n;var l=a.create(),u=a.create(),c=a.fromValues(1,0),p=a.fromValues(0,1),d=a.create();n.prototype=new o,n.prototype.setLimits=function(e,t){"number"==typeof e?(this.lowerLimit=e,this.lowerLimitEnabled=!0):(this.lowerLimit=e,this.lowerLimitEnabled=!1),"number"==typeof t?(this.upperLimit=t,this.upperLimitEnabled=!0):(this.upperLimit=t,this.upperLimitEnabled=!1)},n.prototype.update=function(){var e=this.bodyA,t=this.bodyB,n=this.pivotA,o=this.pivotB,i=this.equations,r=(i[0],i[1],i[0]),s=i[1],d=this.upperLimit,h=this.lowerLimit,f=this.upperLimitEquation,v=this.lowerLimitEquation,m=this.angle=t.angle-e.angle;if(this.upperLimitEnabled&&m>d)f.angle=d,-1===i.indexOf(f)&&i.push(f);else{var g=i.indexOf(f);-1!==g&&i.splice(g,1)}if(this.lowerLimitEnabled&&h>m)v.angle=h,-1===i.indexOf(v)&&i.push(v);else{var g=i.indexOf(v);-1!==g&&i.splice(g,1)}a.rotate(l,n,e.angle),a.rotate(u,o,t.angle),r.G[0]=-1,r.G[1]=0,r.G[2]=-a.crossLength(l,c),r.G[3]=1,r.G[4]=0,r.G[5]=a.crossLength(u,c),s.G[0]=0,s.G[1]=-1,s.G[2]=-a.crossLength(l,p),s.G[3]=0,s.G[4]=1,s.G[5]=a.crossLength(u,p)},n.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},n.prototype.disableMotor=function(){if(this.motorEnabled){var e=this.equations.indexOf(this.motorEquation);this.equations.splice(e,1),this.motorEnabled=!1}},n.prototype.motorIsEnabled=function(){return!!this.motorEnabled},n.prototype.setMotorSpeed=function(e){if(this.motorEnabled){var t=this.equations.indexOf(this.motorEquation);this.equations[t].relativeVelocity=e}},n.prototype.getMotorSpeed=function(){return this.motorEnabled?this.motorEquation.relativeVelocity:!1}},{"../equations/Equation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js","../equations/RotationalLockEquation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/RotationalLockEquation.js","../equations/RotationalVelocityEquation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/RotationalVelocityEquation.js","../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Constraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/Constraint.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/AngleLockEquation.js":[function(e,t){function n(e,t,n){n=n||{},o.call(this,e,t,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=n.angle||0,this.ratio="number"==typeof n.ratio?n.ratio:1,this.setRatio(this.ratio)}{var o=e("./Equation");e("../math/vec2")}t.exports=n,n.prototype=new o,n.prototype.constructor=n,n.prototype.computeGq=function(){return this.ratio*this.bodyA.angle-this.bodyB.angle+this.angle},n.prototype.setRatio=function(e){var t=this.G;t[2]=e,t[5]=-1,this.ratio=e},n.prototype.setMaxTorque=function(e){this.maxForce=e,this.minForce=-e}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Equation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/ContactEquation.js":[function(e,t){function n(e,t){o.call(this,e,t,0,Number.MAX_VALUE),this.contactPointA=i.create(),this.penetrationVec=i.create(),this.contactPointB=i.create(),this.normalA=i.create(),this.restitution=0,this.firstImpact=!1,this.shapeA=null,this.shapeB=null}var o=e("./Equation"),i=e("../math/vec2");t.exports=n,n.prototype=new o,n.prototype.constructor=n,n.prototype.computeB=function(e,t,n){var o=this.bodyA,r=this.bodyB,s=this.contactPointA,a=this.contactPointB,l=o.position,u=r.position,c=this.penetrationVec,p=this.normalA,d=this.G,h=i.crossLength(s,p),f=i.crossLength(a,p);d[0]=-p[0],d[1]=-p[1],d[2]=-h,d[3]=p[0],d[4]=p[1],d[5]=f,i.add(c,u,a),i.sub(c,c,l),i.sub(c,c,s);var v,m;this.firstImpact&&0!==this.restitution?(m=0,v=1/t*(1+this.restitution)*this.computeGW()):(m=i.dot(p,c)+this.offset,v=this.computeGW());var g=this.computeGiMf(),y=-m*e-v*t-n*g;return y}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Equation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js":[function(e,t){function n(e,t,o,r){this.minForce="undefined"==typeof o?-Number.MAX_VALUE:o,this.maxForce="undefined"==typeof r?Number.MAX_VALUE:r,this.bodyA=e,this.bodyB=t,this.stiffness=n.DEFAULT_STIFFNESS,this.relaxation=n.DEFAULT_RELAXATION,this.G=new i.ARRAY_TYPE(6);for(var s=0;6>s;s++)this.G[s]=0;this.offset=0,this.a=0,this.b=0,this.epsilon=0,this.timeStep=1/60,this.needsUpdate=!0,this.multiplier=0,this.relativeVelocity=0,this.enabled=!0}t.exports=n;{var o=e("../math/vec2"),i=e("../utils/Utils");e("../objects/Body")}n.prototype.constructor=n,n.DEFAULT_STIFFNESS=1e6,n.DEFAULT_RELAXATION=4,n.prototype.update=function(){var e=this.stiffness,t=this.relaxation,n=this.timeStep;this.a=4/(n*(1+4*t)),this.b=4*t/(1+4*t),this.epsilon=4/(n*n*e*(1+4*t)),this.needsUpdate=!1},n.prototype.gmult=function(e,t,n,o,i){return e[0]*t[0]+e[1]*t[1]+e[2]*n+e[3]*o[0]+e[4]*o[1]+e[5]*i},n.prototype.computeB=function(e,t,n){var o=this.computeGW(),i=this.computeGq(),r=this.computeGiMf();return-i*e-o*t-r*n};var r=o.create(),s=o.create();n.prototype.computeGq=function(){var e=this.G,t=this.bodyA,n=this.bodyB,o=(t.position,n.position,t.angle),i=n.angle;return this.gmult(e,r,o,s,i)+this.offset},n.prototype.computeGW=function(){var e=this.G,t=this.bodyA,n=this.bodyB,o=t.velocity,i=n.velocity,r=t.angularVelocity,s=n.angularVelocity;return this.gmult(e,o,r,i,s)+this.relativeVelocity},n.prototype.computeGWlambda=function(){var e=this.G,t=this.bodyA,n=this.bodyB,o=t.vlambda,i=n.vlambda,r=t.wlambda,s=n.wlambda;return this.gmult(e,o,r,i,s)};var a=o.create(),l=o.create();n.prototype.computeGiMf=function(){var e=this.bodyA,t=this.bodyB,n=e.force,i=e.angularForce,r=t.force,s=t.angularForce,u=e.invMassSolve,c=t.invMassSolve,p=e.invInertiaSolve,d=t.invInertiaSolve,h=this.G;return o.scale(a,n,u),o.scale(l,r,c),this.gmult(h,a,i*p,l,s*d)},n.prototype.computeGiMGt=function(){var e=this.bodyA,t=this.bodyB,n=e.invMassSolve,o=t.invMassSolve,i=e.invInertiaSolve,r=t.invInertiaSolve,s=this.G;return s[0]*s[0]*n+s[1]*s[1]*n+s[2]*s[2]*i+s[3]*s[3]*o+s[4]*s[4]*o+s[5]*s[5]*r};{var u=o.create(),c=o.create(),p=o.create();o.create(),o.create(),o.create()}n.prototype.addToWlambda=function(e){var t=this.bodyA,n=this.bodyB,i=u,r=c,s=p,a=t.invMassSolve,l=n.invMassSolve,d=t.invInertiaSolve,h=n.invInertiaSolve,f=this.G;r[0]=f[0],r[1]=f[1],s[0]=f[3],s[1]=f[4],o.scale(i,r,a*e),o.add(t.vlambda,t.vlambda,i),t.wlambda+=d*f[2]*e,o.scale(i,s,l*e),o.add(n.vlambda,n.vlambda,i),n.wlambda+=h*f[5]*e},n.prototype.computeInvC=function(e){return 1/(this.computeGiMGt()+e)}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../objects/Body":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/Body.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/FrictionEquation.js":[function(e,t){function n(e,t,n){i.call(this,e,t,-n,n),this.contactPointA=o.create(),this.contactPointB=o.create(),this.t=o.create(),this.contactEquations=[],this.shapeA=null,this.shapeB=null,this.frictionCoefficient=.3}{var o=e("../math/vec2"),i=e("./Equation");e("../utils/Utils")}t.exports=n,n.prototype=new i,n.prototype.constructor=n,n.prototype.setSlipForce=function(e){this.maxForce=e,this.minForce=-e},n.prototype.getSlipForce=function(){return this.maxForce},n.prototype.computeB=function(e,t,n){var i=(this.bodyA,this.bodyB,this.contactPointA),r=this.contactPointB,s=this.t,a=this.G;a[0]=-s[0],a[1]=-s[1],a[2]=-o.crossLength(i,s),a[3]=s[0],a[4]=s[1],a[5]=o.crossLength(r,s);var l=this.computeGW(),u=this.computeGiMf(),c=-l*t-n*u;return c}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js","./Equation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/RotationalLockEquation.js":[function(e,t){function n(e,t,n){n=n||{},o.call(this,e,t,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=n.angle||0;var i=this.G;i[2]=1,i[5]=-1}var o=e("./Equation"),i=e("../math/vec2");t.exports=n,n.prototype=new o,n.prototype.constructor=n;var r=i.create(),s=i.create(),a=i.fromValues(1,0),l=i.fromValues(0,1);n.prototype.computeGq=function(){return i.rotate(r,a,this.bodyA.angle+this.angle),i.rotate(s,l,this.bodyB.angle),i.dot(r,s)}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Equation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/RotationalVelocityEquation.js":[function(e,t){function n(e,t){o.call(this,e,t,-Number.MAX_VALUE,Number.MAX_VALUE),this.relativeVelocity=1,this.ratio=1}{var o=e("./Equation");e("../math/vec2")}t.exports=n,n.prototype=new o,n.prototype.constructor=n,n.prototype.computeB=function(e,t,n){var o=this.G;o[2]=-1,o[5]=this.ratio;var i=this.computeGiMf(),r=this.computeGW(),s=-r*t-n*i;return s}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Equation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/events/EventEmitter.js":[function(e,t){var n=function(){};t.exports=n,n.prototype={constructor:n,on:function(e,t,n){t.context=n||this,void 0===this._listeners&&(this._listeners={});var o=this._listeners;return void 0===o[e]&&(o[e]=[]),-1===o[e].indexOf(t)&&o[e].push(t),this},has:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;if(t){if(void 0!==n[e]&&-1!==n[e].indexOf(t))return!0}else if(void 0!==n[e])return!0;return!1},off:function(e,t){if(void 0===this._listeners)return this;var n=this._listeners,o=n[e].indexOf(t);return-1!==o&&n[e].splice(o,1),this},emit:function(e){if(void 0===this._listeners)return this;var t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;for(var o=0,i=n.length;i>o;o++){var r=n[o];r.call(r.context,e)}}return this}}},{}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/material/ContactMaterial.js":[function(e,t){function n(e,t,r){if(r=r||{},!(e instanceof o&&t instanceof o))throw new Error("First two arguments must be Material instances.");this.id=n.idCounter++,this.materialA=e,this.materialB=t,this.friction="undefined"!=typeof r.friction?Number(r.friction):.3,this.restitution="undefined"!=typeof r.restitution?Number(r.restitution):0,this.stiffness="undefined"!=typeof r.stiffness?Number(r.stiffness):i.DEFAULT_STIFFNESS,this.relaxation="undefined"!=typeof r.relaxation?Number(r.relaxation):i.DEFAULT_RELAXATION,this.frictionStiffness="undefined"!=typeof r.frictionStiffness?Number(r.frictionStiffness):i.DEFAULT_STIFFNESS,this.frictionRelaxation="undefined"!=typeof r.frictionRelaxation?Number(r.frictionRelaxation):i.DEFAULT_RELAXATION,this.surfaceVelocity="undefined"!=typeof r.surfaceVelocity?Number(r.surfaceVelocity):0,this.contactSkinSize=.005}var o=e("./Material"),i=e("../equations/Equation");t.exports=n,n.idCounter=0},{"../equations/Equation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js","./Material":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/material/Material.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/material/Material.js":[function(e,t){function n(e){this.id=e||n.idCounter++}t.exports=n,n.idCounter=0},{}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/polyk.js":[function(e,t){var n={};n.GetArea=function(e){if(e.length<6)return 0;for(var t=e.length-2,n=0,o=0;t>o;o+=2)n+=(e[o+2]-e[o])*(e[o+1]+e[o+3]);return n+=(e[0]-e[t])*(e[t+1]+e[1]),.5*-n},n.Triangulate=function(e){var t=e.length>>1;if(3>t)return[];for(var o=[],i=[],r=0;t>r;r++)i.push(r);for(var r=0,s=t;s>3;){var a=i[(r+0)%s],l=i[(r+1)%s],u=i[(r+2)%s],c=e[2*a],p=e[2*a+1],d=e[2*l],h=e[2*l+1],f=e[2*u],v=e[2*u+1],m=!1;if(n._convex(c,p,d,h,f,v)){m=!0;
for(var g=0;s>g;g++){var y=i[g];if(y!=a&&y!=l&&y!=u&&n._PointInTriangle(e[2*y],e[2*y+1],c,p,d,h,f,v)){m=!1;break}}}if(m)o.push(a,l,u),i.splice((r+1)%s,1),s--,r=0;else if(r++>3*s)break}return o.push(i[0],i[1],i[2]),o},n._PointInTriangle=function(e,t,n,o,i,r,s,a){var l=s-n,u=a-o,c=i-n,p=r-o,d=e-n,h=t-o,f=l*l+u*u,v=l*c+u*p,m=l*d+u*h,g=c*c+p*p,y=c*d+p*h,b=1/(f*g-v*v),j=(g*m-v*y)*b,E=(f*y-v*m)*b;return j>=0&&E>=0&&1>j+E},n._convex=function(e,t,n,o,i,r){return(t-o)*(i-n)+(n-e)*(r-o)>=0},t.exports=n},{}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js":[function(e,t){var n=t.exports={},o=e("../utils/Utils");n.crossLength=function(e,t){return e[0]*t[1]-e[1]*t[0]},n.crossVZ=function(e,t,o){return n.rotate(e,t,-Math.PI/2),n.scale(e,e,o),e},n.crossZV=function(e,t,o){return n.rotate(e,o,Math.PI/2),n.scale(e,e,t),e},n.rotate=function(e,t,n){if(0!==n){var o=Math.cos(n),i=Math.sin(n),r=t[0],s=t[1];e[0]=o*r-i*s,e[1]=i*r+o*s}else e[0]=t[0],e[1]=t[1]},n.rotate90cw=function(e,t){var n=t[0],o=t[1];e[0]=o,e[1]=-n},n.toLocalFrame=function(e,t,o,i){n.copy(e,t),n.sub(e,e,o),n.rotate(e,e,-i)},n.toGlobalFrame=function(e,t,o,i){n.copy(e,t),n.rotate(e,e,i),n.add(e,e,o)},n.centroid=function(e,t,o,i){return n.add(e,t,o),n.add(e,e,i),n.scale(e,e,1/3),e},n.create=function(){var e=new o.ARRAY_TYPE(2);return e[0]=0,e[1]=0,e},n.clone=function(e){var t=new o.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},n.fromValues=function(e,t){var n=new o.ARRAY_TYPE(2);return n[0]=e,n[1]=t,n},n.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},n.set=function(e,t,n){return e[0]=t,e[1]=n,e},n.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},n.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},n.sub=n.subtract,n.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},n.mul=n.multiply,n.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},n.div=n.divide,n.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},n.distance=function(e,t){var n=t[0]-e[0],o=t[1]-e[1];return Math.sqrt(n*n+o*o)},n.dist=n.distance,n.squaredDistance=function(e,t){var n=t[0]-e[0],o=t[1]-e[1];return n*n+o*o},n.sqrDist=n.squaredDistance,n.length=function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)},n.len=n.length,n.squaredLength=function(e){var t=e[0],n=e[1];return t*t+n*n},n.sqrLen=n.squaredLength,n.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},n.normalize=function(e,t){var n=t[0],o=t[1],i=n*n+o*o;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e},n.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},n.str=function(e){return"vec2("+e[0]+", "+e[1]+")"}},{"../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/Body.js":[function(e,t){function n(e){e=e||{},a.call(this),this.id=++n._idCounter,this.world=null,this.shapes=[],this.shapeOffsets=[],this.shapeAngles=[],this.mass=e.mass||0,this.invMass=0,this.inertia=0,this.invInertia=0,this.invMassSolve=0,this.invInertiaSolve=0,this.fixedRotation=!!e.fixedRotation||!1,this.position=o.fromValues(0,0),e.position&&o.copy(this.position,e.position),this.interpolatedPosition=o.fromValues(0,0),this.interpolatedAngle=0,this.previousPosition=o.fromValues(0,0),this.previousAngle=0,this.velocity=o.fromValues(0,0),e.velocity&&o.copy(this.velocity,e.velocity),this.vlambda=o.fromValues(0,0),this.wlambda=0,this.angle=e.angle||0,this.angularVelocity=e.angularVelocity||0,this.force=o.create(),e.force&&o.copy(this.force,e.force),this.angularForce=e.angularForce||0,this.damping="number"==typeof e.damping?e.damping:.1,this.angularDamping="number"==typeof e.angularDamping?e.angularDamping:.1,this.type=n.STATIC,this.type="undefined"!=typeof e.type?e.type:e.mass?n.DYNAMIC:n.STATIC,this.boundingRadius=0,this.aabb=new s,this.aabbNeedsUpdate=!0,this.allowSleep=!0,this.wantsToSleep=!1,this.sleepState=n.AWAKE,this.sleepSpeedLimit=.2,this.sleepTimeLimit=1,this.gravityScale=1,this.timeLastSleepy=0,this.concavePath=null,this.lastDampingScale=1,this.lastAngularDampingScale=1,this.lastDampingTimeStep=-1,this._wakeUpAfterNarrowphase=!1,this.updateMassProperties()}var o=e("../math/vec2"),i=e("poly-decomp"),r=e("../shapes/Convex"),s=e("../collision/AABB"),a=e("../events/EventEmitter");t.exports=n,n.prototype=new a,n._idCounter=0,n.prototype.updateSolveMassProperties=function(){this.sleepState===n.SLEEPING||this.type===n.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve=0):(this.invMassSolve=this.invMass,this.invInertiaSolve=this.invInertia)},n.prototype.setDensity=function(e){var t=this.getArea();this.mass=t*e,this.updateMassProperties()},n.prototype.getArea=function(){for(var e=0,t=0;t<this.shapes.length;t++)e+=this.shapes[t].area;return e},n.prototype.getAABB=function(){return this.aabbNeedsUpdate&&this.updateAABB(),this.aabb};var l=new s,u=o.create();n.prototype.updateAABB=function(){for(var e=this.shapes,t=this.shapeOffsets,n=this.shapeAngles,i=e.length,r=u,s=this.angle,a=0;a!==i;a++){var c=e[a],p=n[a]+s;o.rotate(r,t[a],s),o.add(r,r,this.position),c.computeAABB(l,r,p),0===a?this.aabb.copy(l):this.aabb.extend(l)}this.aabbNeedsUpdate=!1},n.prototype.updateBoundingRadius=function(){for(var e=this.shapes,t=this.shapeOffsets,n=e.length,i=0,r=0;r!==n;r++){var s=e[r],a=o.length(t[r]),l=s.boundingRadius;a+l>i&&(i=a+l)}this.boundingRadius=i},n.prototype.addShape=function(e,t,n){n=n||0,t=t?o.fromValues(t[0],t[1]):o.fromValues(0,0),this.shapes.push(e),this.shapeOffsets.push(t),this.shapeAngles.push(n),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0},n.prototype.removeShape=function(e){var t=this.shapes.indexOf(e);return-1!==t?(this.shapes.splice(t,1),this.shapeOffsets.splice(t,1),this.shapeAngles.splice(t,1),this.aabbNeedsUpdate=!0,!0):!1},n.prototype.updateMassProperties=function(){if(this.type===n.STATIC||this.type===n.KINEMATIC)this.mass=Number.MAX_VALUE,this.invMass=0,this.inertia=Number.MAX_VALUE,this.invInertia=0;else{var e=this.shapes,t=e.length,i=this.mass/t,r=0;if(this.fixedRotation)this.inertia=Number.MAX_VALUE,this.invInertia=0;else{for(var s=0;t>s;s++){var a=e[s],l=o.squaredLength(this.shapeOffsets[s]),u=a.computeMomentOfInertia(i);r+=u+i*l}this.inertia=r,this.invInertia=r>0?1/r:0}this.invMass=1/this.mass}};var c=o.create();n.prototype.applyForce=function(e,t){var n=c;o.sub(n,t,this.position),o.add(this.force,this.force,e);var i=o.crossLength(n,e);this.angularForce+=i},n.prototype.toLocalFrame=function(e,t){o.toLocalFrame(e,t,this.position,this.angle)},n.prototype.toWorldFrame=function(e,t){o.toGlobalFrame(e,t,this.position,this.angle)},n.prototype.fromPolygon=function(e,t){t=t||{};for(var n=this.shapes.length;n>=0;--n)this.removeShape(this.shapes[n]);var s=new i.Polygon;if(s.vertices=e,s.makeCCW(),"number"==typeof t.removeCollinearPoints&&s.removeCollinearPoints(t.removeCollinearPoints),"undefined"==typeof t.skipSimpleCheck&&!s.isSimple())return!1;this.concavePath=s.vertices.slice(0);for(var n=0;n<this.concavePath.length;n++){var a=[0,0];o.copy(a,this.concavePath[n]),this.concavePath[n]=a}var l;l=t.optimalDecomp?s.decomp():s.quickDecomp();for(var u=o.create(),n=0;n!==l.length;n++){for(var c=new r(l[n].vertices),p=0;p!==c.vertices.length;p++){var a=c.vertices[p];o.sub(a,a,c.centerOfMass)}o.scale(u,c.centerOfMass,1),c.updateTriangles(),c.updateCenterOfMass(),c.updateBoundingRadius(),this.addShape(c,u)}return this.adjustCenterOfMass(),this.aabbNeedsUpdate=!0,!0};var p=(o.fromValues(0,0),o.fromValues(0,0)),d=o.fromValues(0,0),h=o.fromValues(0,0);n.prototype.adjustCenterOfMass=function(){var e=p,t=d,n=h,i=0;o.set(t,0,0);for(var r=0;r!==this.shapes.length;r++){var s=this.shapes[r],a=this.shapeOffsets[r];o.scale(e,a,s.area),o.add(t,t,e),i+=s.area}o.scale(n,t,1/i);for(var r=0;r!==this.shapes.length;r++){var s=this.shapes[r],a=this.shapeOffsets[r];a||(a=this.shapeOffsets[r]=o.create()),o.sub(a,a,n)}o.add(this.position,this.position,n);for(var r=0;this.concavePath&&r<this.concavePath.length;r++)o.sub(this.concavePath[r],this.concavePath[r],n);this.updateMassProperties(),this.updateBoundingRadius()},n.prototype.setZeroForce=function(){o.set(this.force,0,0),this.angularForce=0},n.prototype.resetConstraintVelocity=function(){var e=this,t=e.vlambda;o.set(t,0,0),e.wlambda=0},n.prototype.addConstraintVelocity=function(){var e=this,t=e.velocity;o.add(t,t,e.vlambda),e.angularVelocity+=e.wlambda},n.prototype.applyDamping=function(e){if(this.type===n.DYNAMIC){e!==this.lastDampingTimeStep&&(this.lastDampingScale=Math.pow(1-this.damping,e),this.lastAngularDampingScale=Math.pow(1-this.angularDamping,e),this.lastDampingTimeStep=e);var t=this.velocity;o.scale(t,t,this.lastDampingScale),this.angularVelocity*=this.lastAngularDampingScale}},n.prototype.wakeUp=function(){var e=this.sleepState;this.sleepState=n.AWAKE,this.idleTime=0,e!==n.AWAKE&&this.emit(n.wakeUpEvent)},n.prototype.sleep=function(){this.sleepState=n.SLEEPING,this.angularVelocity=0,this.angularForce=0,o.set(this.velocity,0,0),o.set(this.force,0,0),this.emit(n.sleepEvent)},n.prototype.sleepTick=function(e,t,i){if(this.allowSleep&&this.type!==n.SLEEPING){this.wantsToSleep=!1;var r=(this.sleepState,o.squaredLength(this.velocity)+Math.pow(this.angularVelocity,2)),s=Math.pow(this.sleepSpeedLimit,2);r>=s?(this.idleTime=0,this.sleepState=n.AWAKE):(this.idleTime+=i,this.sleepState=n.SLEEPY),this.idleTime>this.sleepTimeLimit&&(t?this.wantsToSleep=!0:this.sleep())}},n.prototype.getVelocityFromPosition=function(e,t){return e=e||o.create(),o.sub(e,this.position,this.previousPosition),o.scale(e,e,1/t),e},n.prototype.getAngularVelocityFromPosition=function(e){return(this.angle-this.previousAngle)/e},n.prototype.overlaps=function(e){return this.world.overlapKeeper.bodiesAreOverlapping(this,e)},n.sleepyEvent={type:"sleepy"},n.sleepEvent={type:"sleep"},n.wakeUpEvent={type:"wakeup"},n.DYNAMIC=1,n.STATIC=2,n.KINEMATIC=4,n.AWAKE=0,n.SLEEPY=1,n.SLEEPING=2},{"../collision/AABB":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/AABB.js","../events/EventEmitter":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/events/EventEmitter.js","../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../shapes/Convex":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Convex.js","poly-decomp":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/node_modules/poly-decomp/src/index.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/LinearSpring.js":[function(e,t){function n(e,t,n){n=n||{},i.call(this,e,t,n),this.localAnchorA=o.fromValues(0,0),this.localAnchorB=o.fromValues(0,0),n.localAnchorA&&o.copy(this.localAnchorA,n.localAnchorA),n.localAnchorB&&o.copy(this.localAnchorB,n.localAnchorB),n.worldAnchorA&&this.setWorldAnchorA(n.worldAnchorA),n.worldAnchorB&&this.setWorldAnchorB(n.worldAnchorB);var r=o.create(),s=o.create();this.getWorldAnchorA(r),this.getWorldAnchorB(s);var a=o.distance(r,s);this.restLength="number"==typeof n.restLength?n.restLength:a}{var o=e("../math/vec2"),i=e("./Spring");e("../utils/Utils")}t.exports=n,n.prototype=new i,n.prototype.setWorldAnchorA=function(e){this.bodyA.toLocalFrame(this.localAnchorA,e)},n.prototype.setWorldAnchorB=function(e){this.bodyB.toLocalFrame(this.localAnchorB,e)},n.prototype.getWorldAnchorA=function(e){this.bodyA.toWorldFrame(e,this.localAnchorA)},n.prototype.getWorldAnchorB=function(e){this.bodyB.toWorldFrame(e,this.localAnchorB)};var r=o.create(),s=o.create(),a=o.create(),l=o.create(),u=o.create(),c=o.create(),p=o.create(),d=o.create(),h=o.create();n.prototype.applyForce=function(){var e=this.stiffness,t=this.damping,n=this.restLength,i=this.bodyA,f=this.bodyB,v=r,m=s,g=a,y=l,b=h,j=u,E=c,w=p,x=d;this.getWorldAnchorA(j),this.getWorldAnchorB(E),o.sub(w,j,i.position),o.sub(x,E,f.position),o.sub(v,E,j);var A=o.len(v);o.normalize(m,v),o.sub(g,f.velocity,i.velocity),o.crossZV(b,f.angularVelocity,x),o.add(g,g,b),o.crossZV(b,i.angularVelocity,w),o.sub(g,g,b),o.scale(y,m,-e*(A-n)-t*o.dot(g,m)),o.sub(i.force,i.force,y),o.add(f.force,f.force,y);var S=o.crossLength(w,y),k=o.crossLength(x,y);i.angularForce-=S,f.angularForce+=k}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js","./Spring":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/Spring.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/RotationalSpring.js":[function(e,t){function n(e,t,n){n=n||{},o.call(this,e,t,n),this.restAngle="number"==typeof n.restAngle?n.restAngle:t.angle-e.angle}var o=(e("../math/vec2"),e("./Spring"));t.exports=n,n.prototype=new o,n.prototype.applyForce=function(){var e=this.stiffness,t=this.damping,n=this.restAngle,o=this.bodyA,i=this.bodyB,r=i.angle-o.angle,s=i.angularVelocity-o.angularVelocity,a=-e*(r-n)-t*s*0;o.angularForce-=a,i.angularForce+=a}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Spring":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/Spring.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/Spring.js":[function(e,t){function n(e,t,n){n=o.defaults(n,{stiffness:100,damping:1}),this.stiffness=n.stiffness,this.damping=n.damping,this.bodyA=e,this.bodyB=t}var o=(e("../math/vec2"),e("../utils/Utils"));t.exports=n,n.prototype.applyForce=function(){}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/p2.js":[function(e,t){t.exports={AABB:e("./collision/AABB"),AngleLockEquation:e("./equations/AngleLockEquation"),Body:e("./objects/Body"),Broadphase:e("./collision/Broadphase"),Capsule:e("./shapes/Capsule"),Circle:e("./shapes/Circle"),Constraint:e("./constraints/Constraint"),ContactEquation:e("./equations/ContactEquation"),ContactMaterial:e("./material/ContactMaterial"),Convex:e("./shapes/Convex"),DistanceConstraint:e("./constraints/DistanceConstraint"),Equation:e("./equations/Equation"),EventEmitter:e("./events/EventEmitter"),FrictionEquation:e("./equations/FrictionEquation"),GearConstraint:e("./constraints/GearConstraint"),GridBroadphase:e("./collision/GridBroadphase"),GSSolver:e("./solver/GSSolver"),Heightfield:e("./shapes/Heightfield"),Line:e("./shapes/Line"),LockConstraint:e("./constraints/LockConstraint"),Material:e("./material/Material"),Narrowphase:e("./collision/Narrowphase"),NaiveBroadphase:e("./collision/NaiveBroadphase"),Particle:e("./shapes/Particle"),Plane:e("./shapes/Plane"),RevoluteConstraint:e("./constraints/RevoluteConstraint"),PrismaticConstraint:e("./constraints/PrismaticConstraint"),Rectangle:e("./shapes/Rectangle"),RotationalVelocityEquation:e("./equations/RotationalVelocityEquation"),SAPBroadphase:e("./collision/SAPBroadphase"),Shape:e("./shapes/Shape"),Solver:e("./solver/Solver"),Spring:e("./objects/Spring"),LinearSpring:e("./objects/LinearSpring"),RotationalSpring:e("./objects/RotationalSpring"),Utils:e("./utils/Utils"),World:e("./world/World"),vec2:e("./math/vec2"),version:e("../package.json").version}},{"../package.json":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/package.json","./collision/AABB":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/AABB.js","./collision/Broadphase":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/Broadphase.js","./collision/GridBroadphase":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/GridBroadphase.js","./collision/NaiveBroadphase":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/NaiveBroadphase.js","./collision/Narrowphase":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/Narrowphase.js","./collision/SAPBroadphase":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/SAPBroadphase.js","./constraints/Constraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/Constraint.js","./constraints/DistanceConstraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/DistanceConstraint.js","./constraints/GearConstraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/GearConstraint.js","./constraints/LockConstraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/LockConstraint.js","./constraints/PrismaticConstraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/PrismaticConstraint.js","./constraints/RevoluteConstraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/RevoluteConstraint.js","./equations/AngleLockEquation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/AngleLockEquation.js","./equations/ContactEquation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/ContactEquation.js","./equations/Equation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js","./equations/FrictionEquation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/FrictionEquation.js","./equations/RotationalVelocityEquation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/RotationalVelocityEquation.js","./events/EventEmitter":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/events/EventEmitter.js","./material/ContactMaterial":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/material/ContactMaterial.js","./material/Material":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/material/Material.js","./math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./objects/Body":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/Body.js","./objects/LinearSpring":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/LinearSpring.js","./objects/RotationalSpring":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/RotationalSpring.js","./objects/Spring":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/Spring.js","./shapes/Capsule":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Capsule.js","./shapes/Circle":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Circle.js","./shapes/Convex":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Convex.js","./shapes/Heightfield":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Heightfield.js","./shapes/Line":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Line.js","./shapes/Particle":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Particle.js","./shapes/Plane":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Plane.js","./shapes/Rectangle":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Rectangle.js","./shapes/Shape":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Shape.js","./solver/GSSolver":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/solver/GSSolver.js","./solver/Solver":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/solver/Solver.js","./utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js","./world/World":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/world/World.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Capsule.js":[function(e,t){function n(e,t){this.length=e||1,this.radius=t||1,o.call(this,o.CAPSULE)}var o=e("./Shape"),i=e("../math/vec2");t.exports=n,n.prototype=new o,n.prototype.computeMomentOfInertia=function(e){var t=this.radius,n=this.length+t,o=2*t;return e*(o*o+n*n)/12},n.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius+this.length/2},n.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius+2*this.radius*this.length};var r=i.create();n.prototype.computeAABB=function(e,t,n){var o=this.radius;i.set(r,this.length/2,0),0!==n&&i.rotate(r,r,n),i.set(e.upperBound,Math.max(r[0]+o,-r[0]+o),Math.max(r[1]+o,-r[1]+o)),i.set(e.lowerBound,Math.min(r[0]-o,-r[0]-o),Math.min(r[1]-o,-r[1]-o)),i.add(e.lowerBound,e.lowerBound,t),i.add(e.upperBound,e.upperBound,t)}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Shape":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Shape.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Circle.js":[function(e,t){function n(e){this.radius=e||1,o.call(this,o.CIRCLE)}var o=e("./Shape"),i=e("../math/vec2");t.exports=n,n.prototype=new o,n.prototype.computeMomentOfInertia=function(e){var t=this.radius;return e*t*t/2},n.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius},n.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius},n.prototype.computeAABB=function(e,t){var n=this.radius;i.set(e.upperBound,n,n),i.set(e.lowerBound,-n,-n),t&&(i.add(e.lowerBound,e.lowerBound,t),i.add(e.upperBound,e.upperBound,t))}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Shape":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Shape.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Convex.js":[function(e,t){function n(e,t){this.vertices=[],this.axes=[];for(var n=0;n<e.length;n++){var r=i.create();i.copy(r,e[n]),this.vertices.push(r)}if(t)for(var n=0;n<t.length;n++){var s=i.create();i.copy(s,t[n]),this.axes.push(s)}else for(var n=0;n<e.length;n++){var a=e[n],l=e[(n+1)%e.length],u=i.create();i.sub(u,l,a),i.rotate90cw(u,u),i.normalize(u,u),this.axes.push(u)}if(this.centerOfMass=i.fromValues(0,0),this.triangles=[],this.vertices.length&&(this.updateTriangles(),this.updateCenterOfMass()),this.boundingRadius=0,o.call(this,o.CONVEX),this.updateBoundingRadius(),this.updateArea(),this.area<0)throw new Error("Convex vertices must be given in conter-clockwise winding.")}{var o=e("./Shape"),i=e("../math/vec2"),r=e("../math/polyk");e("poly-decomp")}t.exports=n,n.prototype=new o;var s=i.create(),a=i.create();n.prototype.projectOntoLocalAxis=function(e,t){for(var n,o,r=null,a=null,e=s,l=0;l<this.vertices.length;l++)n=this.vertices[l],o=i.dot(n,e),(null===r||o>r)&&(r=o),(null===a||a>o)&&(a=o);if(a>r){var u=a;a=r,r=u}i.set(t,a,r)},n.prototype.projectOntoWorldAxis=function(e,t,n,o){var r=a;this.projectOntoLocalAxis(e,o),0!==n?i.rotate(r,e,n):r=e;var s=i.dot(t,r);i.set(o,o[0]+s,o[1]+s)},n.prototype.updateTriangles=function(){this.triangles.length=0;for(var e=[],t=0;t<this.vertices.length;t++){var n=this.vertices[t];e.push(n[0],n[1])}for(var o=r.Triangulate(e),t=0;t<o.length;t+=3){var i=o[t],s=o[t+1],a=o[t+2];this.triangles.push([i,s,a])}};{var l=i.create(),u=i.create(),c=i.create(),p=i.create(),d=i.create();i.create(),i.create(),i.create(),i.create()}n.prototype.updateCenterOfMass=function(){var e=this.triangles,t=this.vertices,o=this.centerOfMass,r=l,s=c,a=p,h=d,f=u;i.set(o,0,0);for(var v=0,m=0;m!==e.length;m++){var g=e[m],s=t[g[0]],a=t[g[1]],h=t[g[2]];i.centroid(r,s,a,h);var y=n.triangleArea(s,a,h);v+=y,i.scale(f,r,y),i.add(o,o,f)}i.scale(o,o,1/v)},n.prototype.computeMomentOfInertia=function(e){for(var t=0,n=0,o=this.vertices.length,r=o-1,s=0;o>s;r=s,s++){var a=this.vertices[r],l=this.vertices[s],u=Math.abs(i.crossLength(a,l)),c=i.dot(l,l)+i.dot(l,a)+i.dot(a,a);t+=u*c,n+=u}return e/6*(t/n)},n.prototype.updateBoundingRadius=function(){for(var e=this.vertices,t=0,n=0;n!==e.length;n++){var o=i.squaredLength(e[n]);o>t&&(t=o)}this.boundingRadius=Math.sqrt(t)},n.triangleArea=function(e,t,n){return.5*((t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1]))},n.prototype.updateArea=function(){this.updateTriangles(),this.area=0;for(var e=this.triangles,t=this.vertices,o=0;o!==e.length;o++){var i=e[o],r=t[i[0]],s=t[i[1]],a=t[i[2]],l=n.triangleArea(r,s,a);this.area+=l}},n.prototype.computeAABB=function(e,t,n){e.setFromPoints(this.vertices,t,n,0)}},{"../math/polyk":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/polyk.js","../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Shape":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Shape.js","poly-decomp":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/node_modules/poly-decomp/src/index.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Heightfield.js":[function(e,t){function n(e,t){if(t=i.defaults(t,{maxValue:null,minValue:null,elementWidth:.1}),null===t.minValue||null===t.maxValue){t.maxValue=e[0],t.minValue=e[0];for(var n=0;n!==e.length;n++){var r=e[n];r>t.maxValue&&(t.maxValue=r),r<t.minValue&&(t.minValue=r)}}this.data=e,this.maxValue=t.maxValue,this.minValue=t.minValue,this.elementWidth=t.elementWidth,o.call(this,o.HEIGHTFIELD)}var o=e("./Shape"),i=(e("../math/vec2"),e("../utils/Utils"));t.exports=n,n.prototype=new o,n.prototype.computeMomentOfInertia=function(){return Number.MAX_VALUE},n.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},n.prototype.updateArea=function(){for(var e=this.data,t=0,n=0;n<e.length-1;n++)t+=(e[n]+e[n+1])/2*this.elementWidth;this.area=t},n.prototype.computeAABB=function(e,t){e.upperBound[0]=this.elementWidth*this.data.length+t[0],e.upperBound[1]=this.maxValue+t[1],e.lowerBound[0]=t[0],e.lowerBound[1]=-Number.MAX_VALUE}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js","./Shape":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Shape.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Line.js":[function(e,t){function n(e){this.length=e||1,o.call(this,o.LINE)}var o=e("./Shape"),i=e("../math/vec2");t.exports=n,n.prototype=new o,n.prototype.computeMomentOfInertia=function(e){return e*Math.pow(this.length,2)/12},n.prototype.updateBoundingRadius=function(){this.boundingRadius=this.length/2};var r=[i.create(),i.create()];n.prototype.computeAABB=function(e,t,n){var o=this.length/2;i.set(r[0],-o,0),i.set(r[1],o,0),e.setFromPoints(r,t,n,0)}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Shape":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Shape.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Particle.js":[function(e,t){function n(){o.call(this,o.PARTICLE)}var o=e("./Shape"),i=e("../math/vec2");t.exports=n,n.prototype=new o,n.prototype.computeMomentOfInertia=function(){return 0},n.prototype.updateBoundingRadius=function(){this.boundingRadius=0},n.prototype.computeAABB=function(e,t){i.copy(e.lowerBound,t),i.copy(e.upperBound,t)}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Shape":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Shape.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Plane.js":[function(e,t){function n(){o.call(this,o.PLANE)}{var o=e("./Shape"),i=e("../math/vec2");e("../utils/Utils")}t.exports=n,n.prototype=new o,n.prototype.computeMomentOfInertia=function(){return 0},n.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},n.prototype.computeAABB=function(e,t,n){var o=0,r=i.set;"number"==typeof n&&(o=n%(2*Math.PI)),0===o?(r(e.lowerBound,-Number.MAX_VALUE,-Number.MAX_VALUE),r(e.upperBound,Number.MAX_VALUE,0)):o===Math.PI/2?(r(e.lowerBound,0,-Number.MAX_VALUE),r(e.upperBound,Number.MAX_VALUE,Number.MAX_VALUE)):o===Math.PI?(r(e.lowerBound,-Number.MAX_VALUE,0),r(e.upperBound,Number.MAX_VALUE,Number.MAX_VALUE)):o===3*Math.PI/2?(r(e.lowerBound,-Number.MAX_VALUE,-Number.MAX_VALUE),r(e.upperBound,0,Number.MAX_VALUE)):(r(e.lowerBound,-Number.MAX_VALUE,-Number.MAX_VALUE),r(e.upperBound,Number.MAX_VALUE,Number.MAX_VALUE)),i.add(e.lowerBound,e.lowerBound,t),i.add(e.upperBound,e.upperBound,t)},n.prototype.updateArea=function(){this.area=Number.MAX_VALUE}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js","./Shape":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Shape.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Rectangle.js":[function(e,t){function n(e,t){this.width=e||1,this.height=t||1;var n=[o.fromValues(-e/2,-t/2),o.fromValues(e/2,-t/2),o.fromValues(e/2,t/2),o.fromValues(-e/2,t/2)],s=[o.fromValues(1,0),o.fromValues(0,1)];r.call(this,n,s),this.type=i.RECTANGLE}var o=e("../math/vec2"),i=e("./Shape"),r=e("./Convex");t.exports=n,n.prototype=new r([]),n.prototype.computeMomentOfInertia=function(e){var t=this.width,n=this.height;return e*(n*n+t*t)/12},n.prototype.updateBoundingRadius=function(){var e=this.width,t=this.height;this.boundingRadius=Math.sqrt(e*e+t*t)/2};o.create(),o.create(),o.create(),o.create();n.prototype.computeAABB=function(e,t,n){e.setFromPoints(this.vertices,t,n,0)},n.prototype.updateArea=function(){this.area=this.width*this.height}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Convex":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Convex.js","./Shape":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Shape.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Shape.js":[function(e,t){function n(e){this.type=e,this.id=n.idCounter++,this.boundingRadius=0,this.collisionGroup=1,this.collisionMask=1,e&&this.updateBoundingRadius(),this.material=null,this.area=0,this.sensor=!1,this.updateArea()}t.exports=n,n.idCounter=0,n.CIRCLE=1,n.PARTICLE=2,n.PLANE=4,n.CONVEX=8,n.LINE=16,n.RECTANGLE=32,n.CAPSULE=64,n.HEIGHTFIELD=128,n.prototype.computeMomentOfInertia=function(){throw new Error("Shape.computeMomentOfInertia is not implemented in this Shape...")},n.prototype.updateBoundingRadius=function(){throw new Error("Shape.updateBoundingRadius is not implemented in this Shape...")},n.prototype.updateArea=function(){},n.prototype.computeAABB=function(){}},{}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/solver/GSSolver.js":[function(e,t){function n(e){r.call(this,e,r.GS),e=e||{},this.iterations=e.iterations||10,this.tolerance=e.tolerance||1e-10,this.arrayStep=30,this.lambda=new s.ARRAY_TYPE(this.arrayStep),this.Bs=new s.ARRAY_TYPE(this.arrayStep),this.invCs=new s.ARRAY_TYPE(this.arrayStep),this.useZeroRHS=!1,this.frictionIterations=0,this.usedIterations=0}function o(e){for(var t=e.length;t--;)e[t]=0}var i=e("../math/vec2"),r=e("./Solver"),s=e("../utils/Utils"),a=e("../equations/FrictionEquation");t.exports=n,n.prototype=new r,n.prototype.solve=function(e,t){this.sortEquations();var r=0,l=this.iterations,u=this.frictionIterations,c=this.equations,p=c.length,d=Math.pow(this.tolerance*p,2),h=t.bodies,f=t.bodies.length,v=(i.add,i.set,this.useZeroRHS),m=this.lambda;if(this.usedIterations=0,p)for(var g=0;g!==f;g++){var y=h[g];y.updateSolveMassProperties()}m.length<p&&(m=this.lambda=new s.ARRAY_TYPE(p+this.arrayStep),this.Bs=new s.ARRAY_TYPE(p+this.arrayStep),this.invCs=new s.ARRAY_TYPE(p+this.arrayStep)),o(m);for(var b=this.invCs,j=this.Bs,m=this.lambda,g=0;g!==c.length;g++){var E=c[g];(E.timeStep!==e||E.needsUpdate)&&(E.timeStep=e,E.update()),j[g]=E.computeB(E.a,E.b,e),b[g]=E.computeInvC(E.epsilon)}var E,w,g,x;if(0!==p){for(g=0;g!==f;g++){var y=h[g];y.resetConstraintVelocity()}if(u){for(r=0;r!==u;r++){for(w=0,x=0;x!==p;x++){E=c[x];var A=n.iterateEquation(x,E,E.epsilon,j,b,m,v,e,r);w+=Math.abs(A)}if(this.usedIterations++,d>=w*w)break}for(n.updateMultipliers(c,m,1/e),x=0;x!==p;x++){var S=c[x];if(S instanceof a){for(var k=0,C=0;C!==S.contactEquations.length;C++)k+=S.contactEquations[C].multiplier;
k*=S.frictionCoefficient/S.contactEquations.length,S.maxForce=k,S.minForce=-k}}}for(r=0;r!==l;r++){for(w=0,x=0;x!==p;x++){E=c[x];var A=n.iterateEquation(x,E,E.epsilon,j,b,m,v,e,r);w+=Math.abs(A)}if(this.usedIterations++,d>=w*w)break}for(g=0;g!==f;g++)h[g].addConstraintVelocity();n.updateMultipliers(c,m,1/e)}},n.updateMultipliers=function(e,t,n){for(var o=e.length;o--;)e[o].multiplier=t[o]*n},n.iterateEquation=function(e,t,n,o,i,r,s,a){var l=o[e],u=i[e],c=r[e],p=t.computeGWlambda(),d=t.maxForce,h=t.minForce;s&&(l=0);var f=u*(l-p-n*c),v=c+f;return h*a>v?f=h*a-c:v>d*a&&(f=d*a-c),r[e]+=f,t.addToWlambda(f),f}},{"../equations/FrictionEquation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/FrictionEquation.js","../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js","./Solver":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/solver/Solver.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/solver/Solver.js":[function(e,t){function n(e,t){e=e||{},o.call(this),this.type=t,this.equations=[],this.equationSortFunction=e.equationSortFunction||!1}var o=(e("../utils/Utils"),e("../events/EventEmitter"));t.exports=n,n.prototype=new o,n.prototype.solve=function(){throw new Error("Solver.solve should be implemented by subclasses!")};var i={bodies:[]};n.prototype.solveIsland=function(e,t){this.removeAllEquations(),t.equations.length&&(this.addEquations(t.equations),i.bodies.length=0,t.getBodies(i.bodies),i.bodies.length&&this.solve(e,i))},n.prototype.sortEquations=function(){this.equationSortFunction&&this.equations.sort(this.equationSortFunction)},n.prototype.addEquation=function(e){e.enabled&&this.equations.push(e)},n.prototype.addEquations=function(e){for(var t=0,n=e.length;t!==n;t++){var o=e[t];o.enabled&&this.equations.push(o)}},n.prototype.removeEquation=function(e){var t=this.equations.indexOf(e);-1!==t&&this.equations.splice(t,1)},n.prototype.removeAllEquations=function(){this.equations.length=0},n.GS=1,n.ISLAND=2},{"../events/EventEmitter":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/events/EventEmitter.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/OverlapKeeper.js":[function(e,t){function n(){this.overlappingShapesLastState=new i,this.overlappingShapesCurrentState=new i,this.recordPool=[],this.tmpDict=new i,this.tmpArray1=[]}function o(e,t,n,o){this.shapeA=t,this.shapeB=o,this.bodyA=e,this.bodyB=n}{var i=e("./TupleDictionary");e("./Utils")}t.exports=n,n.prototype.tick=function(){for(var e=this.overlappingShapesLastState,t=this.overlappingShapesCurrentState,n=e.keys.length;n--;){var o=e.keys[n],i=e.getByKey(o),r=t.getByKey(o);i&&!r&&this.recordPool.push(i)}e.reset(),e.copy(t),t.reset()},n.prototype.setOverlapping=function(e,t,n,i){var r=(this.overlappingShapesLastState,this.overlappingShapesCurrentState);if(!r.get(t.id,i.id)){var s;this.recordPool.length?(s=this.recordPool.pop(),s.set(e,t,n,i)):s=new o(e,t,n,i),r.set(t.id,i.id,s)}},n.prototype.getNewOverlaps=function(e){return this.getDiff(this.overlappingShapesLastState,this.overlappingShapesCurrentState,e)},n.prototype.getEndOverlaps=function(e){return this.getDiff(this.overlappingShapesCurrentState,this.overlappingShapesLastState,e)},n.prototype.bodiesAreOverlapping=function(e,t){for(var n=this.overlappingShapesCurrentState,o=n.keys.length;o--;){var i=n.keys[o],r=n.data[i];if(r.bodyA===e&&r.bodyB===t||r.bodyA===t&&r.bodyB===e)return!0}return!1},n.prototype.getDiff=function(e,t,n){var n=n||[],o=e,i=t;n.length=0;for(var r=i.keys.length;r--;){var s=i.keys[r],a=i.data[s];if(!a)throw new Error("Key "+s+" had no data!");var l=o.data[s];l||n.push(a)}return n},n.prototype.isNewOverlap=function(e,t){var n=0|e.id,o=0|t.id,i=this.overlappingShapesLastState,r=this.overlappingShapesCurrentState;return!i.get(n,o)&&!!r.get(n,o)},n.prototype.getNewBodyOverlaps=function(e){this.tmpArray1.length=0;var t=this.getNewOverlaps(this.tmpArray1);return this.getBodyDiff(t,e)},n.prototype.getEndBodyOverlaps=function(e){this.tmpArray1.length=0;var t=this.getEndOverlaps(this.tmpArray1);return this.getBodyDiff(t,e)},n.prototype.getBodyDiff=function(e,t){t=t||[];for(var n=this.tmpDict,o=e.length;o--;){var i=e[o];n.set(0|i.bodyA.id,0|i.bodyB.id,i)}for(o=n.keys.length;o--;){var i=n.getByKey(n.keys[o]);i&&t.push(i.bodyA,i.bodyB)}return n.reset(),t},o.prototype.set=function(e,t,n,i){o.call(this,e,t,n,i)}},{"./TupleDictionary":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/TupleDictionary.js","./Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/TupleDictionary.js":[function(e,t){function n(){this.data={},this.keys=[]}var o=e("./Utils");t.exports=n,n.prototype.getKey=function(e,t){return e=0|e,t=0|t,(0|e)===(0|t)?-1:0|((0|e)>(0|t)?e<<16|65535&t:t<<16|65535&e)},n.prototype.getByKey=function(e){return e=0|e,this.data[e]},n.prototype.get=function(e,t){return this.data[this.getKey(e,t)]},n.prototype.set=function(e,t,n){if(!n)throw new Error("No data!");var o=this.getKey(e,t);return this.data[o]||this.keys.push(o),this.data[o]=n,o},n.prototype.reset=function(){for(var e=this.data,t=this.keys,n=t.length;n--;)delete e[t[n]];t.length=0},n.prototype.copy=function(e){this.reset(),o.appendArray(this.keys,e.keys);for(var t=e.keys.length;t--;){var n=e.keys[t];this.data[n]=e.data[n]}}},{"./Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js":[function(e,t){function n(){}t.exports=n,n.appendArray=function(e,t){if(t.length<15e4)e.push.apply(e,t);else for(var n=0,o=t.length;n!==o;++n)e.push(t[n])},n.splice=function(e,t,n){n=n||1;for(var o=t,i=e.length-n;i>o;o++)e[o]=e[o+n];e.length=i},n.ARRAY_TYPE="undefined"!=typeof P2_ARRAY_TYPE?P2_ARRAY_TYPE:"undefined"!=typeof Float32Array?Float32Array:Array,n.extend=function(e,t){for(var n in t)e[n]=t[n]},n.defaults=function(e,t){e=e||{};for(var n in t)n in e||(e[n]=t[n]);return e}},{}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/world/Island.js":[function(e,t){function n(){this.equations=[],this.bodies=[]}var o=e("../objects/Body");t.exports=n,n.prototype.reset=function(){this.equations.length=this.bodies.length=0};var i=[];n.prototype.getBodies=function(e){var t=e||[],n=this.equations;i.length=0;for(var o=0;o!==n.length;o++){var r=n[o];-1===i.indexOf(r.bodyA.id)&&(t.push(r.bodyA),i.push(r.bodyA.id)),-1===i.indexOf(r.bodyB.id)&&(t.push(r.bodyB),i.push(r.bodyB.id))}return t},n.prototype.wantsToSleep=function(){for(var e=0;e<this.bodies.length;e++){var t=this.bodies[e];if(t.type===o.DYNAMIC&&!t.wantsToSleep)return!1}return!0},n.prototype.sleep=function(){for(var e=0;e<this.bodies.length;e++){var t=this.bodies[e];t.sleep()}return!0}},{"../objects/Body":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/Body.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/world/IslandManager.js":[function(e,t){function n(){this._nodePool=[],this._islandPool=[],this.equations=[],this.islands=[],this.nodes=[],this.queue=[]}var o=(e("../math/vec2"),e("./Island")),i=e("./IslandNode"),r=e("../objects/Body");t.exports=n,n.getUnvisitedNode=function(e){for(var t=e.length,n=0;n!==t;n++){var o=e[n];if(!o.visited&&o.body.type===r.DYNAMIC)return o}return!1},n.prototype.visit=function(e,t,n){t.push(e.body);for(var o=e.equations.length,i=0;i!==o;i++){var r=e.equations[i];-1===n.indexOf(r)&&n.push(r)}},n.prototype.bfs=function(e,t,o){var i=this.queue;for(i.length=0,i.push(e),e.visited=!0,this.visit(e,t,o);i.length;)for(var s,a=i.pop();s=n.getUnvisitedNode(a.neighbors);)s.visited=!0,this.visit(s,t,o),s.body.type===r.DYNAMIC&&i.push(s)},n.prototype.split=function(e){for(var t=e.bodies,r=this.nodes,s=this.equations;r.length;)this._nodePool.push(r.pop());for(var a=0;a!==t.length;a++)if(this._nodePool.length){var l=this._nodePool.pop();l.reset(),l.body=t[a],r.push(l)}else r.push(new i(t[a]));for(var u=0;u!==s.length;u++){var c=s[u],a=t.indexOf(c.bodyA),p=t.indexOf(c.bodyB),d=r[a],h=r[p];d.neighbors.push(h),h.neighbors.push(d),d.equations.push(c),h.equations.push(c)}for(var f=this.islands;f.length;){var v=f.pop();v.reset(),this._islandPool.push(v)}for(var m;m=n.getUnvisitedNode(r);){var v=this._islandPool.length?this._islandPool.pop():new o;this.bfs(m,v.bodies,v.equations),f.push(v)}return f}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../objects/Body":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/Body.js","./Island":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/world/Island.js","./IslandNode":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/world/IslandNode.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/world/IslandNode.js":[function(e,t){function n(e){this.body=e,this.neighbors=[],this.equations=[],this.visited=!1}t.exports=n,n.prototype.reset=function(){this.equations.length=0,this.neighbors.length=0,this.visited=!1,this.body=null}},{}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/world/World.js":[function(e,t){function n(e){p.apply(this),e=e||{},this.springs=[],this.bodies=[],this.disabledBodyCollisionPairs=[],this.solver=e.solver||new o,this.narrowphase=new v(this),this.islandManager=new y,this.gravity=r.fromValues(0,-9.78),e.gravity&&r.copy(this.gravity,e.gravity),this.frictionGravity=r.length(this.gravity)||10,this.useWorldGravityAsFrictionGravity=!0,this.useFrictionGravityOnZeroGravity=!0,this.doProfiling=e.doProfiling||!1,this.lastStepTime=0,this.broadphase=e.broadphase||new i,this.broadphase.setWorld(this),this.constraints=[],this.defaultMaterial=new h,this.defaultContactMaterial=new f(this.defaultMaterial,this.defaultMaterial),this.lastTimeStep=1/60,this.applySpringForces=!0,this.applyDamping=!0,this.applyGravity=!0,this.solveConstraints=!0,this.contactMaterials=[],this.time=0,this.stepping=!1,this.bodiesToBeRemoved=[],this.fixedStepTime=0,this.islandSplit="undefined"!=typeof e.islandSplit?!!e.islandSplit:!1,this.emitImpactEvent=!0,this._constraintIdCounter=0,this._bodyIdCounter=0,this.postStepEvent={type:"postStep"},this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.addSpringEvent={type:"addSpring",spring:null},this.impactEvent={type:"impact",bodyA:null,bodyB:null,shapeA:null,shapeB:null,contactEquation:null},this.postBroadphaseEvent={type:"postBroadphase",pairs:null},this.sleepMode=n.NO_SLEEPING,this.beginContactEvent={type:"beginContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null,contactEquations:[]},this.endContactEvent={type:"endContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null},this.preSolveEvent={type:"preSolve",contactEquations:null,frictionEquations:null},this.overlappingShapesLastState={keys:[]},this.overlappingShapesCurrentState={keys:[]},this.overlapKeeper=new g}{var o=e("../solver/GSSolver"),i=(e("../solver/Solver"),e("../collision/NaiveBroadphase")),r=e("../math/vec2"),s=e("../shapes/Circle"),a=(e("../shapes/Rectangle"),e("../shapes/Convex")),l=(e("../shapes/Line"),e("../shapes/Plane")),u=e("../shapes/Capsule"),c=e("../shapes/Particle"),p=e("../events/EventEmitter"),d=e("../objects/Body"),h=(e("../shapes/Shape"),e("../objects/LinearSpring"),e("../material/Material")),f=e("../material/ContactMaterial"),v=(e("../constraints/DistanceConstraint"),e("../constraints/Constraint"),e("../constraints/LockConstraint"),e("../constraints/RevoluteConstraint"),e("../constraints/PrismaticConstraint"),e("../constraints/GearConstraint"),e("../../package.json"),e("../collision/Broadphase"),e("../collision/SAPBroadphase"),e("../collision/Narrowphase")),m=e("../utils/Utils"),g=e("../utils/OverlapKeeper"),y=e("./IslandManager");e("../objects/RotationalSpring")}if(t.exports=n,"undefined"==typeof performance&&(performance={}),!performance.now){var b=Date.now();performance.timing&&performance.timing.navigationStart&&(b=performance.timing.navigationStart),performance.now=function(){return Date.now()-b}}n.prototype=new Object(p.prototype),n.NO_SLEEPING=1,n.BODY_SLEEPING=2,n.ISLAND_SLEEPING=4,n.prototype.addConstraint=function(e){this.constraints.push(e)},n.prototype.addContactMaterial=function(e){this.contactMaterials.push(e)},n.prototype.removeContactMaterial=function(e){var t=this.contactMaterials.indexOf(e);-1!==t&&m.splice(this.contactMaterials,t,1)},n.prototype.getContactMaterial=function(e,t){for(var n=this.contactMaterials,o=0,i=n.length;o!==i;o++){var r=n[o];if(r.materialA.id===e.id&&r.materialB.id===t.id||r.materialA.id===t.id&&r.materialB.id===e.id)return r}return!1},n.prototype.removeConstraint=function(e){var t=this.constraints.indexOf(e);-1!==t&&m.splice(this.constraints,t,1)};var j=(r.create(),r.create(),r.create(),r.create(),r.create(),r.create(),r.create()),E=r.fromValues(0,0),w=r.fromValues(0,0),x=(r.fromValues(0,0),r.fromValues(0,0));n.prototype.step=function(e,t,n){if(n=n||10,t=t||0,0===t)this.internalStep(e),this.time+=e;else{var o=Math.floor((this.time+t)/e)-Math.floor(this.time/e);o=Math.min(o,n);for(var i=performance.now(),s=0;s!==o&&(this.internalStep(e),!(performance.now()-i>1e3*e));s++);this.time+=t;for(var a=this.time%e,l=a/e,u=0;u!==this.bodies.length;u++){var c=this.bodies[u];c.type!==d.STATIC&&c.sleepState!==d.SLEEPING?(r.sub(x,c.position,c.previousPosition),r.scale(x,x,l),r.add(c.interpolatedPosition,c.position,x),c.interpolatedAngle=c.angle+(c.angle-c.previousAngle)*l):(r.copy(c.interpolatedPosition,c.position),c.interpolatedAngle=c.angle)}}};var A=[];n.prototype.internalStep=function(e){this.stepping=!0;var t,o,i=this,s=this.doProfiling,a=this.springs.length,l=this.springs,u=this.bodies,c=this.gravity,p=this.solver,h=this.bodies.length,f=this.broadphase,v=this.narrowphase,g=this.constraints,y=j,b=(r.scale,r.add),E=(r.rotate,this.islandManager);if(this.overlapKeeper.tick(),this.lastTimeStep=e,s&&(t=performance.now()),this.useWorldGravityAsFrictionGravity){var w=r.length(this.gravity);0===w&&this.useFrictionGravityOnZeroGravity||(this.frictionGravity=w)}if(this.applyGravity)for(var x=0;x!==h;x++){var S=u[x],k=S.force;S.type===d.DYNAMIC&&S.sleepState!==d.SLEEPING&&(r.scale(y,c,S.mass*S.gravityScale),b(k,k,y))}if(this.applySpringForces)for(var x=0;x!==a;x++){var C=l[x];C.applyForce()}if(this.applyDamping)for(var x=0;x!==h;x++){var S=u[x];S.type===d.DYNAMIC&&S.applyDamping(e)}for(var B=f.getCollisionPairs(this),_=this.disabledBodyCollisionPairs,x=_.length-2;x>=0;x-=2)for(var U=B.length-2;U>=0;U-=2)(_[x]===B[U]&&_[x+1]===B[U+1]||_[x+1]===B[U]&&_[x]===B[U+1])&&B.splice(U,2);var P=g.length;for(x=0;x!==P;x++){var q=g[x];if(!q.collideConnected)for(var U=B.length-2;U>=0;U-=2)(q.bodyA===B[U]&&q.bodyB===B[U+1]||q.bodyB===B[U]&&q.bodyA===B[U+1])&&B.splice(U,2)}this.postBroadphaseEvent.pairs=B,this.emit(this.postBroadphaseEvent),v.reset(this);for(var x=0,N=B.length;x!==N;x+=2)for(var L=B[x],T=B[x+1],F=0,M=L.shapes.length;F!==M;F++)for(var O=L.shapes[F],D=L.shapeOffsets[F],R=L.shapeAngles[F],I=0,V=T.shapes.length;I!==V;I++){var G=T.shapes[I],H=T.shapeOffsets[I],W=T.shapeAngles[I],z=this.defaultContactMaterial;if(O.material&&G.material){var X=this.getContactMaterial(O.material,G.material);X&&(z=X)}this.runNarrowphase(v,L,O,D,R,T,G,H,W,z,this.frictionGravity)}for(var x=0;x!==h;x++){var K=u[x];K._wakeUpAfterNarrowphase&&(K.wakeUp(),K._wakeUpAfterNarrowphase=!1)}if(this.has("endContact")){this.overlapKeeper.getEndOverlaps(A);for(var $=this.endContactEvent,I=A.length;I--;){var Y=A[I];$.shapeA=Y.shapeA,$.shapeB=Y.shapeB,$.bodyA=Y.bodyA,$.bodyB=Y.bodyA,this.emit($)}}var J=this.preSolveEvent;J.contactEquations=v.contactEquations,J.frictionEquations=v.frictionEquations,this.emit(J);var P=g.length;for(x=0;x!==P;x++)g[x].update();if(v.contactEquations.length||v.frictionEquations.length||g.length)if(this.islandSplit){for(E.equations.length=0,m.appendArray(E.equations,v.contactEquations),m.appendArray(E.equations,v.frictionEquations),x=0;x!==P;x++)m.appendArray(E.equations,g[x].equations);E.split(this);for(var x=0;x!==E.islands.length;x++){var Z=E.islands[x];Z.equations.length&&p.solveIsland(e,Z)}}else{for(p.addEquations(v.contactEquations),p.addEquations(v.frictionEquations),x=0;x!==P;x++)p.addEquations(g[x].equations);this.solveConstraints&&p.solve(e,this),p.removeAllEquations()}for(var x=0;x!==h;x++){var K=u[x];K.sleepState!==d.SLEEPING&&K.type!==d.STATIC&&n.integrateBody(K,e)}for(var x=0;x!==h;x++)u[x].setZeroForce();if(s&&(o=performance.now(),i.lastStepTime=o-t),this.emitImpactEvent&&this.has("impact"))for(var Q=this.impactEvent,x=0;x!==v.contactEquations.length;x++){var et=v.contactEquations[x];et.firstImpact&&(Q.bodyA=et.bodyA,Q.bodyB=et.bodyB,Q.shapeA=et.shapeA,Q.shapeB=et.shapeB,Q.contactEquation=et,this.emit(Q))}if(this.sleepMode===n.BODY_SLEEPING)for(x=0;x!==h;x++)u[x].sleepTick(this.time,!1,e);else if(this.sleepMode===n.ISLAND_SLEEPING&&this.islandSplit){for(x=0;x!==h;x++)u[x].sleepTick(this.time,!0,e);for(var x=0;x<this.islandManager.islands.length;x++){var Z=this.islandManager.islands[x];Z.wantsToSleep()&&Z.sleep()}}if(this.stepping=!1,this.bodiesToBeRemoved.length){for(var x=0;x!==this.bodiesToBeRemoved.length;x++)this.removeBody(this.bodiesToBeRemoved[x]);this.bodiesToBeRemoved.length=0}this.emit(this.postStepEvent)};var S=r.create(),k=r.create();n.integrateBody=function(e,t){var n=e.invMass,o=e.force,i=e.position,s=e.velocity;r.copy(e.previousPosition,e.position),e.previousAngle=e.angle,e.fixedRotation||(e.angularVelocity+=e.angularForce*e.invInertia*t,e.angle+=e.angularVelocity*t),r.scale(S,o,t*n),r.add(s,S,s),r.scale(k,s,t),r.add(i,i,k),e.aabbNeedsUpdate=!0},n.prototype.runNarrowphase=function(e,t,n,o,i,s,a,l,u,c,p){if(0!==(n.collisionGroup&a.collisionMask)&&0!==(a.collisionGroup&n.collisionMask)){r.rotate(E,o,t.angle),r.rotate(w,l,s.angle),r.add(E,E,t.position),r.add(w,w,s.position);var h=i+t.angle,f=u+s.angle;e.enableFriction=c.friction>0,e.frictionCoefficient=c.friction;var v;v=t.type===d.STATIC||t.type===d.KINEMATIC?s.mass:s.type===d.STATIC||s.type===d.KINEMATIC?t.mass:t.mass*s.mass/(t.mass+s.mass),e.slipForce=c.friction*p*v,e.restitution=c.restitution,e.surfaceVelocity=c.surfaceVelocity,e.frictionStiffness=c.frictionStiffness,e.frictionRelaxation=c.frictionRelaxation,e.stiffness=c.stiffness,e.relaxation=c.relaxation,e.contactSkinSize=c.contactSkinSize;var m=e[n.type|a.type],g=0;if(m){var y=n.sensor||a.sensor,b=e.frictionEquations.length;g=n.type<a.type?m.call(e,t,n,E,h,s,a,w,f,y):m.call(e,s,a,w,f,t,n,E,h,y);var j=e.frictionEquations.length-b;if(g){if(t.allowSleep&&t.type===d.DYNAMIC&&t.sleepState===d.SLEEPING&&s.sleepState===d.AWAKE&&s.type!==d.STATIC){var x=r.squaredLength(s.velocity)+Math.pow(s.angularVelocity,2),A=Math.pow(s.sleepSpeedLimit,2);x>=2*A&&(t._wakeUpAfterNarrowphase=!0)}if(s.allowSleep&&s.type===d.DYNAMIC&&s.sleepState===d.SLEEPING&&t.sleepState===d.AWAKE&&t.type!==d.STATIC){var S=r.squaredLength(t.velocity)+Math.pow(t.angularVelocity,2),k=Math.pow(t.sleepSpeedLimit,2);S>=2*k&&(s._wakeUpAfterNarrowphase=!0)}if(this.overlapKeeper.setOverlapping(t,n,s,a),this.has("beginContact")&&this.overlapKeeper.isNewOverlap(n,a)){var C=this.beginContactEvent;if(C.shapeA=n,C.shapeB=a,C.bodyA=t,C.bodyB=s,C.contactEquations.length=0,"number"==typeof g)for(var B=e.contactEquations.length-g;B<e.contactEquations.length;B++)C.contactEquations.push(e.contactEquations[B]);this.emit(C)}if("number"==typeof g&&j>1)for(var B=e.frictionEquations.length-j;B<e.frictionEquations.length;B++){var _=e.frictionEquations[B];_.setSlipForce(_.getSlipForce()/j)}}}}},n.prototype.addSpring=function(e){this.springs.push(e),this.addSpringEvent.spring=e,this.emit(this.addSpringEvent)},n.prototype.removeSpring=function(e){var t=this.springs.indexOf(e);-1!==t&&m.splice(this.springs,t,1)},n.prototype.addBody=function(e){-1===this.bodies.indexOf(e)&&(this.bodies.push(e),e.world=this,this.addBodyEvent.body=e,this.emit(this.addBodyEvent))},n.prototype.removeBody=function(e){if(this.stepping)this.bodiesToBeRemoved.push(e);else{e.world=null;var t=this.bodies.indexOf(e);-1!==t&&(m.splice(this.bodies,t,1),this.removeBodyEvent.body=e,e.resetConstraintVelocity(),this.emit(this.removeBodyEvent))}},n.prototype.getBodyById=function(e){for(var t=this.bodies,n=0;n<t.length;n++){var o=t[n];if(o.id===e)return o}return!1},n.prototype.disableBodyCollision=function(e,t){this.disabledBodyCollisionPairs.push(e,t)},n.prototype.enableBodyCollision=function(e,t){for(var n=this.disabledBodyCollisionPairs,o=0;o<n.length;o+=2)if(n[o]===e&&n[o+1]===t||n[o+1]===e&&n[o]===t)return void n.splice(o,2)},n.prototype.clear=function(){this.time=0,this.fixedStepTime=0,this.solver&&this.solver.equations.length&&this.solver.removeAllEquations();for(var e=this.constraints,t=e.length-1;t>=0;t--)this.removeConstraint(e[t]);for(var o=this.bodies,t=o.length-1;t>=0;t--)this.removeBody(o[t]);for(var i=this.springs,t=i.length-1;t>=0;t--)this.removeSpring(i[t]);for(var r=this.contactMaterials,t=r.length-1;t>=0;t--)this.removeContactMaterial(r[t]);n.apply(this)},n.prototype.clone=function(){var e=new n;return e.fromJSON(this.toJSON()),e};var C=r.create(),B=r.fromValues(0,0),_=r.fromValues(0,0);n.prototype.hitTest=function(e,t,n){n=n||0;var o=new d({position:e}),i=new c,p=e,h=0,f=C,v=B,m=_;o.addShape(i);for(var g=this.narrowphase,y=[],b=0,j=t.length;b!==j;b++)for(var E=t[b],w=0,x=E.shapes.length;w!==x;w++){var A=E.shapes[w],S=E.shapeOffsets[w]||v,k=E.shapeAngles[w]||0;r.rotate(f,S,E.angle),r.add(f,f,E.position);var U=k+E.angle;(A instanceof s&&g.circleParticle(E,A,f,U,o,i,p,h,!0)||A instanceof a&&g.particleConvex(o,i,p,h,E,A,f,U,!0)||A instanceof l&&g.particlePlane(o,i,p,h,E,A,f,U,!0)||A instanceof u&&g.particleCapsule(o,i,p,h,E,A,f,U,!0)||A instanceof c&&r.squaredLength(r.sub(m,f,e))<n*n)&&y.push(E)}return y},n.prototype.setGlobalEquationParameters=function(e){e=e||{};for(var t=0;t!==this.constraints.length;t++)for(var n=this.constraints[t],o=0;o!==n.equations.length;o++){var i=n.equations[o];"undefined"!=typeof e.stiffness&&(i.stiffness=e.stiffness),"undefined"!=typeof e.relaxation&&(i.relaxation=e.relaxation),i.needsUpdate=!0}for(var t=0;t!==this.contactMaterials.length;t++){var n=this.contactMaterials[t];"undefined"!=typeof e.stiffness&&(n.stiffness=e.stiffness,n.frictionStiffness=e.stiffness),"undefined"!=typeof e.relaxation&&(n.relaxation=e.relaxation,n.frictionRelaxation=e.relaxation)}var n=this.defaultContactMaterial;"undefined"!=typeof e.stiffness&&(n.stiffness=e.stiffness,n.frictionStiffness=e.stiffness),"undefined"!=typeof e.relaxation&&(n.relaxation=e.relaxation,n.frictionRelaxation=e.relaxation)},n.prototype.setGlobalStiffness=function(e){this.setGlobalEquationParameters({stiffness:e})},n.prototype.setGlobalRelaxation=function(e){this.setGlobalEquationParameters({relaxation:e})}},{"../../package.json":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/package.json","../collision/Broadphase":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/Broadphase.js","../collision/NaiveBroadphase":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/NaiveBroadphase.js","../collision/Narrowphase":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/Narrowphase.js","../collision/SAPBroadphase":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/SAPBroadphase.js","../constraints/Constraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/Constraint.js","../constraints/DistanceConstraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/DistanceConstraint.js","../constraints/GearConstraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/GearConstraint.js","../constraints/LockConstraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/LockConstraint.js","../constraints/PrismaticConstraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/PrismaticConstraint.js","../constraints/RevoluteConstraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/RevoluteConstraint.js","../events/EventEmitter":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/events/EventEmitter.js","../material/ContactMaterial":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/material/ContactMaterial.js","../material/Material":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/material/Material.js","../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../objects/Body":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/Body.js","../objects/LinearSpring":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/LinearSpring.js","../objects/RotationalSpring":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/RotationalSpring.js","../shapes/Capsule":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Capsule.js","../shapes/Circle":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Circle.js","../shapes/Convex":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Convex.js","../shapes/Line":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Line.js","../shapes/Particle":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Particle.js","../shapes/Plane":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Plane.js","../shapes/Rectangle":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Rectangle.js","../shapes/Shape":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Shape.js","../solver/GSSolver":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/solver/GSSolver.js","../solver/Solver":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/solver/Solver.js","../utils/OverlapKeeper":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/OverlapKeeper.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js","./IslandManager":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/world/IslandManager.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/vec2/vec2.js":[function(e,t){!function n(e,o,i){function r(e,t){return this instanceof r?(s(e)?(t=e[1],e=e[0]):"object"==typeof e&&e&&(t=e.y,e=e.x),this.x=r.clean(e||0),void(this.y=r.clean(t||0))):new r(e,t)}var s=function(e){return"[object Array]"===Object.prototype.toString.call(e)};r.prototype={change:function(e){if("function"==typeof e)this.observers?this.observers.push(e):this.observers=[e];else if(this.observers&&this.observers.length)for(var t=this.observers.length-1;t>=0;t--)this.observers[t](this,e);return this},ignore:function(e){if(this.observers)if(e)for(var t=this.observers,n=t.length;n--;)t[n]===e&&t.splice(n,1);else this.observers=[];return this},set:function(e,t,n){if("number"!=typeof e&&(n=t,t=e.y,e=e.x),this.x===e&&this.y===t)return this;var o=null;return n!==!1&&this.observers&&this.observers.length&&(o=this.clone()),this.x=r.clean(e),this.y=r.clean(t),n!==!1?this.change(o):void 0},zero:function(){return this.set(0,0)},clone:function(){return new this.constructor(this.x,this.y)},negate:function(e){return e?new this.constructor(-this.x,-this.y):this.set(-this.x,-this.y)},add:function(e,t,n){return"number"!=typeof e&&(n=t,s(e)?(t=e[1],e=e[0]):(t=e.y,e=e.x)),e+=this.x,t+=this.y,n?new this.constructor(e,t):this.set(e,t)},subtract:function(e,t,n){return"number"!=typeof e&&(n=t,s(e)?(t=e[1],e=e[0]):(t=e.y,e=e.x)),e=this.x-e,t=this.y-t,n?new this.constructor(e,t):this.set(e,t)},multiply:function(e,t,n){return"number"!=typeof e?(n=t,s(e)?(t=e[1],e=e[0]):(t=e.y,e=e.x)):"number"!=typeof t&&(n=t,t=e),e*=this.x,t*=this.y,n?new this.constructor(e,t):this.set(e,t)},rotate:function(e,t,n){var o,i,r=this.x,s=this.y,a=Math.cos(e),l=Math.sin(e);return t=t?-1:1,o=a*r-t*l*s,i=t*l*r+a*s,n?new this.constructor(o,i):this.set(o,i)},length:function(){var e=this.x,t=this.y;return Math.sqrt(e*e+t*t)},lengthSquared:function(){var e=this.x,t=this.y;return e*e+t*t},distance:function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)},nearest:function(e){for(var t,n=Number.MAX_VALUE,o=null,i=e.length-1;i>=0;i--)t=this.distance(e[i]),n>=t&&(n=t,o=e[i]);return o},normalize:function(e){var t=this.length(),n=t<Number.MIN_VALUE?0:1/t;return e?new this.constructor(this.x*n,this.y*n):this.set(this.x*n,this.y*n)},equal:function(e,t){return"number"!=typeof e&&(s(e)?(t=e[1],e=e[0]):(t=e.y,e=e.x)),r.clean(e)===this.x&&r.clean(t)===this.y},abs:function(e){var t=Math.abs(this.x),n=Math.abs(this.y);return e?new this.constructor(t,n):this.set(t,n)},min:function(e,t){var n=this.x,o=this.y,i=e.x,r=e.y,s=i>n?n:i,a=r>o?o:r;return t?new this.constructor(s,a):this.set(s,a)},max:function(e,t){var n=this.x,o=this.y,i=e.x,r=e.y,s=n>i?n:i,a=o>r?o:r;return t?new this.constructor(s,a):this.set(s,a)},clamp:function(e,t,n){var o=this.min(t,!0).max(e);return n?o:this.set(o.x,o.y)},lerp:function(e,t,n){return this.add(e.subtract(this,!0).multiply(t),n)},skew:function(e){return e?new this.constructor(-this.y,this.x):this.set(-this.y,this.x)},dot:function(e){return r.clean(this.x*e.x+e.y*this.y)},perpDot:function(e){return r.clean(this.x*e.y-this.y*e.x)},angleTo:function(e){return Math.atan2(this.perpDot(e),this.dot(e))},divide:function(e,t,n){if("number"!=typeof e?(n=t,s(e)?(t=e[1],e=e[0]):(t=e.y,e=e.x)):"number"!=typeof t&&(n=t,t=e),0===e||0===t)throw new Error("division by zero");if(isNaN(e)||isNaN(t))throw new Error("NaN detected");return n?new this.constructor(this.x/e,this.y/t):this.set(this.x/e,this.y/t)},isPointOnLine:function(e,t){return(e.y-this.y)*(e.x-t.x)===(e.y-t.y)*(e.x-this.x)},toArray:function(){return[this.x,this.y]},fromArray:function(e){return this.set(e[0],e[1])},toJSON:function(){return{x:this.x,y:this.y}},toString:function(){return"("+this.x+", "+this.y+")"},constructor:r},r.fromArray=function(e,t){return new(t||r)(e[0],e[1])},r.precision=o||8;var a=Math.pow(10,r.precision);return r.clean=e||function(e){if(isNaN(e))throw new Error("NaN detected");if(!isFinite(e))throw new Error("Infinity detected");return Math.round(e)===e?e:Math.round(e*a)/a},r.inject=n,e||(r.fast=n(function(e){return e}),"undefined"!=typeof t&&"object"==typeof t.exports?t.exports=r:window.Vec2=window.Vec2||r),r}()},{}]},{},["./app/index.js"]);