!function t(e,o,s){function i(n,a){if(!o[n]){if(!e[n]){var c="function"==typeof require&&require;if(!a&&c)return c(n,!0);if(r)return r(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var u=o[n]={exports:{}};e[n][0].call(u.exports,function(t){var o=e[n][1][t];return i(o?o:t)},u,u.exports,t,e,o,s)}return o[n].exports}for(var r="function"==typeof require&&require,n=0;n<s.length;n++)i(s[n]);return i}({"./app/index.js":[function(t){(function(e){var o=("undefined"!=typeof window?window.window:"undefined"!=typeof e?e.window:null).document,s=t("./lib/config/persistence"),i=t("./lib/config/game-config");i.apply(s.load());var r=t("./lib/game"),n=o.getElementById("stage"),a=new r(n);a.defineState("title",t("./lib/state/title")),a.defineState("help",t("./lib/state/help")),a.defineState("gameplay",t("./lib/state/gameplay")),a.changeState("title"),a.start()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/config/game-config":"/Users/paul/dev/projects/rocket-juggler/app/lib/config/game-config.js","./lib/config/persistence":"/Users/paul/dev/projects/rocket-juggler/app/lib/config/persistence.js","./lib/game":"/Users/paul/dev/projects/rocket-juggler/app/lib/game.js","./lib/state/gameplay":"/Users/paul/dev/projects/rocket-juggler/app/lib/state/gameplay.js","./lib/state/help":"/Users/paul/dev/projects/rocket-juggler/app/lib/state/help.js","./lib/state/title":"/Users/paul/dev/projects/rocket-juggler/app/lib/state/title.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/collision-handler.js":[function(t,e){function o(t){return function(e,o){return t.call(null,o,e)}}function s(){var t=Object.create(i);return t.initialize(),t}e.exports=s;var i={initialize:function(){this.handlerTuples=[]},addHandler:function(t,e,s){return this.handlerTuples.push({entityATest:t,entityBTest:e,handler:s},{entityATest:e,entityBTest:t,handler:o(s)}),this},handleCollision:function(t,e){var o=this.handlerTuples.filter(function(o){return o.entityATest(t)&&o.entityBTest(e)});o.length&&o[0].handler(t,e)}}},{}],"/Users/paul/dev/projects/rocket-juggler/app/lib/config/game-config.js":[function(t,e){function o(t){return t in i}function s(t,e){for(var o in t)e[o]=t[o];return e}var i={ballRadius:50,ballMass:.25,ballSpawnDelay:1e7,rocketSpeed:400,rocketRadius:10,explosionBallPush:400,explosionRadius:70,explosionDuration:100,playerSpeed:200},r=s(i,{});e.exports={get:function(t){return r[t]},set:function(t,e){o(t)&&(r[t]=e)},keys:function(){return Object.keys(i)},apply:function(t){for(var e in t)this.set(e,t[e])},values:function(){return s(r,{})},defaultValues:function(){return s(i,{})}}},{}],"/Users/paul/dev/projects/rocket-juggler/app/lib/config/persistence.js":[function(t,e){(function(o){function s(t){for(var e in r)e in t||(t[e]=r[e])}var i="undefined"!=typeof window?window.localStorage:"undefined"!=typeof o?o.localStorage:null,r=t("./game-config").defaultValues();e.exports={load:function(){var t=i.getItem("config");return t?s(JSON.parse(t)):(this.save(r),r)},save:function(t){i.setItem("config",JSON.stringify(t))}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./game-config":"/Users/paul/dev/projects/rocket-juggler/app/lib/config/game-config.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/ball.js":[function(t,e){(function(o){function s(t,e,o){this.view=i(o),this.view.x=t,this.view.y=e,this.body=r(t,e,o)}function i(t){var e=new n.Graphics;e.beginFill("#ff0000"),e.drawCircle(0,0,t);var o=new n.Shape(e);return o.cache(-t,-t,2*t,2*t),o}function r(t,e,o){var s=new a.Body({mass:1,fixedRotation:!0,position:[t,e]});return s.addShape(new a.Circle(o)),s.gravityScale=.5,s}var n="undefined"!=typeof window?window.createjs:"undefined"!=typeof o?o.createjs:null,a=t("p2");e.exports=s;var c=s.prototype;c.update=function(){this.view.x=this.body.position[0],this.view.y=this.body.position[1]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{p2:"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/p2.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/explosion.js":[function(t,e){(function(o){function s(t,e,o){this.view=i(o),this.view.x=t,this.view.y=e,this.body=r(t,e,o),this.timeLeft=100,this.ballPush=800,this.alreadyHit=[]}function i(t){var e=new n.Graphics;e.beginStroke("#00ff00"),e.drawCircle(0,0,t);var o=new n.Shape(e);return o.cache(-t,-t,2*t,2*t),o}function r(t,e,o){var s=new a.Body({mass:1,position:[t,e]});return s.gravityScale=0,s.fixedRotation=!0,c.ghostify(s),s.addShape(new a.Circle(o)),s}var n="undefined"!=typeof window?window.createjs:"undefined"!=typeof o?o.createjs:null,a=t("p2"),c=t("ghost-body"),l=t("vec2");e.exports=s;var u=s.prototype;u.update=function(t){this.view.x=this.body.position[0],this.view.y=this.body.position[1],this.timeLeft<=0&&(this.inactive=!0),this.timeLeft-=t.delta},u.pushBall=function(t){if(-1==this.alreadyHit.indexOf(t)){this.alreadyHit.push(t);var e=new l(t.body.position[0],t.body.position[1]);e.subtract(this.body.position[0],this.body.position[1]),e.normalize(),e.multiply(this.ballPush);var o=t.body.velocity;o[0]+=e.x,o[1]+=e.y}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"ghost-body":"/Users/paul/dev/projects/rocket-juggler/node_modules/ghost-body/index.js",p2:"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/p2.js",vec2:"/Users/paul/dev/projects/rocket-juggler/node_modules/vec2/vec2.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/index.js":[function(t,e){var o=t("../config/game-config"),s=t("./ball"),i=t("./wall"),r=t("./explosion"),n=t("./rocket"),a=t("./text"),c=t("./player");e.exports={rocket:function(t,e){var s=new n(t,e,o.get("rocketRadius"));return s.speed=o.get("rocketSpeed"),s},ball:function(t,e){var i=new s(t,e,o.get("ballRadius"));return i.body.mass=o.get("ballMass"),i},wall:function(t,e,o,s){return new i(t,e,o,s)},explosion:function(t,e){var s=new r(t,e,o.get("explosionRadius"));return s.ballPush=o.get("explosionBallPush"),s.timeLeft=o.get("explosionDuration"),s},text:function(t,e,o){return new a(t,e,o)},player:function(t,e){return new c(t,e)}}},{"../config/game-config":"/Users/paul/dev/projects/rocket-juggler/app/lib/config/game-config.js","./ball":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/ball.js","./explosion":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/explosion.js","./player":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/player.js","./rocket":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/rocket.js","./text":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/text.js","./wall":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/wall.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/legs-sprite.js":[function(t,e){(function(t){var o="undefined"!=typeof window?window.createjs:"undefined"!=typeof t?t.createjs:null,s=new o.SpriteSheet({images:["assets/legs.png"],frames:{width:177,height:238,regX:88,regY:119,spacing:1,margin:1},animations:{run:{frames:[0,1,2,3,4,5,6,7,8,9,10,11],speed:.4},stand:12}}),i=new o.Sprite(s,"stand");e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/player.js":[function(t,e){(function(o){function s(t,e){this.width=64,this.height=192,this.view=i(t,e),this.view.addChild(n(this.width,this.height)),this.legs=p,this.legs.y=-20,this.view.addChild(this.legs),this.torso=u,this.torso.y=-20,this.view.addChild(this.torso),this.aimLine=r(),this.view.addChild(this.aimLine),this.body=a(t,e,this.width,this.height)}function i(t,e){var o=new c.Container;return o.x=t,o.y=e,o}function r(){var t=new c.Graphics;return new c.Shape(t)}function n(t,e){var o=-e/2,s=-t/2,i=new c.Graphics;i.beginFill("#bbbbbb"),i.drawRect(s,o,t,e),i.endFill();var r=new c.Shape(i);return r.cache(s,o,t,e),r}function a(t,e,o,s){var i=new l.Body({mass:1,fixedRotation:!0,position:[t,e]});return i.addShape(new l.Rectangle(o,s)),i}var c="undefined"!=typeof window?window.createjs:"undefined"!=typeof o?o.createjs:null,l=t("p2"),u=t("./torso-sprite"),p=t("./legs-sprite");e.exports=s;var h=s.prototype;h.update=function(t){this.view.x=Math.floor(this.body.position[0]),this.view.y=Math.floor(this.body.position[1]),this.updateLauncher(t)},h.aim=function(t,e){this.launcher.aim(t,e);var o={x:this.body.position[0],y:this.body.position[1]},s={x:t,y:e};this.torso.aimChanged(o,s)},h.fire=function(){return this.launcher.fire()},h.updateLauncher=function(t){if(this.launcher){this.launcher.update(t);var e=this.body.position[0],o=this.body.position[1];this.launcher.move(e,o),this.aimLine.graphics.clear().beginStroke("#00f").moveTo(0,0).lineTo(this.launcher.target.x-e,this.launcher.target.y-o)}},h.moveLeft=function(t){this.body.velocity[0]>=0&&this.legs.gotoAndPlay("run"),this.body.velocity[0]=-t},h.moveRight=function(t){this.body.velocity[0]<=0&&this.legs.gotoAndPlay("run"),this.body.velocity[0]=t},h.stop=function(){this.body.velocity[0]=0,this.legs.gotoAndStop("stand")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./legs-sprite":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/legs-sprite.js","./torso-sprite":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/torso-sprite.js",p2:"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/p2.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/rocket.js":[function(t,e){(function(o){function s(t,e,o){this.view=i(o),this.x=this.view.x=t,this.y=this.view.y=e,this.body=r(t,e,o),this.speed=800}function i(t){var e=new n.Graphics;e.beginFill("#0000ff"),e.drawCircle(0,0,t);var o=new n.Shape(e);return o.cache(-t,-t,2*t,2*t),o}function r(t,e,o){var s=new a.Body({mass:10,fixedRotation:!0,position:[t,e]});return s.gravityScale=0,c.ghostify(s),s.addShape(new a.Circle(o)),s}var n="undefined"!=typeof window?window.createjs:"undefined"!=typeof o?o.createjs:null,a=t("p2"),c=t("ghost-body");e.exports=s;var l=s.prototype;l.update=function(){this.x=this.view.x=this.body.position[0],this.y=this.view.y=this.body.position[1]},l.launch=function(t){t.normalize(),t.multiply(this.speed),this.body.velocity=[t.x,t.y]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"ghost-body":"/Users/paul/dev/projects/rocket-juggler/node_modules/ghost-body/index.js",p2:"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/p2.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/text.js":[function(t,e){(function(t){function o(t,e,o){var i=new s.Text(o);i.x=t,i.y=e,this.view=i}var s="undefined"!=typeof window?window.createjs:"undefined"!=typeof t?t.createjs:null;e.exports=o;var i=o.prototype;Object.defineProperty(i,"message",{get:function(){return this.view.text},set:function(t){this.view.text=t}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/torso-sprite.js":[function(t,e){(function(o){var s="undefined"!=typeof window?window.createjs:"undefined"!=typeof o?o.createjs:null,i=t("pie-slice"),r=["N","N-NE","NE","E-NE","E","E-SE","SE","S-SE","S","S-SW","SW","W-SW","W","W-NW","NW","N-NW"],n=r.reduce(function(t,e,o){return t[e]=o,t},{}),a=new s.SpriteSheet({images:["assets/torso.png"],frames:{width:177,height:238,regX:88,regY:119,spacing:1,margin:1},animations:n}),c=i.slice(16,{firstSliceFacesUp:!0,yDown:!0}),l=new s.Sprite(a,"E");l.aimChanged=function(t,e){var o=c.whatSlice(t,e);this.gotoAndStop(r[o])},e.exports=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"pie-slice":"/Users/paul/dev/projects/rocket-juggler/node_modules/pie-slice/index.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/wall.js":[function(t,e){(function(o){function s(t,e,o,s){this.body=i(t,e,o,s)}function i(t,e,o,s){var i=new r.Body({mass:0,position:[t+o/2,e+s/2]});return i.addShape(new r.Rectangle(o,s)),i}var r=("undefined"!=typeof window?window.createjs:"undefined"!=typeof o?o.createjs:null,t("p2"));e.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{p2:"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/p2.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/game.js":[function(t,e){(function(o){function s(t){this.stage=new r.Stage(t),this.stage.mouseMoveOutside=!0,this.width=t.width,this.height=t.height,this.desiredFps=30,this.entities=[],this.entitiesByBodyId={},this.timer=n,this.states={dummy:{setUp:function(){},update:function(){},tearDown:function(){}}},this.currentState=this.states.dummy,this.nextStateInfo=null,this.input=a}var i=t("p2"),r="undefined"!=typeof window?window.createjs:"undefined"!=typeof o?o.createjs:null,n=t("./ticker-countdown")(),a=t("./input");e.exports=s;var c=s.prototype;c.defineState=function(t,e){e.init(this),this.states[t]=e},c.createWorld=function(t){this.world=new i.World,t(this.world)},c.addBall=function(t){this.addEntity(t)},c.addWall=function(t){this.addEntity(t)},c.addRocket=function(t){this.addEntity(t)},c.getEntityByBody=function(t){return this.entitiesByBodyId[t.id]},c.addEntity=function(t){if(t.view&&this.stage.addChild(t.view),t.body){if(this.entitiesByBodyId[t.body.id]=t,!this.world)throw new Error("Cannot add physical entity until world has been created, see Game#createWorld");this.world.addBody(t.body)}this.entities.push(t)},c.removeBodyOf=function(t){t.body&&(this.world.removeBody(t.body),delete this.entitiesByBodyId[t.body.id])},c.removeViewOf=function(t){t.view&&this.stage.removeChild(t.view)},c.update=function(t){if(this.input.updateMouseLocation(this.stage.mouseX,this.stage.mouseY),this.world){var e=3;this.world.step(1/this.desiredFps,t.delta,e)}for(var o=0;o<this.entities.length;o++)this.entities[o].update&&this.entities[o].update(t);for(this.currentState.update(this,this.input,t),o=0;o<this.entities.length;o++)this.entities[o].inactive&&(this.removeBodyOf(this.entities[o]),this.removeViewOf(this.entities[o]));this.entities=this.entities.filter(function(t){return!t.inactive}),this.stage.update(),this.stateChangeRequested()&&this.changeToNextState()},c.withStage=function(t){t(this.stage)},c.changeState=function(t){var e=Array.prototype.slice.call(arguments,1),o=this.states[t];if(!o)throw new Error('No such state "'+t+'". Known states are '+Object.keys(this.states).sort());this.nextStateInfo={state:o,params:e}},c.stateChangeRequested=function(){return this.nextStateInfo},c.changeToNextState=function(){this.currentState.tearDown(this),this.currentState=this.nextStateInfo.state;var t=this.nextStateInfo.params;t.unshift(this),delete this.nextStateInfo,this.reset(),this.currentState.setUp.apply(this.currentState,t)},c.reset=function(){this.stage.removeAllChildren(),this.world&&(this.world.clear(),delete this.world),this.entities=[],this.entitiesByBodyId={},["click","dblclick","drawend","drawstart","mousedown","mouseenter","mouseleave","mouseout","mouseover","pressmove","pressup","rollout","rollover","stagemousedown","stagemousemove","stagemouseup"].forEach(this.stage.removeAllEventListeners,this.stage)},c.start=function(){var t=this;r.Ticker.setFPS(this.desiredFps),r.Ticker.on("tick",this.timer),r.Ticker.on("tick",function(e){t.update(e)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./input":"/Users/paul/dev/projects/rocket-juggler/app/lib/input.js","./ticker-countdown":"/Users/paul/dev/projects/rocket-juggler/app/lib/ticker-countdown.js",p2:"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/p2.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/high-score.js":[function(t,e){(function(t){function o(){var t=i.getItem("highScore");return t?parseInt(t,10):null}function s(t){var e=o()||-1;return t>e?(i.setItem("highScore",t),!0):!1}var i="undefined"!=typeof window?window.localStorage:"undefined"!=typeof t?t.localStorage:null;e.exports={getHighScore:o,newScore:s}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/Users/paul/dev/projects/rocket-juggler/app/lib/input.js":[function(t,e){(function(t){var o=("undefined"!=typeof window?window.window:"undefined"!=typeof t?t.window:null).document,s={};o.onkeydown=function(t){s[t.keyCode]=!0},o.onkeyup=function(t){delete s[t.keyCode]},e.exports={keys:s,mouseLocation:{x:0,y:0},updateMouseLocation:function(t,e){this.mouseLocation.x=t,this.mouseLocation.y=e}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/Users/paul/dev/projects/rocket-juggler/app/lib/launcher.js":[function(t,e){function o(){this.fireDelay=300,this.lastFireTime,this.currentTime,this.source={x:0,y:0},this.target={x:0,y:0}}var s=t("vec2"),i=t("./entity");e.exports=o;var r=o.prototype;r.move=function(t,e){this.source.x=t,this.source.y=e},r.aim=function(t,e){this.target.x=t,this.target.y=e},r.fire=function(){if(this.canFire()){this.lastFireTime=this.currentTime;var t=i.rocket(this.source.x,this.source.y);return t.launch(this.aimVector()),t}},r.aimVector=function(){var t=new s(this.target.x,this.target.y);return t.subtract(this.source.x,this.source.y),t},r.canFire=function(){return!this.lastFireTime||this.currentTime>=this.lastFireTime+this.fireDelay},r.update=function(t){this.currentTime=t.time}},{"./entity":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/index.js",vec2:"/Users/paul/dev/projects/rocket-juggler/node_modules/vec2/vec2.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/state/gameplay-collision-handler.js":[function(t,e){function o(t){return function(e){return e instanceof t}}function s(t){return t.inactive=!0,l.explosion(t.x,t.y)}var i=t("../entity/ball"),r=t("../entity/wall"),n=t("../entity/rocket"),a=t("../entity/explosion"),c=t("../collision-handler"),l=t("../entity");e.exports=function(t){var e=c();return e.addHandler(o(n),o(r),function(e){t.addEntity(s(e))}).addHandler(o(n),o(i),function(e){t.addEntity(s(e))}).addHandler(o(a),o(i),function(t,e){t.pushBall(e)}).addHandler(o(i),function(t){return t.isFloor},function(){}),e}},{"../collision-handler":"/Users/paul/dev/projects/rocket-juggler/app/lib/collision-handler.js","../entity":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/index.js","../entity/ball":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/ball.js","../entity/explosion":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/explosion.js","../entity/rocket":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/rocket.js","../entity/wall":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/wall.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/state/gameplay.js":[function(t,e){function o(t){var e=t.width,o=t.height,s=20,r=500,n=i.wall(0-r,0,r,o-s),a=i.wall(e,0,r,o-s),c=i.wall(0-r,0-r,e+2*r,r),l=i.wall(0-r,o-s,e+2*r,s+r);return l.isFloor=!0,[l,n,a,c]}var s=t("ghost-body"),i=t("../entity"),r=t("../launcher"),n=t("./gameplay-collision-handler"),a=t("../config/game-config"),c=t("./spawn-locations"),l={init:function(t){this.game=t},setUp:function(t){var e=n(t,this);t.createWorld(function(o){s.enable(o),o.gravity=[0,293],o.on("beginContact",function(o){var s=o.bodyA,i=o.bodyB,r=t.getEntityByBody(s),n=t.getEntityByBody(i);e.handleCollision(r,n)})}),o(t).forEach(t.addWall,t);var l=c(),u=function(){var e=l.nextLocation(),o=i.ball(e.x,e.y);t.addBall(o),t.timer.addCountdown(a.get("ballSpawnDelay"),u)};u(),this.score=0;var p=function(){this.score+=1,t.timer.addCountdown(1e3,p)}.bind(this);p(),this.player=i.player(512,652),this.player.launcher=new r,t.addEntity(this.player),t.withStage(function(t){t.on("stagemousedown",this.mouseFire,this),t.on("stagemousemove",function(t){this.mouseStage.message="stage: "+t.stageX+", "+t.stageY,this.mouseRaw.message="raw: "+t.rawX+", "+t.rawY,this.player.aim(t.rawX,t.rawY)},this),t.canvas.classList.add("playing")}.bind(this)),this.actualFps=i.text(40,30),this.targetFps=i.text(40,40),this.scoreText=i.text(40,50),t.addEntity(this.actualFps),t.addEntity(this.targetFps),t.addEntity(this.scoreText),this.mouseStage=i.text(40,70),this.mouseRaw=i.text(40,80),t.addEntity(this.mouseStage),t.addEntity(this.mouseRaw)},update:function(t,e){this.actualFps.message=createjs.Ticker.getMeasuredFPS(),this.targetFps.message=createjs.Ticker.getFPS(),this.scoreText.message="Score: "+this.score,e.keys[16]&&this.fire(),e.keys[65]||e.keys[37]?this.player.moveLeft(a.get("playerSpeed")):e.keys[68]||e.keys[39]?this.player.moveRight(a.get("playerSpeed")):this.player.stop()},tearDown:function(t){t.timer.clearCountdowns(),t.withStage(function(t){t.canvas.classList.remove("playing")})},fire:function(){var t=this.player.fire();t&&this.game.addRocket(t)},mouseFire:function(t){this.player.aim(t.stageX,t.stageY),this.fire()}};e.exports=l},{"../config/game-config":"/Users/paul/dev/projects/rocket-juggler/app/lib/config/game-config.js","../entity":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/index.js","../launcher":"/Users/paul/dev/projects/rocket-juggler/app/lib/launcher.js","./gameplay-collision-handler":"/Users/paul/dev/projects/rocket-juggler/app/lib/state/gameplay-collision-handler.js","./spawn-locations":"/Users/paul/dev/projects/rocket-juggler/app/lib/state/spawn-locations.js","ghost-body":"/Users/paul/dev/projects/rocket-juggler/node_modules/ghost-body/index.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/state/help.js":[function(t,e){var o=t("../entity"),s={init:function(t){this.game=t},setUp:function(t){["***don't drop a ball***","a, left arrow = move left","d, right arrow = move right","mouse aims","mouse click, shift key = shoot"].forEach(function(e,s){var i=20*s;t.addEntity(o.text(500,150+i,e))});t.addEntity(o.text(500,100,"Press <esc> to return"))},update:function(t,e){e.keys[27]&&t.changeState("title")},tearDown:function(){}};e.exports=s},{"../entity":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/index.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/state/spawn-locations.js":[function(t,e){e.exports=function(){var t=0,e=[{x:656,y:80},{x:328,y:80}];return{nextLocation:function(){var o=e[t];return t+=1,t==e.length&&(t=0),o}}}},{}],"/Users/paul/dev/projects/rocket-juggler/app/lib/state/title.js":[function(t,e){var o=t("../entity"),s=t("../high-score"),i={init:function(t){this.game=t},setUp:function(t,e){var i="High Score: ";void 0!==e&&(s.newScore(e)&&(i="NEW! "+i),t.addEntity(o.text(500,300,"GAME OVER")),t.addEntity(o.text(500,320,"Score: "+e))),i+=s.getHighScore()||"N/A",t.addEntity(o.text(500,100,"ROCKET JUGGLER")),t.addEntity(o.text(500,120,"Press <enter> to begin")),t.addEntity(o.text(500,140,"Press <h> for help")),t.addEntity(o.text(500,170,i))},update:function(t,e){e.keys[13]?t.changeState("gameplay"):e.keys[72]&&t.changeState("help")},tearDown:function(){}};e.exports=i},{"../entity":"/Users/paul/dev/projects/rocket-juggler/app/lib/entity/index.js","../high-score":"/Users/paul/dev/projects/rocket-juggler/app/lib/high-score.js"}],"/Users/paul/dev/projects/rocket-juggler/app/lib/ticker-countdown.js":[function(t,e){function o(){var t=[],e=function(e){var o=t.slice();o.forEach(function(t){t.timeLeft-=e.delta,t.timeLeft<=0&&t.callback()}),t=t.filter(function(t){return t.timeLeft>0})};return e.addCountdown=function(e,o){t.push({timeLeft:e,callback:o})},e.clearCountdowns=function(){t=[]},e}e.exports=o},{}],"/Users/paul/dev/projects/rocket-juggler/node_modules/ghost-body/index.js":[function(t,e){function o(t){return t.ghost=!0,t}function s(t){return delete t.ghost,t}function i(t){return t.ghost===!0}function r(t){t.on("preSolve",a)}function n(t){t.off("preSolve",a)}function a(t){c(t.contactEquations),c(t.frictionEquations)}function c(t){t.forEach(function(t){(i(t.bodyA)||i(t.bodyB))&&(t.enabled=!1)})}e.exports={ghostify:o,unghostify:s,isGhost:i,enable:r,disable:n}},{}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/node_modules/poly-decomp/src/Line.js":[function(t,e){function o(){}var s=t("./Scalar");e.exports=o,o.lineInt=function(t,e,o){o=o||0;var i,r,n,a,c,l,u,p=[0,0];return i=t[1][1]-t[0][1],r=t[0][0]-t[1][0],n=i*t[0][0]+r*t[0][1],a=e[1][1]-e[0][1],c=e[0][0]-e[1][0],l=a*e[0][0]+c*e[0][1],u=i*c-a*r,s.eq(u,0,o)||(p[0]=(c*n-r*l)/u,p[1]=(i*l-a*n)/u),p},o.segmentsIntersect=function(t,e,o,s){var i=e[0]-t[0],r=e[1]-t[1],n=s[0]-o[0],a=s[1]-o[1];if(n*r-a*i==0)return!1;var c=(i*(o[1]-t[1])+r*(t[0]-o[0]))/(n*r-a*i),l=(n*(t[1]-o[1])+a*(o[0]-t[0]))/(a*i-n*r);return c>=0&&1>=c&&l>=0&&1>=l}},{"./Scalar":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/node_modules/poly-decomp/src/Scalar.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/node_modules/poly-decomp/src/Point.js":[function(t,e){function o(){}e.exports=o,o.area=function(t,e,o){return(e[0]-t[0])*(o[1]-t[1])-(o[0]-t[0])*(e[1]-t[1])},o.left=function(t,e,s){return o.area(t,e,s)>0},o.leftOn=function(t,e,s){return o.area(t,e,s)>=0},o.right=function(t,e,s){return o.area(t,e,s)<0},o.rightOn=function(t,e,s){return o.area(t,e,s)<=0};var s=[],i=[];o.collinear=function(t,e,r,n){if(n){var a=s,c=i;a[0]=e[0]-t[0],a[1]=e[1]-t[1],c[0]=r[0]-e[0],c[1]=r[1]-e[1];var l=a[0]*c[0]+a[1]*c[1],u=Math.sqrt(a[0]*a[0]+a[1]*a[1]),p=Math.sqrt(c[0]*c[0]+c[1]*c[1]),h=Math.acos(l/(u*p));return n>h}return 0==o.area(t,e,r)},o.sqdist=function(t,e){var o=e[0]-t[0],s=e[1]-t[1];return o*o+s*s}},{}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/node_modules/poly-decomp/src/Polygon.js":[function(t,e){function o(){this.vertices=[]}function s(t,e,o,s,i){i=i||0;var r=e[1]-t[1],a=t[0]-e[0],c=r*t[0]+a*t[1],l=s[1]-o[1],u=o[0]-s[0],p=l*o[0]+u*o[1],h=r*u-l*a;return n.eq(h,0,i)?[0,0]:[(u*c-a*p)/h,(r*p-l*c)/h]}var i=t("./Line"),r=t("./Point"),n=t("./Scalar");e.exports=o,o.prototype.at=function(t){var e=this.vertices,o=e.length;return e[0>t?t%o+o:t%o]},o.prototype.first=function(){return this.vertices[0]},o.prototype.last=function(){return this.vertices[this.vertices.length-1]},o.prototype.clear=function(){this.vertices.length=0},o.prototype.append=function(t,e,o){if("undefined"==typeof e)throw new Error("From is not given!");if("undefined"==typeof o)throw new Error("To is not given!");if(e>o-1)throw new Error("lol1");if(o>t.vertices.length)throw new Error("lol2");if(0>e)throw new Error("lol3");for(var s=e;o>s;s++)this.vertices.push(t.vertices[s])},o.prototype.makeCCW=function(){for(var t=0,e=this.vertices,o=1;o<this.vertices.length;++o)(e[o][1]<e[t][1]||e[o][1]==e[t][1]&&e[o][0]>e[t][0])&&(t=o);r.left(this.at(t-1),this.at(t),this.at(t+1))||this.reverse()},o.prototype.reverse=function(){for(var t=[],e=0,o=this.vertices.length;e!==o;e++)t.push(this.vertices.pop());this.vertices=t},o.prototype.isReflex=function(t){return r.right(this.at(t-1),this.at(t),this.at(t+1))};var a=[],c=[];o.prototype.canSee=function(t,e){var o,s,n=a,l=c;if(r.leftOn(this.at(t+1),this.at(t),this.at(e))&&r.rightOn(this.at(t-1),this.at(t),this.at(e)))return!1;s=r.sqdist(this.at(t),this.at(e));for(var u=0;u!==this.vertices.length;++u)if((u+1)%this.vertices.length!==t&&u!==t&&r.leftOn(this.at(t),this.at(e),this.at(u+1))&&r.rightOn(this.at(t),this.at(e),this.at(u))&&(n[0]=this.at(t),n[1]=this.at(e),l[0]=this.at(u),l[1]=this.at(u+1),o=i.lineInt(n,l),r.sqdist(this.at(t),o)<s))return!1;return!0},o.prototype.copy=function(t,e,s){var i=s||new o;if(i.clear(),e>t)for(var r=t;e>=r;r++)i.vertices.push(this.vertices[r]);else{for(var r=0;e>=r;r++)i.vertices.push(this.vertices[r]);for(var r=t;r<this.vertices.length;r++)i.vertices.push(this.vertices[r])}return i},o.prototype.getCutEdges=function(){for(var t=[],e=[],s=[],i=new o,r=Number.MAX_VALUE,n=0;n<this.vertices.length;++n)if(this.isReflex(n))for(var a=0;a<this.vertices.length;++a)if(this.canSee(n,a)){e=this.copy(n,a,i).getCutEdges(),s=this.copy(a,n,i).getCutEdges();for(var c=0;c<s.length;c++)e.push(s[c]);e.length<r&&(t=e,r=e.length,t.push([this.at(n),this.at(a)]))}return t},o.prototype.decomp=function(){var t=this.getCutEdges();return t.length>0?this.slice(t):[this]},o.prototype.slice=function(t){if(0==t.length)return[this];if(t instanceof Array&&t.length&&t[0]instanceof Array&&2==t[0].length&&t[0][0]instanceof Array){for(var e=[this],o=0;o<t.length;o++)for(var s=t[o],i=0;i<e.length;i++){var r=e[i],n=r.slice(s);if(n){e.splice(i,1),e.push(n[0],n[1]);break}}return e}var s=t,o=this.vertices.indexOf(s[0]),i=this.vertices.indexOf(s[1]);return-1!=o&&-1!=i?[this.copy(o,i),this.copy(i,o)]:!1},o.prototype.isSimple=function(){for(var t=this.vertices,e=0;e<t.length-1;e++)for(var o=0;e-1>o;o++)if(i.segmentsIntersect(t[e],t[e+1],t[o],t[o+1]))return!1;for(var e=1;e<t.length-2;e++)if(i.segmentsIntersect(t[0],t[t.length-1],t[e],t[e+1]))return!1;return!0},o.prototype.quickDecomp=function(t,e,i,n,a,c){a=a||100,c=c||0,n=n||25,t="undefined"!=typeof t?t:[],e=e||[],i=i||[];var l=[0,0],u=[0,0],p=[0,0],h=0,d=0,f=0,v=0,g=0,m=0,y=0,j=new o,b=new o,A=this,E=this.vertices;if(E.length<3)return t;if(c++,c>a)return console.warn("quickDecomp: max level ("+a+") reached."),t;for(var w=0;w<this.vertices.length;++w)if(A.isReflex(w)){e.push(A.vertices[w]),h=d=Number.MAX_VALUE;for(var x=0;x<this.vertices.length;++x)r.left(A.at(w-1),A.at(w),A.at(x))&&r.rightOn(A.at(w-1),A.at(w),A.at(x-1))&&(p=s(A.at(w-1),A.at(w),A.at(x),A.at(x-1)),r.right(A.at(w+1),A.at(w),p)&&(f=r.sqdist(A.vertices[w],p),d>f&&(d=f,u=p,m=x))),r.left(A.at(w+1),A.at(w),A.at(x+1))&&r.rightOn(A.at(w+1),A.at(w),A.at(x))&&(p=s(A.at(w+1),A.at(w),A.at(x),A.at(x+1)),r.left(A.at(w-1),A.at(w),p)&&(f=r.sqdist(A.vertices[w],p),h>f&&(h=f,l=p,g=x)));if(m==(g+1)%this.vertices.length)p[0]=(u[0]+l[0])/2,p[1]=(u[1]+l[1])/2,i.push(p),g>w?(j.append(A,w,g+1),j.vertices.push(p),b.vertices.push(p),0!=m&&b.append(A,m,A.vertices.length),b.append(A,0,w+1)):(0!=w&&j.append(A,w,A.vertices.length),j.append(A,0,g+1),j.vertices.push(p),b.vertices.push(p),b.append(A,m,w+1));else{if(m>g&&(g+=this.vertices.length),v=Number.MAX_VALUE,m>g)return t;for(var x=m;g>=x;++x)r.leftOn(A.at(w-1),A.at(w),A.at(x))&&r.rightOn(A.at(w+1),A.at(w),A.at(x))&&(f=r.sqdist(A.at(w),A.at(x)),v>f&&(v=f,y=x%this.vertices.length));y>w?(j.append(A,w,y+1),0!=y&&b.append(A,y,E.length),b.append(A,0,w+1)):(0!=w&&j.append(A,w,E.length),j.append(A,0,y+1),b.append(A,y,w+1))}return j.vertices.length<b.vertices.length?(j.quickDecomp(t,e,i,n,a,c),b.quickDecomp(t,e,i,n,a,c)):(b.quickDecomp(t,e,i,n,a,c),j.quickDecomp(t,e,i,n,a,c)),t}return t.push(this),t},o.prototype.removeCollinearPoints=function(t){for(var e=0,o=this.vertices.length-1;this.vertices.length>3&&o>=0;--o)r.collinear(this.at(o-1),this.at(o),this.at(o+1),t)&&(this.vertices.splice(o%this.vertices.length,1),o--,e++);return e}},{"./Line":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/node_modules/poly-decomp/src/Line.js","./Point":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/node_modules/poly-decomp/src/Point.js","./Scalar":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/node_modules/poly-decomp/src/Scalar.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/node_modules/poly-decomp/src/Scalar.js":[function(t,e){function o(){}e.exports=o,o.eq=function(t,e,o){return o=o||0,Math.abs(t-e)<o}},{}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/node_modules/poly-decomp/src/index.js":[function(t,e){e.exports={Polygon:t("./Polygon"),Point:t("./Point")}},{"./Point":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/node_modules/poly-decomp/src/Point.js","./Polygon":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/node_modules/poly-decomp/src/Polygon.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/package.json":[function(t,e){e.exports={name:"p2",version:"0.6.0",description:"A JavaScript 2D physics engine.",author:{name:"Stefan Hedman",email:"schteppe@gmail.com",url:"http://steffe.se"},keywords:["p2.js","p2","physics","engine","2d"],main:"./src/p2.js",engines:{node:"*"},repository:{type:"git",url:"https://github.com/schteppe/p2.js.git"},bugs:{url:"https://github.com/schteppe/p2.js/issues"},licenses:[{type:"MIT"}],devDependencies:{grunt:"~0.4.0","grunt-contrib-jshint":"~0.9.2","grunt-contrib-nodeunit":"~0.1.2","grunt-contrib-uglify":"~0.4.0","grunt-contrib-watch":"~0.5.0","grunt-browserify":"~2.0.1","grunt-contrib-concat":"^0.4.0"},dependencies:{"poly-decomp":"0.1.0"},homepage:"https://github.com/schteppe/p2.js",_id:"p2@0.6.0",dist:{shasum:"e0a98ca90fe0f95667ee0d6f0b4b164cab306382",tarball:"http://registry.npmjs.org/p2/-/p2-0.6.0.tgz"},_from:"p2@0.6.0",_npmVersion:"1.4.3",_npmUser:{name:"schteppe",email:"schteppe@gmail.com"},maintainers:[{name:"schteppe",email:"schteppe@gmail.com"}],directories:{},_shasum:"e0a98ca90fe0f95667ee0d6f0b4b164cab306382",_resolved:"https://registry.npmjs.org/p2/-/p2-0.6.0.tgz",readme:"ERROR: No README data found!"}
},{}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/AABB.js":[function(t,e){function o(t){this.lowerBound=s.create(),t&&t.lowerBound&&s.copy(this.lowerBound,t.lowerBound),this.upperBound=s.create(),t&&t.upperBound&&s.copy(this.upperBound,t.upperBound)}{var s=t("../math/vec2");t("../utils/Utils")}e.exports=o;var i=s.create();o.prototype.setFromPoints=function(t,e,o,r){var n=this.lowerBound,a=this.upperBound;"number"!=typeof o&&(o=0),0!==o?s.rotate(n,t[0],o):s.copy(n,t[0]),s.copy(a,n);for(var c=Math.cos(o),l=Math.sin(o),u=1;u<t.length;u++){var p=t[u];if(0!==o){var h=p[0],d=p[1];i[0]=c*h-l*d,i[1]=l*h+c*d,p=i}for(var f=0;2>f;f++)p[f]>a[f]&&(a[f]=p[f]),p[f]<n[f]&&(n[f]=p[f])}e&&(s.add(this.lowerBound,this.lowerBound,e),s.add(this.upperBound,this.upperBound,e)),r&&(this.lowerBound[0]-=r,this.lowerBound[1]-=r,this.upperBound[0]+=r,this.upperBound[1]+=r)},o.prototype.copy=function(t){s.copy(this.lowerBound,t.lowerBound),s.copy(this.upperBound,t.upperBound)},o.prototype.extend=function(t){for(var e=2;e--;){var o=t.lowerBound[e];this.lowerBound[e]>o&&(this.lowerBound[e]=o);var s=t.upperBound[e];this.upperBound[e]<s&&(this.upperBound[e]=s)}},o.prototype.overlaps=function(t){var e=this.lowerBound,o=this.upperBound,s=t.lowerBound,i=t.upperBound;return(s[0]<=o[0]&&o[0]<=i[0]||e[0]<=i[0]&&i[0]<=o[0])&&(s[1]<=o[1]&&o[1]<=i[1]||e[1]<=i[1]&&i[1]<=o[1])}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/Broadphase.js":[function(t,e){function o(t){this.type=t,this.result=[],this.world=null,this.boundingVolumeType=o.AABB}var s=t("../math/vec2"),i=t("../objects/Body");e.exports=o,o.AABB=1,o.BOUNDING_CIRCLE=2,o.prototype.setWorld=function(t){this.world=t},o.prototype.getCollisionPairs=function(){throw new Error("getCollisionPairs must be implemented in a subclass!")};var r=s.create();o.boundingRadiusCheck=function(t,e){s.sub(r,t.position,e.position);var o=s.squaredLength(r),i=t.boundingRadius+e.boundingRadius;return i*i>=o},o.aabbCheck=function(t,e){return t.aabbNeedsUpdate&&t.updateAABB(),e.aabbNeedsUpdate&&e.updateAABB(),t.aabb.overlaps(e.aabb)},o.prototype.boundingVolumeCheck=function(t,e){var s;switch(this.boundingVolumeType){case o.BOUNDING_CIRCLE:s=o.boundingRadiusCheck(t,e);break;case o.AABB:s=o.aabbCheck(t,e);break;default:throw new Error("Bounding volume type not recognized: "+this.boundingVolumeType)}return s},o.canCollide=function(t,e){return t.type===i.STATIC&&e.type===i.STATIC?!1:t.type===i.KINEMATIC&&e.type===i.STATIC||t.type===i.STATIC&&e.type===i.KINEMATIC?!1:t.type===i.KINEMATIC&&e.type===i.KINEMATIC?!1:t.sleepState===i.SLEEPING&&e.sleepState===i.SLEEPING?!1:t.sleepState===i.SLEEPING&&e.type===i.STATIC||e.sleepState===i.SLEEPING&&t.type===i.STATIC?!1:!0},o.NAIVE=1,o.SAP=2},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../objects/Body":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/Body.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/GridBroadphase.js":[function(t,e){function o(t){s.apply(this),t=i.defaults(t,{xmin:-100,xmax:100,ymin:-100,ymax:100,nx:10,ny:10}),this.xmin=t.xmin,this.ymin=t.ymin,this.xmax=t.xmax,this.ymax=t.ymax,this.nx=t.nx,this.ny=t.ny,this.binsizeX=(this.xmax-this.xmin)/this.nx,this.binsizeY=(this.ymax-this.ymin)/this.ny}var s=(t("../shapes/Circle"),t("../shapes/Plane"),t("../shapes/Particle"),t("../collision/Broadphase")),i=(t("../math/vec2"),t("../utils/Utils"));e.exports=o,o.prototype=new s,o.prototype.getCollisionPairs=function(t){for(var e=[],o=t.bodies,i=o.length,r=(this.binsizeX,this.binsizeY,this.nx),n=this.ny,a=this.xmin,c=this.ymin,l=this.xmax,u=this.ymax,p=[],h=r*n,d=0;h>d;d++)p.push([]);for(var f=r/(l-a),v=n/(u-c),d=0;d!==i;d++)for(var g=o[d],m=g.aabb,y=Math.max(m.lowerBound[0],a),j=Math.max(m.lowerBound[1],c),b=Math.min(m.upperBound[0],l),A=Math.min(m.upperBound[1],u),E=Math.floor(f*(y-a)),w=Math.floor(v*(j-c)),x=Math.floor(f*(b-a)),B=Math.floor(v*(A-c)),U=E;x>=U;U++)for(var S=w;B>=S;S++){var k=U,q=S,C=k*(n-1)+q;C>=0&&h>C&&p[C].push(g)}for(var d=0;d!==h;d++)for(var _=p[d],U=0,P=_.length;U!==P;U++)for(var g=_[U],S=0;S!==U;S++){var L=_[S];s.canCollide(g,L)&&this.boundingVolumeCheck(g,L)&&e.push(g,L)}return e}},{"../collision/Broadphase":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/Broadphase.js","../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../shapes/Circle":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Circle.js","../shapes/Particle":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Particle.js","../shapes/Plane":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Plane.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/NaiveBroadphase.js":[function(t,e){function o(){s.call(this,s.NAIVE)}{var s=(t("../shapes/Circle"),t("../shapes/Plane"),t("../shapes/Shape"),t("../shapes/Particle"),t("../collision/Broadphase"));t("../math/vec2")}e.exports=o,o.prototype=new s,o.prototype.getCollisionPairs=function(t){var e=t.bodies,o=this.result;o.length=0;for(var i=0,r=e.length;i!==r;i++)for(var n=e[i],a=0;i>a;a++){var c=e[a];s.canCollide(n,c)&&this.boundingVolumeCheck(n,c)&&o.push(n,c)}return o}},{"../collision/Broadphase":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/Broadphase.js","../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../shapes/Circle":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Circle.js","../shapes/Particle":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Particle.js","../shapes/Plane":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Plane.js","../shapes/Shape":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Shape.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/Narrowphase.js":[function(t,e){function o(){this.contactEquations=[],this.frictionEquations=[],this.enableFriction=!0,this.slipForce=10,this.frictionCoefficient=.3,this.surfaceVelocity=0,this.reuseObjects=!0,this.reusableContactEquations=[],this.reusableFrictionEquations=[],this.restitution=0,this.stiffness=p.DEFAULT_STIFFNESS,this.relaxation=p.DEFAULT_RELAXATION,this.frictionStiffness=p.DEFAULT_STIFFNESS,this.frictionRelaxation=p.DEFAULT_RELAXATION,this.enableFrictionReduction=!0,this.collidingBodiesLastStep=new u,this.contactSkinSize=.01}function s(t,e){r.set(t.vertices[0],.5*-e.length,-e.radius),r.set(t.vertices[1],.5*e.length,-e.radius),r.set(t.vertices[2],.5*e.length,e.radius),r.set(t.vertices[3],.5*-e.length,e.radius)}function i(t,e,o,s){for(var i=D,c=W,l=X,u=z,p=t,h=e.vertices,d=null,f=0;f!==h.length+1;f++){var v=h[f%h.length],g=h[(f+1)%h.length];r.rotate(i,v,s),r.rotate(c,g,s),a(i,i,o),a(c,c,o),n(l,i,p),n(u,c,p);var m=r.crossLength(l,u);if(null===d&&(d=m),0>=m*d)return!1;d=m}return!0}var r=t("../math/vec2"),n=r.sub,a=r.add,c=r.dot,l=t("../utils/Utils"),u=t("../utils/TupleDictionary"),p=t("../equations/Equation"),h=t("../equations/ContactEquation"),d=t("../equations/FrictionEquation"),f=t("../shapes/Circle"),v=t("../shapes/Convex"),g=t("../shapes/Shape"),m=(t("../objects/Body"),t("../shapes/Rectangle"));e.exports=o;var y=r.fromValues(0,1),j=r.fromValues(0,0),b=r.fromValues(0,0),A=r.fromValues(0,0),E=r.fromValues(0,0),w=r.fromValues(0,0),x=r.fromValues(0,0),B=r.fromValues(0,0),U=r.fromValues(0,0),S=r.fromValues(0,0),k=r.fromValues(0,0),q=r.fromValues(0,0),C=r.fromValues(0,0),_=r.fromValues(0,0),P=r.fromValues(0,0),L=r.fromValues(0,0),M=r.fromValues(0,0),F=r.fromValues(0,0),N=r.fromValues(0,0),I=[];o.prototype.collidedLastStep=function(t,e){var o=0|t.id,s=0|e.id;return!!this.collidingBodiesLastStep.get(o,s)},o.prototype.reset=function(){this.collidingBodiesLastStep.reset();for(var t=this.contactEquations,e=t.length;e--;){var o=t[e],s=o.bodyA.id,i=o.bodyB.id;this.collidingBodiesLastStep.set(s,i,!0)}if(this.reuseObjects){var r=this.contactEquations,n=this.frictionEquations,a=this.reusableFrictionEquations,c=this.reusableContactEquations;l.appendArray(c,r),l.appendArray(a,n)}this.contactEquations.length=this.frictionEquations.length=0},o.prototype.createContactEquation=function(t,e,o,s){var i=this.reusableContactEquations.length?this.reusableContactEquations.pop():new h(t,e);return i.bodyA=t,i.bodyB=e,i.shapeA=o,i.shapeB=s,i.restitution=this.restitution,i.firstImpact=!this.collidedLastStep(t,e),i.stiffness=this.stiffness,i.relaxation=this.relaxation,i.needsUpdate=!0,i.enabled=!0,i.offset=this.contactSkinSize,i},o.prototype.createFrictionEquation=function(t,e,o,s){var i=this.reusableFrictionEquations.length?this.reusableFrictionEquations.pop():new d(t,e);return i.bodyA=t,i.bodyB=e,i.shapeA=o,i.shapeB=s,i.setSlipForce(this.slipForce),i.frictionCoefficient=this.frictionCoefficient,i.relativeVelocity=this.surfaceVelocity,i.enabled=!0,i.needsUpdate=!0,i.stiffness=this.frictionStiffness,i.relaxation=this.frictionRelaxation,i.contactEquations.length=0,i},o.prototype.createFrictionFromContact=function(t){var e=this.createFrictionEquation(t.bodyA,t.bodyB,t.shapeA,t.shapeB);return r.copy(e.contactPointA,t.contactPointA),r.copy(e.contactPointB,t.contactPointB),r.rotate90cw(e.t,t.normalA),e.contactEquations.push(t),e},o.prototype.createFrictionFromAverage=function(t){if(!t)throw new Error("numContacts == 0!");{var e=this.contactEquations[this.contactEquations.length-1],o=this.createFrictionEquation(e.bodyA,e.bodyB,e.shapeA,e.shapeB),s=e.bodyA;e.bodyB}r.set(o.contactPointA,0,0),r.set(o.contactPointB,0,0),r.set(o.t,0,0);for(var i=0;i!==t;i++)e=this.contactEquations[this.contactEquations.length-1-i],e.bodyA===s?(r.add(o.t,o.t,e.normalA),r.add(o.contactPointA,o.contactPointA,e.contactPointA),r.add(o.contactPointB,o.contactPointB,e.contactPointB)):(r.sub(o.t,o.t,e.normalA),r.add(o.contactPointA,o.contactPointA,e.contactPointB),r.add(o.contactPointB,o.contactPointB,e.contactPointA)),o.contactEquations.push(e);var n=1/t;return r.scale(o.contactPointA,o.contactPointA,n),r.scale(o.contactPointB,o.contactPointB,n),r.normalize(o.t,o.t),r.rotate90cw(o.t,o.t),o},o.prototype[g.LINE|g.CONVEX]=o.prototype.convexLine=function(t,e,o,s,i,r,n,a,c){return c?!1:0},o.prototype[g.LINE|g.RECTANGLE]=o.prototype.lineRectangle=function(t,e,o,s,i,r,n,a,c){return c?!1:0};var R=new m(1,1),V=r.create();o.prototype[g.CAPSULE|g.CONVEX]=o.prototype[g.CAPSULE|g.RECTANGLE]=o.prototype.convexCapsule=function(t,e,o,i,n,a,c,l,u){var p=V;r.set(p,a.length/2,0),r.rotate(p,p,l),r.add(p,p,c);var h=this.circleConvex(n,a,p,l,t,e,o,i,u,a.radius);r.set(p,-a.length/2,0),r.rotate(p,p,l),r.add(p,p,c);var d=this.circleConvex(n,a,p,l,t,e,o,i,u,a.radius);if(u&&(h||d))return!0;var f=R;s(f,a);var v=this.convexConvex(t,e,o,i,n,f,c,l,u);return v+h+d},o.prototype[g.CAPSULE|g.LINE]=o.prototype.lineCapsule=function(t,e,o,s,i,r,n,a,c){return c?!1:0};var T=r.create(),G=r.create(),O=new m(1,1);o.prototype[g.CAPSULE|g.CAPSULE]=o.prototype.capsuleCapsule=function(t,e,o,i,n,a,c,l,u){for(var p,h=T,d=G,f=0,v=0;2>v;v++){r.set(h,(0===v?-1:1)*e.length/2,0),r.rotate(h,h,i),r.add(h,h,o);for(var g=0;2>g;g++){r.set(d,(0===g?-1:1)*a.length/2,0),r.rotate(d,d,l),r.add(d,d,c),this.enableFrictionReduction&&(p=this.enableFriction,this.enableFriction=!1);var m=this.circleCircle(t,e,h,i,n,a,d,l,u,e.radius,a.radius);if(this.enableFrictionReduction&&(this.enableFriction=p),u&&m)return!0;f+=m}}this.enableFrictionReduction&&(p=this.enableFriction,this.enableFriction=!1);var y=O;s(y,e);var j=this.convexCapsule(t,y,o,i,n,a,c,l,u);if(this.enableFrictionReduction&&(this.enableFriction=p),u&&j)return!0;if(f+=j,this.enableFrictionReduction){var p=this.enableFriction;this.enableFriction=!1}s(y,a);var b=this.convexCapsule(n,y,c,l,t,e,o,i,u);return this.enableFrictionReduction&&(this.enableFriction=p),u&&b?!0:(f+=b,this.enableFrictionReduction&&f&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(f)),f)},o.prototype[g.LINE|g.LINE]=o.prototype.lineLine=function(t,e,o,s,i,r,n,a,c){return c?!1:0},o.prototype[g.PLANE|g.LINE]=o.prototype.planeLine=function(t,e,o,s,i,l,u,p,h){var d=j,f=b,v=A,g=E,m=w,k=x,q=B,C=U,_=S,P=I,L=0;r.set(d,-l.length/2,0),r.set(f,l.length/2,0),r.rotate(v,d,p),r.rotate(g,f,p),a(v,v,u),a(g,g,u),r.copy(d,v),r.copy(f,g),n(m,f,d),r.normalize(k,m),r.rotate90cw(_,k),r.rotate(C,y,s),P[0]=d,P[1]=f;for(var M=0;M<P.length;M++){var F=P[M];n(q,F,o);var N=c(q,C);if(0>N){if(h)return!0;var R=this.createContactEquation(t,i,e,l);L++,r.copy(R.normalA,C),r.normalize(R.normalA,R.normalA),r.scale(q,C,N),n(R.contactPointA,F,q),n(R.contactPointA,R.contactPointA,t.position),n(R.contactPointB,F,u),a(R.contactPointB,R.contactPointB,u),n(R.contactPointB,R.contactPointB,i.position),this.contactEquations.push(R),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(R))}}return h?!1:(this.enableFrictionReduction||L&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(L)),L)},o.prototype[g.PARTICLE|g.CAPSULE]=o.prototype.particleCapsule=function(t,e,o,s,i,r,n,a,c){return this.circleLine(t,e,o,s,i,r,n,a,c,r.radius,0)},o.prototype[g.CIRCLE|g.LINE]=o.prototype.circleLine=function(t,e,o,s,i,l,u,p,h,d,f){var d=d||0,f="undefined"!=typeof f?f:e.radius,v=j,g=b,m=A,y=E,L=w,M=x,F=B,N=U,R=S,V=k,T=q,G=C,O=_,D=P,W=I;r.set(N,-l.length/2,0),r.set(R,l.length/2,0),r.rotate(V,N,p),r.rotate(T,R,p),a(V,V,u),a(T,T,u),r.copy(N,V),r.copy(R,T),n(M,R,N),r.normalize(F,M),r.rotate90cw(L,F),n(G,o,N);var X=c(G,L);n(y,N,u),n(O,o,u);var z=f+d;if(Math.abs(X)<z){r.scale(v,L,X),n(m,o,v),r.scale(g,L,c(L,O)),r.normalize(g,g),r.scale(g,g,d),a(m,m,g);var Y=c(F,m),K=c(F,N),H=c(F,R);if(Y>K&&H>Y){if(h)return!0;var Z=this.createContactEquation(t,i,e,l);return r.scale(Z.normalA,v,-1),r.normalize(Z.normalA,Z.normalA),r.scale(Z.contactPointA,Z.normalA,f),a(Z.contactPointA,Z.contactPointA,o),n(Z.contactPointA,Z.contactPointA,t.position),n(Z.contactPointB,m,u),a(Z.contactPointB,Z.contactPointB,u),n(Z.contactPointB,Z.contactPointB,i.position),this.contactEquations.push(Z),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(Z)),1}}W[0]=N,W[1]=R;for(var J=0;J<W.length;J++){var Q=W[J];if(n(G,Q,o),r.squaredLength(G)<Math.pow(z,2)){if(h)return!0;var Z=this.createContactEquation(t,i,e,l);return r.copy(Z.normalA,G),r.normalize(Z.normalA,Z.normalA),r.scale(Z.contactPointA,Z.normalA,f),a(Z.contactPointA,Z.contactPointA,o),n(Z.contactPointA,Z.contactPointA,t.position),n(Z.contactPointB,Q,u),r.scale(D,Z.normalA,-d),a(Z.contactPointB,Z.contactPointB,D),a(Z.contactPointB,Z.contactPointB,u),n(Z.contactPointB,Z.contactPointB,i.position),this.contactEquations.push(Z),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(Z)),1}}return 0},o.prototype[g.CIRCLE|g.CAPSULE]=o.prototype.circleCapsule=function(t,e,o,s,i,r,n,a,c){return this.circleLine(t,e,o,s,i,r,n,a,c,r.radius)},o.prototype[g.CIRCLE|g.CONVEX]=o.prototype[g.CIRCLE|g.RECTANGLE]=o.prototype.circleConvex=function(t,e,o,s,c,l,u,p,h,d){for(var d="number"==typeof d?d:e.radius,f=j,v=b,g=A,m=E,y=w,x=k,B=q,U=_,S=P,C=L,F=M,N=!1,I=Number.MAX_VALUE,R=l.vertices,V=0;V!==R.length+1;V++){var T=R[V%R.length],G=R[(V+1)%R.length];if(r.rotate(f,T,p),r.rotate(v,G,p),a(f,f,u),a(v,v,u),n(g,v,f),r.normalize(m,g),r.rotate90cw(y,m),r.scale(S,y,-e.radius),a(S,S,o),i(S,l,u,p)){r.sub(C,f,S);var O=Math.abs(r.dot(C,y));I>O&&(r.copy(F,S),I=O,r.scale(U,y,O),r.add(U,U,S),N=!0)}}if(N){if(h)return!0;var D=this.createContactEquation(t,c,e,l);return r.sub(D.normalA,F,o),r.normalize(D.normalA,D.normalA),r.scale(D.contactPointA,D.normalA,d),a(D.contactPointA,D.contactPointA,o),n(D.contactPointA,D.contactPointA,t.position),n(D.contactPointB,U,u),a(D.contactPointB,D.contactPointB,u),n(D.contactPointB,D.contactPointB,c.position),this.contactEquations.push(D),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(D)),1}if(d>0)for(var V=0;V<R.length;V++){var W=R[V];if(r.rotate(B,W,p),a(B,B,u),n(x,B,o),r.squaredLength(x)<Math.pow(d,2)){if(h)return!0;var D=this.createContactEquation(t,c,e,l);return r.copy(D.normalA,x),r.normalize(D.normalA,D.normalA),r.scale(D.contactPointA,D.normalA,d),a(D.contactPointA,D.contactPointA,o),n(D.contactPointA,D.contactPointA,t.position),n(D.contactPointB,B,u),a(D.contactPointB,D.contactPointB,u),n(D.contactPointB,D.contactPointB,c.position),this.contactEquations.push(D),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(D)),1}}return 0};var D=r.create(),W=r.create(),X=r.create(),z=r.create();o.prototype[g.PARTICLE|g.CONVEX]=o.prototype[g.PARTICLE|g.RECTANGLE]=o.prototype.particleConvex=function(t,e,o,s,l,u,p,h,d){var f=j,v=b,g=A,m=E,y=w,U=x,S=B,q=k,C=_,P=F,L=N,M=Number.MAX_VALUE,I=!1,R=u.vertices;if(!i(o,u,p,h))return 0;if(d)return!0;for(var V=0;V!==R.length+1;V++){var T=R[V%R.length],G=R[(V+1)%R.length];r.rotate(f,T,h),r.rotate(v,G,h),a(f,f,p),a(v,v,p),n(g,v,f),r.normalize(m,g),r.rotate90cw(y,m),n(q,o,f);{c(q,y)}n(U,f,p),n(S,o,p),r.sub(P,f,o);var O=Math.abs(r.dot(P,y));M>O&&(M=O,r.scale(C,y,O),r.add(C,C,o),r.copy(L,y),I=!0)}if(I){var D=this.createContactEquation(t,l,e,u);return r.scale(D.normalA,L,-1),r.normalize(D.normalA,D.normalA),r.set(D.contactPointA,0,0),a(D.contactPointA,D.contactPointA,o),n(D.contactPointA,D.contactPointA,t.position),n(D.contactPointB,C,p),a(D.contactPointB,D.contactPointB,p),n(D.contactPointB,D.contactPointB,l.position),this.contactEquations.push(D),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(D)),1}return 0},o.prototype[g.CIRCLE]=o.prototype.circleCircle=function(t,e,o,s,i,c,l,u,p,h,d){var f=j,h=h||e.radius,d=d||c.radius;n(f,o,l);var v=h+d;if(r.squaredLength(f)>Math.pow(v,2))return 0;if(p)return!0;var g=this.createContactEquation(t,i,e,c);return n(g.normalA,l,o),r.normalize(g.normalA,g.normalA),r.scale(g.contactPointA,g.normalA,h),r.scale(g.contactPointB,g.normalA,-d),a(g.contactPointA,g.contactPointA,o),n(g.contactPointA,g.contactPointA,t.position),a(g.contactPointB,g.contactPointB,l),n(g.contactPointB,g.contactPointB,i.position),this.contactEquations.push(g),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(g)),1},o.prototype[g.PLANE|g.CONVEX]=o.prototype[g.PLANE|g.RECTANGLE]=o.prototype.planeConvex=function(t,e,o,s,i,l,u,p,h){var d=j,f=b,v=A,g=0;r.rotate(f,y,s);for(var m=0;m!==l.vertices.length;m++){var E=l.vertices[m];if(r.rotate(d,E,p),a(d,d,u),n(v,d,o),c(v,f)<=0){if(h)return!0;g++;var w=this.createContactEquation(t,i,e,l);n(v,d,o),r.copy(w.normalA,f);var x=c(v,w.normalA);r.scale(v,w.normalA,x),n(w.contactPointB,d,i.position),n(w.contactPointA,d,v),n(w.contactPointA,w.contactPointA,t.position),this.contactEquations.push(w),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(w))}}return this.enableFrictionReduction&&this.enableFriction&&g&&this.frictionEquations.push(this.createFrictionFromAverage(g)),g},o.prototype[g.PARTICLE|g.PLANE]=o.prototype.particlePlane=function(t,e,o,s,i,a,l,u,p){var h=j,d=b;u=u||0,n(h,o,l),r.rotate(d,y,u);var f=c(h,d);if(f>0)return 0;if(p)return!0;var v=this.createContactEquation(i,t,a,e);return r.copy(v.normalA,d),r.scale(h,v.normalA,f),n(v.contactPointA,o,h),n(v.contactPointA,v.contactPointA,i.position),n(v.contactPointB,o,t.position),this.contactEquations.push(v),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(v)),1},o.prototype[g.CIRCLE|g.PARTICLE]=o.prototype.circleParticle=function(t,e,o,s,i,c,l,u,p){var h=j;if(n(h,l,o),r.squaredLength(h)>Math.pow(e.radius,2))return 0;if(p)return!0;var d=this.createContactEquation(t,i,e,c);return r.copy(d.normalA,h),r.normalize(d.normalA,d.normalA),r.scale(d.contactPointA,d.normalA,e.radius),a(d.contactPointA,d.contactPointA,o),n(d.contactPointA,d.contactPointA,t.position),n(d.contactPointB,l,i.position),this.contactEquations.push(d),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(d)),1};{var Y=new f(1),K=r.create(),H=r.create();r.create()}o.prototype[g.PLANE|g.CAPSULE]=o.prototype.planeCapsule=function(t,e,o,s,i,n,c,l,u){var p=K,h=H,d=Y;r.set(p,-n.length/2,0),r.rotate(p,p,l),a(p,p,c),r.set(h,n.length/2,0),r.rotate(h,h,l),a(h,h,c),d.radius=n.radius;var f;this.enableFrictionReduction&&(f=this.enableFriction,this.enableFriction=!1);var v=this.circlePlane(i,d,p,0,t,e,o,s,u),g=this.circlePlane(i,d,h,0,t,e,o,s,u);if(this.enableFrictionReduction&&(this.enableFriction=f),u)return v||g;var m=v+g;return this.enableFrictionReduction&&m&&this.frictionEquations.push(this.createFrictionFromAverage(m)),m},o.prototype[g.CIRCLE|g.PLANE]=o.prototype.circlePlane=function(t,e,o,s,i,l,u,p,h){var d=t,f=e,v=o,g=i,m=u,E=p;E=E||0;var w=j,x=b,B=A;n(w,v,m),r.rotate(x,y,E);var U=c(x,w);if(U>f.radius)return 0;if(h)return!0;var S=this.createContactEquation(g,d,l,e);return r.copy(S.normalA,x),r.scale(S.contactPointB,S.normalA,-f.radius),a(S.contactPointB,S.contactPointB,v),n(S.contactPointB,S.contactPointB,d.position),r.scale(B,S.normalA,U),n(S.contactPointA,w,B),a(S.contactPointA,S.contactPointA,m),n(S.contactPointA,S.contactPointA,g.position),this.contactEquations.push(S),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(S)),1},o.prototype[g.CONVEX]=o.prototype[g.CONVEX|g.RECTANGLE]=o.prototype[g.RECTANGLE]=o.prototype.convexConvex=function(t,e,s,i,l,u,p,h,d,f){var v=j,g=b,m=A,y=E,x=w,k=B,q=U,C=S,_=0,f="number"==typeof f?f:0,P=o.findSeparatingAxis(e,s,i,u,p,h,v);if(!P)return 0;n(q,p,s),c(v,q)>0&&r.scale(v,v,-1);var L=o.getClosestEdge(e,i,v,!0),M=o.getClosestEdge(u,h,v);if(-1===L||-1===M)return 0;for(var F=0;2>F;F++){var N=L,I=M,R=e,V=u,T=s,G=p,O=i,D=h,W=t,X=l;if(0===F){var z;z=N,N=I,I=z,z=R,R=V,V=z,z=T,T=G,G=z,z=O,O=D,D=z,z=W,W=X,X=z}for(var Y=I;I+2>Y;Y++){var K=V.vertices[(Y+V.vertices.length)%V.vertices.length];r.rotate(g,K,D),a(g,g,G);for(var H=0,Z=N-1;N+2>Z;Z++){var J=R.vertices[(Z+R.vertices.length)%R.vertices.length],Q=R.vertices[(Z+1+R.vertices.length)%R.vertices.length];r.rotate(m,J,O),r.rotate(y,Q,O),a(m,m,T),a(y,y,T),n(x,y,m),r.rotate90cw(C,x),r.normalize(C,C),n(q,g,m);var $=c(C,q);(Z===N&&f>=$||Z!==N&&0>=$)&&H++}if(H>=3){if(d)return!0;var te=this.createContactEquation(W,X,R,V);_++;var J=R.vertices[N%R.vertices.length],Q=R.vertices[(N+1)%R.vertices.length];r.rotate(m,J,O),r.rotate(y,Q,O),a(m,m,T),a(y,y,T),n(x,y,m),r.rotate90cw(te.normalA,x),r.normalize(te.normalA,te.normalA),n(q,g,m);var $=c(te.normalA,q);r.scale(k,te.normalA,$),n(te.contactPointA,g,T),n(te.contactPointA,te.contactPointA,k),a(te.contactPointA,te.contactPointA,T),n(te.contactPointA,te.contactPointA,W.position),n(te.contactPointB,g,G),a(te.contactPointB,te.contactPointB,G),n(te.contactPointB,te.contactPointB,X.position),this.contactEquations.push(te),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(te))}}}return this.enableFrictionReduction&&this.enableFriction&&_&&this.frictionEquations.push(this.createFrictionFromAverage(_)),_};var Z=r.fromValues(0,0);o.projectConvexOntoAxis=function(t,e,o,s,i){var n,a,l=null,u=null,p=Z;r.rotate(p,s,-o);for(var h=0;h<t.vertices.length;h++)n=t.vertices[h],a=c(n,p),(null===l||a>l)&&(l=a),(null===u||u>a)&&(u=a);if(u>l){var d=u;u=l,l=d}var f=c(e,s);r.set(i,u+f,l+f)};var J=r.fromValues(0,0),Q=r.fromValues(0,0),$=r.fromValues(0,0),te=r.fromValues(0,0),ee=r.fromValues(0,0),oe=r.fromValues(0,0);o.findSeparatingAxis=function(t,e,s,i,a,c,l){var u=null,p=!1,h=!1,d=J,f=Q,v=$,g=te,y=ee,j=oe;if(t instanceof m&&i instanceof m)for(var b=0;2!==b;b++){var A=t,E=s;1===b&&(A=i,E=c);for(var w=0;2!==w;w++){0===w?r.set(g,0,1):1===w&&r.set(g,1,0),0!==E&&r.rotate(g,g,E),o.projectConvexOntoAxis(t,e,s,g,y),o.projectConvexOntoAxis(i,a,c,g,j);var x=y,B=j,U=!1;y[0]>j[0]&&(B=y,x=j,U=!0);var S=B[0]-x[1];p=0>=S,(null===u||S>u)&&(r.copy(l,g),u=S,h=p)}}else for(var b=0;2!==b;b++){var A=t,E=s;1===b&&(A=i,E=c);for(var w=0;w!==A.vertices.length;w++){r.rotate(f,A.vertices[w],E),r.rotate(v,A.vertices[(w+1)%A.vertices.length],E),n(d,v,f),r.rotate90cw(g,d),r.normalize(g,g),o.projectConvexOntoAxis(t,e,s,g,y),o.projectConvexOntoAxis(i,a,c,g,j);var x=y,B=j,U=!1;y[0]>j[0]&&(B=y,x=j,U=!0);var S=B[0]-x[1];p=0>=S,(null===u||S>u)&&(r.copy(l,g),u=S,h=p)}}return h};var se=r.fromValues(0,0),ie=r.fromValues(0,0),re=r.fromValues(0,0);o.getClosestEdge=function(t,e,o,s){var i=se,a=ie,l=re;r.rotate(i,o,-e),s&&r.scale(i,i,-1);for(var u=-1,p=t.vertices.length,h=-1,d=0;d!==p;d++){n(a,t.vertices[(d+1)%p],t.vertices[d%p]),r.rotate90cw(l,a),r.normalize(l,l);var f=c(l,i);(-1===u||f>h)&&(u=d%p,h=f)}return u};var ne=r.create(),ae=r.create(),ce=r.create(),le=r.create(),ue=r.create(),pe=r.create(),he=r.create();o.prototype[g.CIRCLE|g.HEIGHTFIELD]=o.prototype.circleHeightfield=function(t,e,o,s,i,c,l,u,p,h){var d=c.data,h=h||e.radius,f=c.elementWidth,v=ae,g=ne,m=ue,y=he,j=pe,b=ce,A=le,E=Math.floor((o[0]-h-l[0])/f),w=Math.ceil((o[0]+h-l[0])/f);0>E&&(E=0),w>=d.length&&(w=d.length-1);for(var x=d[E],B=d[w],U=E;w>U;U++)d[U]<B&&(B=d[U]),d[U]>x&&(x=d[U]);if(o[1]-h>x)return p?!1:0;o[1]+h<B;for(var S=!1,U=E;w>U;U++){r.set(b,U*f,d[U]),r.set(A,(U+1)*f,d[U+1]),r.add(b,b,l),r.add(A,A,l),r.sub(j,A,b),r.rotate(j,j,Math.PI/2),r.normalize(j,j),r.scale(g,j,-h),r.add(g,g,o),r.sub(v,g,b);var k=r.dot(v,j);if(g[0]>=b[0]&&g[0]<A[0]&&0>=k){if(p)return!0;S=!0,r.scale(v,j,-k),r.add(m,g,v),r.copy(y,j);var q=this.createContactEquation(i,t,c,e);r.copy(q.normalA,y),r.scale(q.contactPointB,q.normalA,-h),a(q.contactPointB,q.contactPointB,o),n(q.contactPointB,q.contactPointB,t.position),r.copy(q.contactPointA,m),r.sub(q.contactPointA,q.contactPointA,i.position),this.contactEquations.push(q),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(q))}}if(S=!1,h>0)for(var U=E;w>=U;U++)if(r.set(b,U*f,d[U]),r.add(b,b,l),r.sub(v,o,b),r.squaredLength(v)<Math.pow(h,2)){if(p)return!0;S=!0;var q=this.createContactEquation(i,t,c,e);r.copy(q.normalA,v),r.normalize(q.normalA,q.normalA),r.scale(q.contactPointB,q.normalA,-h),a(q.contactPointB,q.contactPointB,o),n(q.contactPointB,q.contactPointB,t.position),n(q.contactPointA,b,l),a(q.contactPointA,q.contactPointA,l),n(q.contactPointA,q.contactPointA,i.position),this.contactEquations.push(q),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(q))}return S?1:0};var de=r.create(),fe=r.create(),ve=r.create(),ge=new v([r.create(),r.create(),r.create(),r.create()]);o.prototype[g.RECTANGLE|g.HEIGHTFIELD]=o.prototype[g.CONVEX|g.HEIGHTFIELD]=o.prototype.convexHeightfield=function(t,e,o,s,i,n,a,c,l){var u=n.data,p=n.elementWidth,h=de,d=fe,f=ve,v=ge,g=Math.floor((t.aabb.lowerBound[0]-a[0])/p),m=Math.ceil((t.aabb.upperBound[0]-a[0])/p);0>g&&(g=0),m>=u.length&&(m=u.length-1);for(var y=u[g],j=u[m],b=g;m>b;b++)u[b]<j&&(j=u[b]),u[b]>y&&(y=u[b]);if(t.aabb.lowerBound[1]>y)return l?!1:0;for(var A=0,b=g;m>b;b++){r.set(h,b*p,u[b]),r.set(d,(b+1)*p,u[b+1]),r.add(h,h,a),r.add(d,d,a);var E=100;r.set(f,.5*(d[0]+h[0]),.5*(d[1]+h[1]-E)),r.sub(v.vertices[0],d,f),r.sub(v.vertices[1],h,f),r.copy(v.vertices[2],v.vertices[1]),r.copy(v.vertices[3],v.vertices[0]),v.vertices[2][1]-=E,v.vertices[3][1]-=E,A+=this.convexConvex(t,e,o,s,i,v,f,0,l)}return A}},{"../equations/ContactEquation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/ContactEquation.js","../equations/Equation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js","../equations/FrictionEquation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/FrictionEquation.js","../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../objects/Body":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/Body.js","../shapes/Circle":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Circle.js","../shapes/Convex":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Convex.js","../shapes/Rectangle":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Rectangle.js","../shapes/Shape":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Shape.js","../utils/TupleDictionary":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/TupleDictionary.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/SAPBroadphase.js":[function(t,e){function o(){i.call(this,i.SAP),this.axisList=[],this.world=null,this.axisIndex=0;var t=this.axisList;this._addBodyHandler=function(e){t.push(e.body)},this._removeBodyHandler=function(e){var o=t.indexOf(e.body);-1!==o&&t.splice(o,1)}}var s=t("../utils/Utils"),i=t("../collision/Broadphase");e.exports=o,o.prototype=new i,o.prototype.setWorld=function(t){this.axisList.length=0,s.appendArray(this.axisList,t.bodies),t.off("addBody",this._addBodyHandler).off("removeBody",this._removeBodyHandler),t.on("addBody",this._addBodyHandler).on("removeBody",this._removeBodyHandler),this.world=t},o.sortAxisList=function(t,e){e=0|e;for(var o=1,s=t.length;s>o;o++){for(var i=t[o],r=o-1;r>=0&&!(t[r].aabb.lowerBound[e]<=i.aabb.lowerBound[e]);r--)t[r+1]=t[r];t[r+1]=i}return t},o.prototype.getCollisionPairs=function(){var t=this.axisList,e=this.result,s=this.axisIndex;e.length=0;for(var r=t.length;r--;){var n=t[r];n.aabbNeedsUpdate&&n.updateAABB()}o.sortAxisList(t,s);for(var a=0,c=0|t.length;a!==c;a++)for(var l=t[a],u=a+1;c>u;u++){var p=t[u],h=p.aabb.lowerBound[s]<=l.aabb.upperBound[s];if(!h)break;i.canCollide(l,p)&&this.boundingVolumeCheck(l,p)&&e.push(l,p)}return e}},{"../collision/Broadphase":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/Broadphase.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/Constraint.js":[function(t,e){function o(t,e,o,i){this.type=o,i=s.defaults(i,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=t,this.bodyB=e,this.collideConnected=i.collideConnected,i.wakeUpBodies&&(t&&t.wakeUp(),e&&e.wakeUp())}e.exports=o;var s=t("../utils/Utils");o.prototype.update=function(){throw new Error("method update() not implmemented in this Constraint subclass!")},o.DISTANCE=1,o.GEAR=2,o.LOCK=3,o.PRISMATIC=4,o.REVOLUTE=5,o.prototype.setStiffness=function(t){for(var e=this.equations,o=0;o!==e.length;o++){var s=e[o];s.stiffness=t,s.needsUpdate=!0}},o.prototype.setRelaxation=function(t){for(var e=this.equations,o=0;o!==e.length;o++){var s=e[o];s.relaxation=t,s.needsUpdate=!0}}},{"../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/DistanceConstraint.js":[function(t,e){function o(t,e,o){o=n.defaults(o,{localAnchorA:[0,0],localAnchorB:[0,0]}),s.call(this,t,e,s.DISTANCE,o),this.localAnchorA=r.fromValues(o.localAnchorA[0],o.localAnchorA[1]),this.localAnchorB=r.fromValues(o.localAnchorB[0],o.localAnchorB[1]);var a=this.localAnchorA,c=this.localAnchorB;if(this.distance=0,"number"==typeof o.distance)this.distance=o.distance;else{var l=r.create(),u=r.create(),p=r.create();r.rotate(l,a,t.angle),r.rotate(u,c,e.angle),r.add(p,e.position,u),r.sub(p,p,l),r.sub(p,p,t.position),this.distance=r.length(p)}var h;h="undefined"==typeof o.maxForce?Number.MAX_VALUE:o.maxForce;var d=new i(t,e,-h,h);this.equations=[d],this.maxForce=h;var p=r.create(),f=r.create(),v=r.create(),g=this;d.computeGq=function(){var t=this.bodyA,e=this.bodyB,o=t.position,s=e.position;return r.rotate(f,a,t.angle),r.rotate(v,c,e.angle),r.add(p,s,v),r.sub(p,p,f),r.sub(p,p,o),r.length(p)-g.distance
},this.setMaxForce(h),this.upperLimitEnabled=!1,this.upperLimit=1,this.lowerLimitEnabled=!1,this.lowerLimit=0,this.position=0}var s=t("./Constraint"),i=t("../equations/Equation"),r=t("../math/vec2"),n=t("../utils/Utils");e.exports=o,o.prototype=new s;var a=r.create(),c=r.create(),l=r.create();o.prototype.update=function(){var t=this.equations[0],e=this.bodyA,o=this.bodyB,s=(this.distance,e.position),i=o.position,n=this.equations[0],u=t.G;r.rotate(c,this.localAnchorA,e.angle),r.rotate(l,this.localAnchorB,o.angle),r.add(a,i,l),r.sub(a,a,c),r.sub(a,a,s),this.position=r.length(a);var p=!1;if(this.upperLimitEnabled&&this.position>this.upperLimit&&(n.maxForce=0,n.minForce=-this.maxForce,this.distance=this.upperLimit,p=!0),this.lowerLimitEnabled&&this.position<this.lowerLimit&&(n.maxForce=this.maxForce,n.minForce=0,this.distance=this.lowerLimit,p=!0),(this.lowerLimitEnabled||this.upperLimitEnabled)&&!p)return void(n.enabled=!1);n.enabled=!0,r.normalize(a,a);var h=r.crossLength(c,a),d=r.crossLength(l,a);u[0]=-a[0],u[1]=-a[1],u[2]=-h,u[3]=a[0],u[4]=a[1],u[5]=d},o.prototype.setMaxForce=function(t){var e=this.equations[0];e.minForce=-t,e.maxForce=t},o.prototype.getMaxForce=function(){var t=this.equations[0];return t.maxForce}},{"../equations/Equation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js","../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js","./Constraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/Constraint.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/GearConstraint.js":[function(t,e){function o(t,e,o){o=o||{},s.call(this,t,e,s.GEAR,o),this.ratio="number"==typeof o.ratio?o.ratio:1,this.angle="number"==typeof o.angle?o.angle:e.angle-this.ratio*t.angle,o.angle=this.angle,o.ratio=this.ratio,this.equations=[new i(t,e,o)],"number"==typeof o.maxTorque&&this.setMaxTorque(o.maxTorque)}{var s=t("./Constraint"),i=(t("../equations/Equation"),t("../equations/AngleLockEquation"));t("../math/vec2")}e.exports=o,o.prototype=new s,o.prototype.update=function(){var t=this.equations[0];t.ratio!==this.ratio&&t.setRatio(this.ratio),t.angle=this.angle},o.prototype.setMaxTorque=function(t){this.equations[0].setMaxTorque(t)},o.prototype.getMaxTorque=function(){return this.equations[0].maxForce}},{"../equations/AngleLockEquation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/AngleLockEquation.js","../equations/Equation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js","../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Constraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/Constraint.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/LockConstraint.js":[function(t,e){function o(t,e,o){o=o||{},s.call(this,t,e,s.LOCK,o);var n="undefined"==typeof o.maxForce?Number.MAX_VALUE:o.maxForce,a=(o.localAngleB||0,new r(t,e,-n,n)),c=new r(t,e,-n,n),l=new r(t,e,-n,n),u=i.create(),p=i.create(),h=this;a.computeGq=function(){return i.rotate(u,h.localOffsetB,t.angle),i.sub(p,e.position,t.position),i.sub(p,p,u),p[0]},c.computeGq=function(){return i.rotate(u,h.localOffsetB,t.angle),i.sub(p,e.position,t.position),i.sub(p,p,u),p[1]};var d=i.create(),f=i.create();l.computeGq=function(){return i.rotate(d,h.localOffsetB,e.angle-h.localAngleB),i.scale(d,d,-1),i.sub(p,t.position,e.position),i.add(p,p,d),i.rotate(f,d,-Math.PI/2),i.normalize(f,f),i.dot(p,f)},this.localOffsetB=i.create(),o.localOffsetB?i.copy(this.localOffsetB,o.localOffsetB):(i.sub(this.localOffsetB,e.position,t.position),i.rotate(this.localOffsetB,this.localOffsetB,-t.angle)),this.localAngleB=0,this.localAngleB="number"==typeof o.localAngleB?o.localAngleB:e.angle-t.angle,this.equations.push(a,c,l),this.setMaxForce(n)}var s=t("./Constraint"),i=t("../math/vec2"),r=t("../equations/Equation");e.exports=o,o.prototype=new s,o.prototype.setMaxForce=function(t){for(var e=this.equations,o=0;o<this.equations.length;o++)e[o].maxForce=t,e[o].minForce=-t},o.prototype.getMaxForce=function(){return this.equations[0].maxForce};var n=i.create(),a=i.create(),c=i.create(),l=i.fromValues(1,0),u=i.fromValues(0,1);o.prototype.update=function(){var t=this.equations[0],e=this.equations[1],o=this.equations[2],s=this.bodyA,r=this.bodyB;i.rotate(n,this.localOffsetB,s.angle),i.rotate(a,this.localOffsetB,r.angle-this.localAngleB),i.scale(a,a,-1),i.rotate(c,a,Math.PI/2),i.normalize(c,c),t.G[0]=-1,t.G[1]=0,t.G[2]=-i.crossLength(n,l),t.G[3]=1,e.G[0]=0,e.G[1]=-1,e.G[2]=-i.crossLength(n,u),e.G[4]=1,o.G[0]=-c[0],o.G[1]=-c[1],o.G[3]=c[0],o.G[4]=c[1],o.G[5]=i.crossLength(a,c)}},{"../equations/Equation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js","../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Constraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/Constraint.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/PrismaticConstraint.js":[function(t,e){function o(t,e,o){o=o||{},s.call(this,t,e,s.PRISMATIC,o);var c=n.fromValues(0,0),l=n.fromValues(1,0),u=n.fromValues(0,0);o.localAnchorA&&n.copy(c,o.localAnchorA),o.localAxisA&&n.copy(l,o.localAxisA),o.localAnchorB&&n.copy(u,o.localAnchorB),this.localAnchorA=c,this.localAnchorB=u,this.localAxisA=l;var p=this.maxForce="undefined"!=typeof o.maxForce?o.maxForce:Number.MAX_VALUE,h=new r(t,e,-p,p),d=new n.create,f=new n.create,v=new n.create,g=new n.create;if(h.computeGq=function(){return n.dot(v,g)},h.updateJacobian=function(){var o=this.G,s=t.position,i=e.position;n.rotate(d,c,t.angle),n.rotate(f,u,e.angle),n.add(v,i,f),n.sub(v,v,s),n.sub(v,v,d),n.rotate(g,l,t.angle+Math.PI/2),o[0]=-g[0],o[1]=-g[1],o[2]=-n.crossLength(d,g)+n.crossLength(g,v),o[3]=g[0],o[4]=g[1],o[5]=n.crossLength(f,g)},this.equations.push(h),!o.disableRotationalLock){var m=new a(t,e,-p,p);this.equations.push(m)}this.position=0,this.velocity=0,this.lowerLimitEnabled="undefined"!=typeof o.lowerLimit?!0:!1,this.upperLimitEnabled="undefined"!=typeof o.upperLimit?!0:!1,this.lowerLimit="undefined"!=typeof o.lowerLimit?o.lowerLimit:0,this.upperLimit="undefined"!=typeof o.upperLimit?o.upperLimit:1,this.upperLimitEquation=new i(t,e),this.lowerLimitEquation=new i(t,e),this.upperLimitEquation.minForce=this.lowerLimitEquation.minForce=0,this.upperLimitEquation.maxForce=this.lowerLimitEquation.maxForce=p,this.motorEquation=new r(t,e),this.motorEnabled=!1,this.motorSpeed=0;{var y=this,j=this.motorEquation;j.computeGW}j.computeGq=function(){return 0},j.computeGW=function(){var t=this.G,e=this.bodyA,o=this.bodyB,s=e.velocity,i=o.velocity,r=e.angularVelocity,n=o.angularVelocity;return this.gmult(t,s,r,i,n)+y.motorSpeed}}var s=t("./Constraint"),i=t("../equations/ContactEquation"),r=t("../equations/Equation"),n=t("../math/vec2"),a=t("../equations/RotationalLockEquation");e.exports=o,o.prototype=new s;var c=n.create(),l=n.create(),u=n.create(),p=n.create(),h=n.create(),d=n.create();o.prototype.update=function(){var t=this.equations,e=t[0],o=this.upperLimit,s=this.lowerLimit,i=this.upperLimitEquation,r=this.lowerLimitEquation,a=this.bodyA,f=this.bodyB,v=this.localAxisA,g=this.localAnchorA,m=this.localAnchorB;e.updateJacobian(),n.rotate(c,v,a.angle),n.rotate(p,g,a.angle),n.add(l,p,a.position),n.rotate(h,m,f.angle),n.add(u,h,f.position);var y=this.position=n.dot(u,c)-n.dot(l,c);if(this.motorEnabled){var j=this.motorEquation.G;j[0]=c[0],j[1]=c[1],j[2]=n.crossLength(c,h),j[3]=-c[0],j[4]=-c[1],j[5]=-n.crossLength(c,p)}if(this.upperLimitEnabled&&y>o)n.scale(i.normalA,c,-1),n.sub(i.contactPointA,l,a.position),n.sub(i.contactPointB,u,f.position),n.scale(d,c,o),n.add(i.contactPointA,i.contactPointA,d),-1===t.indexOf(i)&&t.push(i);else{var b=t.indexOf(i);-1!==b&&t.splice(b,1)}if(this.lowerLimitEnabled&&s>y)n.scale(r.normalA,c,1),n.sub(r.contactPointA,l,a.position),n.sub(r.contactPointB,u,f.position),n.scale(d,c,s),n.sub(r.contactPointB,r.contactPointB,d),-1===t.indexOf(r)&&t.push(r);else{var b=t.indexOf(r);-1!==b&&t.splice(b,1)}},o.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},o.prototype.disableMotor=function(){if(this.motorEnabled){var t=this.equations.indexOf(this.motorEquation);this.equations.splice(t,1),this.motorEnabled=!1}},o.prototype.setLimits=function(t,e){"number"==typeof t?(this.lowerLimit=t,this.lowerLimitEnabled=!0):(this.lowerLimit=t,this.lowerLimitEnabled=!1),"number"==typeof e?(this.upperLimit=e,this.upperLimitEnabled=!0):(this.upperLimit=e,this.upperLimitEnabled=!1)}},{"../equations/ContactEquation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/ContactEquation.js","../equations/Equation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js","../equations/RotationalLockEquation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/RotationalLockEquation.js","../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Constraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/Constraint.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/RevoluteConstraint.js":[function(t,e){function o(t,e,o){o=o||{},s.call(this,t,e,s.REVOLUTE,o);var d=this.maxForce="undefined"!=typeof o.maxForce?o.maxForce:Number.MAX_VALUE;this.pivotA=a.create(),this.pivotB=a.create(),o.worldPivot?(a.sub(this.pivotA,o.worldPivot,t.position),a.sub(this.pivotB,o.worldPivot,e.position),a.rotate(this.pivotA,this.pivotA,-t.angle),a.rotate(this.pivotB,this.pivotB,-e.angle)):(a.copy(this.pivotA,o.localPivotA),a.copy(this.pivotB,o.localPivotB));var f=this.equations=[new i(t,e,-d,d),new i(t,e,-d,d)],v=f[0],g=f[1],m=this;v.computeGq=function(){return a.rotate(c,m.pivotA,t.angle),a.rotate(l,m.pivotB,e.angle),a.add(h,e.position,l),a.sub(h,h,t.position),a.sub(h,h,c),a.dot(h,u)},g.computeGq=function(){return a.rotate(c,m.pivotA,t.angle),a.rotate(l,m.pivotB,e.angle),a.add(h,e.position,l),a.sub(h,h,t.position),a.sub(h,h,c),a.dot(h,p)},g.minForce=v.minForce=-d,g.maxForce=v.maxForce=d,this.motorEquation=new r(t,e),this.motorEnabled=!1,this.angle=0,this.lowerLimitEnabled=!1,this.upperLimitEnabled=!1,this.lowerLimit=0,this.upperLimit=0,this.upperLimitEquation=new n(t,e),this.lowerLimitEquation=new n(t,e),this.upperLimitEquation.minForce=0,this.lowerLimitEquation.maxForce=0}var s=t("./Constraint"),i=t("../equations/Equation"),r=t("../equations/RotationalVelocityEquation"),n=t("../equations/RotationalLockEquation"),a=t("../math/vec2");e.exports=o;var c=a.create(),l=a.create(),u=a.fromValues(1,0),p=a.fromValues(0,1),h=a.create();o.prototype=new s,o.prototype.setLimits=function(t,e){"number"==typeof t?(this.lowerLimit=t,this.lowerLimitEnabled=!0):(this.lowerLimit=t,this.lowerLimitEnabled=!1),"number"==typeof e?(this.upperLimit=e,this.upperLimitEnabled=!0):(this.upperLimit=e,this.upperLimitEnabled=!1)},o.prototype.update=function(){var t=this.bodyA,e=this.bodyB,o=this.pivotA,s=this.pivotB,i=this.equations,r=(i[0],i[1],i[0]),n=i[1],h=this.upperLimit,d=this.lowerLimit,f=this.upperLimitEquation,v=this.lowerLimitEquation,g=this.angle=e.angle-t.angle;if(this.upperLimitEnabled&&g>h)f.angle=h,-1===i.indexOf(f)&&i.push(f);else{var m=i.indexOf(f);-1!==m&&i.splice(m,1)}if(this.lowerLimitEnabled&&d>g)v.angle=d,-1===i.indexOf(v)&&i.push(v);else{var m=i.indexOf(v);-1!==m&&i.splice(m,1)}a.rotate(c,o,t.angle),a.rotate(l,s,e.angle),r.G[0]=-1,r.G[1]=0,r.G[2]=-a.crossLength(c,u),r.G[3]=1,r.G[4]=0,r.G[5]=a.crossLength(l,u),n.G[0]=0,n.G[1]=-1,n.G[2]=-a.crossLength(c,p),n.G[3]=0,n.G[4]=1,n.G[5]=a.crossLength(l,p)},o.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},o.prototype.disableMotor=function(){if(this.motorEnabled){var t=this.equations.indexOf(this.motorEquation);this.equations.splice(t,1),this.motorEnabled=!1}},o.prototype.motorIsEnabled=function(){return!!this.motorEnabled},o.prototype.setMotorSpeed=function(t){if(this.motorEnabled){var e=this.equations.indexOf(this.motorEquation);this.equations[e].relativeVelocity=t}},o.prototype.getMotorSpeed=function(){return this.motorEnabled?this.motorEquation.relativeVelocity:!1}},{"../equations/Equation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js","../equations/RotationalLockEquation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/RotationalLockEquation.js","../equations/RotationalVelocityEquation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/RotationalVelocityEquation.js","../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Constraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/Constraint.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/AngleLockEquation.js":[function(t,e){function o(t,e,o){o=o||{},s.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=o.angle||0,this.ratio="number"==typeof o.ratio?o.ratio:1,this.setRatio(this.ratio)}{var s=t("./Equation");t("../math/vec2")}e.exports=o,o.prototype=new s,o.prototype.constructor=o,o.prototype.computeGq=function(){return this.ratio*this.bodyA.angle-this.bodyB.angle+this.angle},o.prototype.setRatio=function(t){var e=this.G;e[2]=t,e[5]=-1,this.ratio=t},o.prototype.setMaxTorque=function(t){this.maxForce=t,this.minForce=-t}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Equation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/ContactEquation.js":[function(t,e){function o(t,e){s.call(this,t,e,0,Number.MAX_VALUE),this.contactPointA=i.create(),this.penetrationVec=i.create(),this.contactPointB=i.create(),this.normalA=i.create(),this.restitution=0,this.firstImpact=!1,this.shapeA=null,this.shapeB=null}var s=t("./Equation"),i=t("../math/vec2");e.exports=o,o.prototype=new s,o.prototype.constructor=o,o.prototype.computeB=function(t,e,o){var s=this.bodyA,r=this.bodyB,n=this.contactPointA,a=this.contactPointB,c=s.position,l=r.position,u=this.penetrationVec,p=this.normalA,h=this.G,d=i.crossLength(n,p),f=i.crossLength(a,p);h[0]=-p[0],h[1]=-p[1],h[2]=-d,h[3]=p[0],h[4]=p[1],h[5]=f,i.add(u,l,a),i.sub(u,u,c),i.sub(u,u,n);var v,g;this.firstImpact&&0!==this.restitution?(g=0,v=1/e*(1+this.restitution)*this.computeGW()):(g=i.dot(p,u)+this.offset,v=this.computeGW());var m=this.computeGiMf(),y=-g*t-v*e-o*m;return y}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Equation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js":[function(t,e){function o(t,e,s,r){this.minForce="undefined"==typeof s?-Number.MAX_VALUE:s,this.maxForce="undefined"==typeof r?Number.MAX_VALUE:r,this.bodyA=t,this.bodyB=e,this.stiffness=o.DEFAULT_STIFFNESS,this.relaxation=o.DEFAULT_RELAXATION,this.G=new i.ARRAY_TYPE(6);for(var n=0;6>n;n++)this.G[n]=0;this.offset=0,this.a=0,this.b=0,this.epsilon=0,this.timeStep=1/60,this.needsUpdate=!0,this.multiplier=0,this.relativeVelocity=0,this.enabled=!0}e.exports=o;{var s=t("../math/vec2"),i=t("../utils/Utils");t("../objects/Body")}o.prototype.constructor=o,o.DEFAULT_STIFFNESS=1e6,o.DEFAULT_RELAXATION=4,o.prototype.update=function(){var t=this.stiffness,e=this.relaxation,o=this.timeStep;this.a=4/(o*(1+4*e)),this.b=4*e/(1+4*e),this.epsilon=4/(o*o*t*(1+4*e)),this.needsUpdate=!1},o.prototype.gmult=function(t,e,o,s,i){return t[0]*e[0]+t[1]*e[1]+t[2]*o+t[3]*s[0]+t[4]*s[1]+t[5]*i},o.prototype.computeB=function(t,e,o){var s=this.computeGW(),i=this.computeGq(),r=this.computeGiMf();return-i*t-s*e-r*o};var r=s.create(),n=s.create();o.prototype.computeGq=function(){var t=this.G,e=this.bodyA,o=this.bodyB,s=(e.position,o.position,e.angle),i=o.angle;return this.gmult(t,r,s,n,i)+this.offset},o.prototype.computeGW=function(){var t=this.G,e=this.bodyA,o=this.bodyB,s=e.velocity,i=o.velocity,r=e.angularVelocity,n=o.angularVelocity;return this.gmult(t,s,r,i,n)+this.relativeVelocity},o.prototype.computeGWlambda=function(){var t=this.G,e=this.bodyA,o=this.bodyB,s=e.vlambda,i=o.vlambda,r=e.wlambda,n=o.wlambda;return this.gmult(t,s,r,i,n)};var a=s.create(),c=s.create();o.prototype.computeGiMf=function(){var t=this.bodyA,e=this.bodyB,o=t.force,i=t.angularForce,r=e.force,n=e.angularForce,l=t.invMassSolve,u=e.invMassSolve,p=t.invInertiaSolve,h=e.invInertiaSolve,d=this.G;return s.scale(a,o,l),s.scale(c,r,u),this.gmult(d,a,i*p,c,n*h)},o.prototype.computeGiMGt=function(){var t=this.bodyA,e=this.bodyB,o=t.invMassSolve,s=e.invMassSolve,i=t.invInertiaSolve,r=e.invInertiaSolve,n=this.G;return n[0]*n[0]*o+n[1]*n[1]*o+n[2]*n[2]*i+n[3]*n[3]*s+n[4]*n[4]*s+n[5]*n[5]*r};{var l=s.create(),u=s.create(),p=s.create();s.create(),s.create(),s.create()}o.prototype.addToWlambda=function(t){var e=this.bodyA,o=this.bodyB,i=l,r=u,n=p,a=e.invMassSolve,c=o.invMassSolve,h=e.invInertiaSolve,d=o.invInertiaSolve,f=this.G;r[0]=f[0],r[1]=f[1],n[0]=f[3],n[1]=f[4],s.scale(i,r,a*t),s.add(e.vlambda,e.vlambda,i),e.wlambda+=h*f[2]*t,s.scale(i,n,c*t),s.add(o.vlambda,o.vlambda,i),o.wlambda+=d*f[5]*t},o.prototype.computeInvC=function(t){return 1/(this.computeGiMGt()+t)}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../objects/Body":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/Body.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/FrictionEquation.js":[function(t,e){function o(t,e,o){i.call(this,t,e,-o,o),this.contactPointA=s.create(),this.contactPointB=s.create(),this.t=s.create(),this.contactEquations=[],this.shapeA=null,this.shapeB=null,this.frictionCoefficient=.3}{var s=t("../math/vec2"),i=t("./Equation");t("../utils/Utils")}e.exports=o,o.prototype=new i,o.prototype.constructor=o,o.prototype.setSlipForce=function(t){this.maxForce=t,this.minForce=-t},o.prototype.getSlipForce=function(){return this.maxForce},o.prototype.computeB=function(t,e,o){var i=(this.bodyA,this.bodyB,this.contactPointA),r=this.contactPointB,n=this.t,a=this.G;a[0]=-n[0],a[1]=-n[1],a[2]=-s.crossLength(i,n),a[3]=n[0],a[4]=n[1],a[5]=s.crossLength(r,n);var c=this.computeGW(),l=this.computeGiMf(),u=-c*e-o*l;return u}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js","./Equation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/RotationalLockEquation.js":[function(t,e){function o(t,e,o){o=o||{},s.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=o.angle||0;var i=this.G;i[2]=1,i[5]=-1}var s=t("./Equation"),i=t("../math/vec2");e.exports=o,o.prototype=new s,o.prototype.constructor=o;var r=i.create(),n=i.create(),a=i.fromValues(1,0),c=i.fromValues(0,1);o.prototype.computeGq=function(){return i.rotate(r,a,this.bodyA.angle+this.angle),i.rotate(n,c,this.bodyB.angle),i.dot(r,n)}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Equation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/RotationalVelocityEquation.js":[function(t,e){function o(t,e){s.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.relativeVelocity=1,this.ratio=1}{var s=t("./Equation");t("../math/vec2")}e.exports=o,o.prototype=new s,o.prototype.constructor=o,o.prototype.computeB=function(t,e,o){var s=this.G;s[2]=-1,s[5]=this.ratio;var i=this.computeGiMf(),r=this.computeGW(),n=-r*e-o*i;return n}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Equation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/events/EventEmitter.js":[function(t,e){var o=function(){};e.exports=o,o.prototype={constructor:o,on:function(t,e,o){e.context=o||this,void 0===this._listeners&&(this._listeners={});var s=this._listeners;return void 0===s[t]&&(s[t]=[]),-1===s[t].indexOf(e)&&s[t].push(e),this},has:function(t,e){if(void 0===this._listeners)return!1;var o=this._listeners;if(e){if(void 0!==o[t]&&-1!==o[t].indexOf(e))return!0}else if(void 0!==o[t])return!0;return!1},off:function(t,e){if(void 0===this._listeners)return this;var o=this._listeners,s=o[t].indexOf(e);return-1!==s&&o[t].splice(s,1),this},emit:function(t){if(void 0===this._listeners)return this;var e=this._listeners,o=e[t.type];if(void 0!==o){t.target=this;for(var s=0,i=o.length;i>s;s++){var r=o[s];r.call(r.context,t)}}return this}}},{}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/material/ContactMaterial.js":[function(t,e){function o(t,e,r){if(r=r||{},!(t instanceof s&&e instanceof s))throw new Error("First two arguments must be Material instances.");this.id=o.idCounter++,this.materialA=t,this.materialB=e,this.friction="undefined"!=typeof r.friction?Number(r.friction):.3,this.restitution="undefined"!=typeof r.restitution?Number(r.restitution):0,this.stiffness="undefined"!=typeof r.stiffness?Number(r.stiffness):i.DEFAULT_STIFFNESS,this.relaxation="undefined"!=typeof r.relaxation?Number(r.relaxation):i.DEFAULT_RELAXATION,this.frictionStiffness="undefined"!=typeof r.frictionStiffness?Number(r.frictionStiffness):i.DEFAULT_STIFFNESS,this.frictionRelaxation="undefined"!=typeof r.frictionRelaxation?Number(r.frictionRelaxation):i.DEFAULT_RELAXATION,this.surfaceVelocity="undefined"!=typeof r.surfaceVelocity?Number(r.surfaceVelocity):0,this.contactSkinSize=.005}var s=t("./Material"),i=t("../equations/Equation");e.exports=o,o.idCounter=0},{"../equations/Equation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js","./Material":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/material/Material.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/material/Material.js":[function(t,e){function o(t){this.id=t||o.idCounter++}e.exports=o,o.idCounter=0},{}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/polyk.js":[function(t,e){var o={};o.GetArea=function(t){if(t.length<6)return 0;for(var e=t.length-2,o=0,s=0;e>s;s+=2)o+=(t[s+2]-t[s])*(t[s+1]+t[s+3]);return o+=(t[0]-t[e])*(t[e+1]+t[1]),.5*-o},o.Triangulate=function(t){var e=t.length>>1;if(3>e)return[];for(var s=[],i=[],r=0;e>r;r++)i.push(r);for(var r=0,n=e;n>3;){var a=i[(r+0)%n],c=i[(r+1)%n],l=i[(r+2)%n],u=t[2*a],p=t[2*a+1],h=t[2*c],d=t[2*c+1],f=t[2*l],v=t[2*l+1],g=!1;if(o._convex(u,p,h,d,f,v)){g=!0;for(var m=0;n>m;m++){var y=i[m];if(y!=a&&y!=c&&y!=l&&o._PointInTriangle(t[2*y],t[2*y+1],u,p,h,d,f,v)){g=!1;break}}}if(g)s.push(a,c,l),i.splice((r+1)%n,1),n--,r=0;else if(r++>3*n)break}return s.push(i[0],i[1],i[2]),s},o._PointInTriangle=function(t,e,o,s,i,r,n,a){var c=n-o,l=a-s,u=i-o,p=r-s,h=t-o,d=e-s,f=c*c+l*l,v=c*u+l*p,g=c*h+l*d,m=u*u+p*p,y=u*h+p*d,j=1/(f*m-v*v),b=(m*g-v*y)*j,A=(f*y-v*g)*j;return b>=0&&A>=0&&1>b+A},o._convex=function(t,e,o,s,i,r){return(e-s)*(i-o)+(o-t)*(r-s)>=0},e.exports=o},{}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js":[function(t,e){var o=e.exports={},s=t("../utils/Utils");o.crossLength=function(t,e){return t[0]*e[1]-t[1]*e[0]},o.crossVZ=function(t,e,s){return o.rotate(t,e,-Math.PI/2),o.scale(t,t,s),t},o.crossZV=function(t,e,s){return o.rotate(t,s,Math.PI/2),o.scale(t,t,e),t},o.rotate=function(t,e,o){if(0!==o){var s=Math.cos(o),i=Math.sin(o),r=e[0],n=e[1];t[0]=s*r-i*n,t[1]=i*r+s*n}else t[0]=e[0],t[1]=e[1]},o.rotate90cw=function(t,e){var o=e[0],s=e[1];t[0]=s,t[1]=-o},o.toLocalFrame=function(t,e,s,i){o.copy(t,e),o.sub(t,t,s),o.rotate(t,t,-i)},o.toGlobalFrame=function(t,e,s,i){o.copy(t,e),o.rotate(t,t,i),o.add(t,t,s)},o.centroid=function(t,e,s,i){return o.add(t,e,s),o.add(t,t,i),o.scale(t,t,1/3),t},o.create=function(){var t=new s.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},o.clone=function(t){var e=new s.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},o.fromValues=function(t,e){var o=new s.ARRAY_TYPE(2);return o[0]=t,o[1]=e,o},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},o.set=function(t,e,o){return t[0]=e,t[1]=o,t},o.add=function(t,e,o){return t[0]=e[0]+o[0],t[1]=e[1]+o[1],t},o.subtract=function(t,e,o){return t[0]=e[0]-o[0],t[1]=e[1]-o[1],t},o.sub=o.subtract,o.multiply=function(t,e,o){return t[0]=e[0]*o[0],t[1]=e[1]*o[1],t},o.mul=o.multiply,o.divide=function(t,e,o){return t[0]=e[0]/o[0],t[1]=e[1]/o[1],t},o.div=o.divide,o.scale=function(t,e,o){return t[0]=e[0]*o,t[1]=e[1]*o,t},o.distance=function(t,e){var o=e[0]-t[0],s=e[1]-t[1];return Math.sqrt(o*o+s*s)},o.dist=o.distance,o.squaredDistance=function(t,e){var o=e[0]-t[0],s=e[1]-t[1];return o*o+s*s},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],o=t[1];return Math.sqrt(e*e+o*o)},o.len=o.length,o.squaredLength=function(t){var e=t[0],o=t[1];return e*e+o*o},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},o.normalize=function(t,e){var o=e[0],s=e[1],i=o*o+s*s;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},o.str=function(t){return"vec2("+t[0]+", "+t[1]+")"}},{"../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/Body.js":[function(t,e){function o(t){t=t||{},a.call(this),this.id=++o._idCounter,this.world=null,this.shapes=[],this.shapeOffsets=[],this.shapeAngles=[],this.mass=t.mass||0,this.invMass=0,this.inertia=0,this.invInertia=0,this.invMassSolve=0,this.invInertiaSolve=0,this.fixedRotation=!!t.fixedRotation||!1,this.position=s.fromValues(0,0),t.position&&s.copy(this.position,t.position),this.interpolatedPosition=s.fromValues(0,0),this.interpolatedAngle=0,this.previousPosition=s.fromValues(0,0),this.previousAngle=0,this.velocity=s.fromValues(0,0),t.velocity&&s.copy(this.velocity,t.velocity),this.vlambda=s.fromValues(0,0),this.wlambda=0,this.angle=t.angle||0,this.angularVelocity=t.angularVelocity||0,this.force=s.create(),t.force&&s.copy(this.force,t.force),this.angularForce=t.angularForce||0,this.damping="number"==typeof t.damping?t.damping:.1,this.angularDamping="number"==typeof t.angularDamping?t.angularDamping:.1,this.type=o.STATIC,this.type="undefined"!=typeof t.type?t.type:t.mass?o.DYNAMIC:o.STATIC,this.boundingRadius=0,this.aabb=new n,this.aabbNeedsUpdate=!0,this.allowSleep=!0,this.wantsToSleep=!1,this.sleepState=o.AWAKE,this.sleepSpeedLimit=.2,this.sleepTimeLimit=1,this.gravityScale=1,this.timeLastSleepy=0,this.concavePath=null,this.lastDampingScale=1,this.lastAngularDampingScale=1,this.lastDampingTimeStep=-1,this._wakeUpAfterNarrowphase=!1,this.updateMassProperties()}var s=t("../math/vec2"),i=t("poly-decomp"),r=t("../shapes/Convex"),n=t("../collision/AABB"),a=t("../events/EventEmitter");e.exports=o,o.prototype=new a,o._idCounter=0,o.prototype.updateSolveMassProperties=function(){this.sleepState===o.SLEEPING||this.type===o.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve=0):(this.invMassSolve=this.invMass,this.invInertiaSolve=this.invInertia)},o.prototype.setDensity=function(t){var e=this.getArea();this.mass=e*t,this.updateMassProperties()},o.prototype.getArea=function(){for(var t=0,e=0;e<this.shapes.length;e++)t+=this.shapes[e].area;return t},o.prototype.getAABB=function(){return this.aabbNeedsUpdate&&this.updateAABB(),this.aabb};var c=new n,l=s.create();o.prototype.updateAABB=function(){for(var t=this.shapes,e=this.shapeOffsets,o=this.shapeAngles,i=t.length,r=l,n=this.angle,a=0;a!==i;a++){var u=t[a],p=o[a]+n;s.rotate(r,e[a],n),s.add(r,r,this.position),u.computeAABB(c,r,p),0===a?this.aabb.copy(c):this.aabb.extend(c)}this.aabbNeedsUpdate=!1},o.prototype.updateBoundingRadius=function(){for(var t=this.shapes,e=this.shapeOffsets,o=t.length,i=0,r=0;r!==o;r++){var n=t[r],a=s.length(e[r]),c=n.boundingRadius;a+c>i&&(i=a+c)}this.boundingRadius=i},o.prototype.addShape=function(t,e,o){o=o||0,e=e?s.fromValues(e[0],e[1]):s.fromValues(0,0),this.shapes.push(t),this.shapeOffsets.push(e),this.shapeAngles.push(o),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0},o.prototype.removeShape=function(t){var e=this.shapes.indexOf(t);return-1!==e?(this.shapes.splice(e,1),this.shapeOffsets.splice(e,1),this.shapeAngles.splice(e,1),this.aabbNeedsUpdate=!0,!0):!1},o.prototype.updateMassProperties=function(){if(this.type===o.STATIC||this.type===o.KINEMATIC)this.mass=Number.MAX_VALUE,this.invMass=0,this.inertia=Number.MAX_VALUE,this.invInertia=0;else{var t=this.shapes,e=t.length,i=this.mass/e,r=0;if(this.fixedRotation)this.inertia=Number.MAX_VALUE,this.invInertia=0;else{for(var n=0;e>n;n++){var a=t[n],c=s.squaredLength(this.shapeOffsets[n]),l=a.computeMomentOfInertia(i);r+=l+i*c}this.inertia=r,this.invInertia=r>0?1/r:0}this.invMass=1/this.mass}};var u=s.create();o.prototype.applyForce=function(t,e){var o=u;s.sub(o,e,this.position),s.add(this.force,this.force,t);var i=s.crossLength(o,t);this.angularForce+=i},o.prototype.toLocalFrame=function(t,e){s.toLocalFrame(t,e,this.position,this.angle)},o.prototype.toWorldFrame=function(t,e){s.toGlobalFrame(t,e,this.position,this.angle)},o.prototype.fromPolygon=function(t,e){e=e||{};for(var o=this.shapes.length;o>=0;--o)this.removeShape(this.shapes[o]);var n=new i.Polygon;if(n.vertices=t,n.makeCCW(),"number"==typeof e.removeCollinearPoints&&n.removeCollinearPoints(e.removeCollinearPoints),"undefined"==typeof e.skipSimpleCheck&&!n.isSimple())return!1;this.concavePath=n.vertices.slice(0);for(var o=0;o<this.concavePath.length;o++){var a=[0,0];s.copy(a,this.concavePath[o]),this.concavePath[o]=a}var c;c=e.optimalDecomp?n.decomp():n.quickDecomp();for(var l=s.create(),o=0;o!==c.length;o++){for(var u=new r(c[o].vertices),p=0;p!==u.vertices.length;p++){var a=u.vertices[p];s.sub(a,a,u.centerOfMass)}s.scale(l,u.centerOfMass,1),u.updateTriangles(),u.updateCenterOfMass(),u.updateBoundingRadius(),this.addShape(u,l)}return this.adjustCenterOfMass(),this.aabbNeedsUpdate=!0,!0};var p=(s.fromValues(0,0),s.fromValues(0,0)),h=s.fromValues(0,0),d=s.fromValues(0,0);o.prototype.adjustCenterOfMass=function(){var t=p,e=h,o=d,i=0;s.set(e,0,0);for(var r=0;r!==this.shapes.length;r++){var n=this.shapes[r],a=this.shapeOffsets[r];s.scale(t,a,n.area),s.add(e,e,t),i+=n.area}s.scale(o,e,1/i);for(var r=0;r!==this.shapes.length;r++){var n=this.shapes[r],a=this.shapeOffsets[r];a||(a=this.shapeOffsets[r]=s.create()),s.sub(a,a,o)}s.add(this.position,this.position,o);for(var r=0;this.concavePath&&r<this.concavePath.length;r++)s.sub(this.concavePath[r],this.concavePath[r],o);this.updateMassProperties(),this.updateBoundingRadius()},o.prototype.setZeroForce=function(){s.set(this.force,0,0),this.angularForce=0},o.prototype.resetConstraintVelocity=function(){var t=this,e=t.vlambda;s.set(e,0,0),t.wlambda=0},o.prototype.addConstraintVelocity=function(){var t=this,e=t.velocity;s.add(e,e,t.vlambda),t.angularVelocity+=t.wlambda},o.prototype.applyDamping=function(t){if(this.type===o.DYNAMIC){t!==this.lastDampingTimeStep&&(this.lastDampingScale=Math.pow(1-this.damping,t),this.lastAngularDampingScale=Math.pow(1-this.angularDamping,t),this.lastDampingTimeStep=t);var e=this.velocity;s.scale(e,e,this.lastDampingScale),this.angularVelocity*=this.lastAngularDampingScale}},o.prototype.wakeUp=function(){var t=this.sleepState;this.sleepState=o.AWAKE,this.idleTime=0,t!==o.AWAKE&&this.emit(o.wakeUpEvent)
},o.prototype.sleep=function(){this.sleepState=o.SLEEPING,this.angularVelocity=0,this.angularForce=0,s.set(this.velocity,0,0),s.set(this.force,0,0),this.emit(o.sleepEvent)},o.prototype.sleepTick=function(t,e,i){if(this.allowSleep&&this.type!==o.SLEEPING){this.wantsToSleep=!1;var r=(this.sleepState,s.squaredLength(this.velocity)+Math.pow(this.angularVelocity,2)),n=Math.pow(this.sleepSpeedLimit,2);r>=n?(this.idleTime=0,this.sleepState=o.AWAKE):(this.idleTime+=i,this.sleepState=o.SLEEPY),this.idleTime>this.sleepTimeLimit&&(e?this.wantsToSleep=!0:this.sleep())}},o.prototype.getVelocityFromPosition=function(t,e){return t=t||s.create(),s.sub(t,this.position,this.previousPosition),s.scale(t,t,1/e),t},o.prototype.getAngularVelocityFromPosition=function(t){return(this.angle-this.previousAngle)/t},o.prototype.overlaps=function(t){return this.world.overlapKeeper.bodiesAreOverlapping(this,t)},o.sleepyEvent={type:"sleepy"},o.sleepEvent={type:"sleep"},o.wakeUpEvent={type:"wakeup"},o.DYNAMIC=1,o.STATIC=2,o.KINEMATIC=4,o.AWAKE=0,o.SLEEPY=1,o.SLEEPING=2},{"../collision/AABB":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/AABB.js","../events/EventEmitter":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/events/EventEmitter.js","../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../shapes/Convex":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Convex.js","poly-decomp":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/node_modules/poly-decomp/src/index.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/LinearSpring.js":[function(t,e){function o(t,e,o){o=o||{},i.call(this,t,e,o),this.localAnchorA=s.fromValues(0,0),this.localAnchorB=s.fromValues(0,0),o.localAnchorA&&s.copy(this.localAnchorA,o.localAnchorA),o.localAnchorB&&s.copy(this.localAnchorB,o.localAnchorB),o.worldAnchorA&&this.setWorldAnchorA(o.worldAnchorA),o.worldAnchorB&&this.setWorldAnchorB(o.worldAnchorB);var r=s.create(),n=s.create();this.getWorldAnchorA(r),this.getWorldAnchorB(n);var a=s.distance(r,n);this.restLength="number"==typeof o.restLength?o.restLength:a}{var s=t("../math/vec2"),i=t("./Spring");t("../utils/Utils")}e.exports=o,o.prototype=new i,o.prototype.setWorldAnchorA=function(t){this.bodyA.toLocalFrame(this.localAnchorA,t)},o.prototype.setWorldAnchorB=function(t){this.bodyB.toLocalFrame(this.localAnchorB,t)},o.prototype.getWorldAnchorA=function(t){this.bodyA.toWorldFrame(t,this.localAnchorA)},o.prototype.getWorldAnchorB=function(t){this.bodyB.toWorldFrame(t,this.localAnchorB)};var r=s.create(),n=s.create(),a=s.create(),c=s.create(),l=s.create(),u=s.create(),p=s.create(),h=s.create(),d=s.create();o.prototype.applyForce=function(){var t=this.stiffness,e=this.damping,o=this.restLength,i=this.bodyA,f=this.bodyB,v=r,g=n,m=a,y=c,j=d,b=l,A=u,E=p,w=h;this.getWorldAnchorA(b),this.getWorldAnchorB(A),s.sub(E,b,i.position),s.sub(w,A,f.position),s.sub(v,A,b);var x=s.len(v);s.normalize(g,v),s.sub(m,f.velocity,i.velocity),s.crossZV(j,f.angularVelocity,w),s.add(m,m,j),s.crossZV(j,i.angularVelocity,E),s.sub(m,m,j),s.scale(y,g,-t*(x-o)-e*s.dot(m,g)),s.sub(i.force,i.force,y),s.add(f.force,f.force,y);var B=s.crossLength(E,y),U=s.crossLength(w,y);i.angularForce-=B,f.angularForce+=U}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js","./Spring":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/Spring.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/RotationalSpring.js":[function(t,e){function o(t,e,o){o=o||{},s.call(this,t,e,o),this.restAngle="number"==typeof o.restAngle?o.restAngle:e.angle-t.angle}var s=(t("../math/vec2"),t("./Spring"));e.exports=o,o.prototype=new s,o.prototype.applyForce=function(){var t=this.stiffness,e=this.damping,o=this.restAngle,s=this.bodyA,i=this.bodyB,r=i.angle-s.angle,n=i.angularVelocity-s.angularVelocity,a=-t*(r-o)-e*n*0;s.angularForce-=a,i.angularForce+=a}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Spring":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/Spring.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/Spring.js":[function(t,e){function o(t,e,o){o=s.defaults(o,{stiffness:100,damping:1}),this.stiffness=o.stiffness,this.damping=o.damping,this.bodyA=t,this.bodyB=e}var s=(t("../math/vec2"),t("../utils/Utils"));e.exports=o,o.prototype.applyForce=function(){}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/p2.js":[function(t,e){e.exports={AABB:t("./collision/AABB"),AngleLockEquation:t("./equations/AngleLockEquation"),Body:t("./objects/Body"),Broadphase:t("./collision/Broadphase"),Capsule:t("./shapes/Capsule"),Circle:t("./shapes/Circle"),Constraint:t("./constraints/Constraint"),ContactEquation:t("./equations/ContactEquation"),ContactMaterial:t("./material/ContactMaterial"),Convex:t("./shapes/Convex"),DistanceConstraint:t("./constraints/DistanceConstraint"),Equation:t("./equations/Equation"),EventEmitter:t("./events/EventEmitter"),FrictionEquation:t("./equations/FrictionEquation"),GearConstraint:t("./constraints/GearConstraint"),GridBroadphase:t("./collision/GridBroadphase"),GSSolver:t("./solver/GSSolver"),Heightfield:t("./shapes/Heightfield"),Line:t("./shapes/Line"),LockConstraint:t("./constraints/LockConstraint"),Material:t("./material/Material"),Narrowphase:t("./collision/Narrowphase"),NaiveBroadphase:t("./collision/NaiveBroadphase"),Particle:t("./shapes/Particle"),Plane:t("./shapes/Plane"),RevoluteConstraint:t("./constraints/RevoluteConstraint"),PrismaticConstraint:t("./constraints/PrismaticConstraint"),Rectangle:t("./shapes/Rectangle"),RotationalVelocityEquation:t("./equations/RotationalVelocityEquation"),SAPBroadphase:t("./collision/SAPBroadphase"),Shape:t("./shapes/Shape"),Solver:t("./solver/Solver"),Spring:t("./objects/Spring"),LinearSpring:t("./objects/LinearSpring"),RotationalSpring:t("./objects/RotationalSpring"),Utils:t("./utils/Utils"),World:t("./world/World"),vec2:t("./math/vec2"),version:t("../package.json").version}},{"../package.json":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/package.json","./collision/AABB":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/AABB.js","./collision/Broadphase":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/Broadphase.js","./collision/GridBroadphase":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/GridBroadphase.js","./collision/NaiveBroadphase":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/NaiveBroadphase.js","./collision/Narrowphase":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/Narrowphase.js","./collision/SAPBroadphase":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/SAPBroadphase.js","./constraints/Constraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/Constraint.js","./constraints/DistanceConstraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/DistanceConstraint.js","./constraints/GearConstraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/GearConstraint.js","./constraints/LockConstraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/LockConstraint.js","./constraints/PrismaticConstraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/PrismaticConstraint.js","./constraints/RevoluteConstraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/RevoluteConstraint.js","./equations/AngleLockEquation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/AngleLockEquation.js","./equations/ContactEquation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/ContactEquation.js","./equations/Equation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/Equation.js","./equations/FrictionEquation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/FrictionEquation.js","./equations/RotationalVelocityEquation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/RotationalVelocityEquation.js","./events/EventEmitter":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/events/EventEmitter.js","./material/ContactMaterial":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/material/ContactMaterial.js","./material/Material":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/material/Material.js","./math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./objects/Body":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/Body.js","./objects/LinearSpring":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/LinearSpring.js","./objects/RotationalSpring":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/RotationalSpring.js","./objects/Spring":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/Spring.js","./shapes/Capsule":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Capsule.js","./shapes/Circle":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Circle.js","./shapes/Convex":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Convex.js","./shapes/Heightfield":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Heightfield.js","./shapes/Line":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Line.js","./shapes/Particle":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Particle.js","./shapes/Plane":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Plane.js","./shapes/Rectangle":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Rectangle.js","./shapes/Shape":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Shape.js","./solver/GSSolver":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/solver/GSSolver.js","./solver/Solver":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/solver/Solver.js","./utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js","./world/World":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/world/World.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Capsule.js":[function(t,e){function o(t,e){this.length=t||1,this.radius=e||1,s.call(this,s.CAPSULE)}var s=t("./Shape"),i=t("../math/vec2");e.exports=o,o.prototype=new s,o.prototype.computeMomentOfInertia=function(t){var e=this.radius,o=this.length+e,s=2*e;return t*(s*s+o*o)/12},o.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius+this.length/2},o.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius+2*this.radius*this.length};var r=i.create();o.prototype.computeAABB=function(t,e,o){var s=this.radius;i.set(r,this.length/2,0),0!==o&&i.rotate(r,r,o),i.set(t.upperBound,Math.max(r[0]+s,-r[0]+s),Math.max(r[1]+s,-r[1]+s)),i.set(t.lowerBound,Math.min(r[0]-s,-r[0]-s),Math.min(r[1]-s,-r[1]-s)),i.add(t.lowerBound,t.lowerBound,e),i.add(t.upperBound,t.upperBound,e)}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Shape":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Shape.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Circle.js":[function(t,e){function o(t){this.radius=t||1,s.call(this,s.CIRCLE)}var s=t("./Shape"),i=t("../math/vec2");e.exports=o,o.prototype=new s,o.prototype.computeMomentOfInertia=function(t){var e=this.radius;return t*e*e/2},o.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius},o.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius},o.prototype.computeAABB=function(t,e){var o=this.radius;i.set(t.upperBound,o,o),i.set(t.lowerBound,-o,-o),e&&(i.add(t.lowerBound,t.lowerBound,e),i.add(t.upperBound,t.upperBound,e))}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Shape":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Shape.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Convex.js":[function(t,e){function o(t,e){this.vertices=[],this.axes=[];for(var o=0;o<t.length;o++){var r=i.create();i.copy(r,t[o]),this.vertices.push(r)}if(e)for(var o=0;o<e.length;o++){var n=i.create();i.copy(n,e[o]),this.axes.push(n)}else for(var o=0;o<t.length;o++){var a=t[o],c=t[(o+1)%t.length],l=i.create();i.sub(l,c,a),i.rotate90cw(l,l),i.normalize(l,l),this.axes.push(l)}if(this.centerOfMass=i.fromValues(0,0),this.triangles=[],this.vertices.length&&(this.updateTriangles(),this.updateCenterOfMass()),this.boundingRadius=0,s.call(this,s.CONVEX),this.updateBoundingRadius(),this.updateArea(),this.area<0)throw new Error("Convex vertices must be given in conter-clockwise winding.")}{var s=t("./Shape"),i=t("../math/vec2"),r=t("../math/polyk");t("poly-decomp")}e.exports=o,o.prototype=new s;var n=i.create(),a=i.create();o.prototype.projectOntoLocalAxis=function(t,e){for(var o,s,r=null,a=null,t=n,c=0;c<this.vertices.length;c++)o=this.vertices[c],s=i.dot(o,t),(null===r||s>r)&&(r=s),(null===a||a>s)&&(a=s);if(a>r){var l=a;a=r,r=l}i.set(e,a,r)},o.prototype.projectOntoWorldAxis=function(t,e,o,s){var r=a;this.projectOntoLocalAxis(t,s),0!==o?i.rotate(r,t,o):r=t;var n=i.dot(e,r);i.set(s,s[0]+n,s[1]+n)},o.prototype.updateTriangles=function(){this.triangles.length=0;for(var t=[],e=0;e<this.vertices.length;e++){var o=this.vertices[e];t.push(o[0],o[1])}for(var s=r.Triangulate(t),e=0;e<s.length;e+=3){var i=s[e],n=s[e+1],a=s[e+2];this.triangles.push([i,n,a])}};{var c=i.create(),l=i.create(),u=i.create(),p=i.create(),h=i.create();i.create(),i.create(),i.create(),i.create()}o.prototype.updateCenterOfMass=function(){var t=this.triangles,e=this.vertices,s=this.centerOfMass,r=c,n=u,a=p,d=h,f=l;i.set(s,0,0);for(var v=0,g=0;g!==t.length;g++){var m=t[g],n=e[m[0]],a=e[m[1]],d=e[m[2]];i.centroid(r,n,a,d);var y=o.triangleArea(n,a,d);v+=y,i.scale(f,r,y),i.add(s,s,f)}i.scale(s,s,1/v)},o.prototype.computeMomentOfInertia=function(t){for(var e=0,o=0,s=this.vertices.length,r=s-1,n=0;s>n;r=n,n++){var a=this.vertices[r],c=this.vertices[n],l=Math.abs(i.crossLength(a,c)),u=i.dot(c,c)+i.dot(c,a)+i.dot(a,a);e+=l*u,o+=l}return t/6*(e/o)},o.prototype.updateBoundingRadius=function(){for(var t=this.vertices,e=0,o=0;o!==t.length;o++){var s=i.squaredLength(t[o]);s>e&&(e=s)}this.boundingRadius=Math.sqrt(e)},o.triangleArea=function(t,e,o){return.5*((e[0]-t[0])*(o[1]-t[1])-(o[0]-t[0])*(e[1]-t[1]))},o.prototype.updateArea=function(){this.updateTriangles(),this.area=0;for(var t=this.triangles,e=this.vertices,s=0;s!==t.length;s++){var i=t[s],r=e[i[0]],n=e[i[1]],a=e[i[2]],c=o.triangleArea(r,n,a);this.area+=c}},o.prototype.computeAABB=function(t,e,o){t.setFromPoints(this.vertices,e,o,0)}},{"../math/polyk":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/polyk.js","../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Shape":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Shape.js","poly-decomp":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/node_modules/poly-decomp/src/index.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Heightfield.js":[function(t,e){function o(t,e){if(e=i.defaults(e,{maxValue:null,minValue:null,elementWidth:.1}),null===e.minValue||null===e.maxValue){e.maxValue=t[0],e.minValue=t[0];for(var o=0;o!==t.length;o++){var r=t[o];r>e.maxValue&&(e.maxValue=r),r<e.minValue&&(e.minValue=r)}}this.data=t,this.maxValue=e.maxValue,this.minValue=e.minValue,this.elementWidth=e.elementWidth,s.call(this,s.HEIGHTFIELD)}var s=t("./Shape"),i=(t("../math/vec2"),t("../utils/Utils"));e.exports=o,o.prototype=new s,o.prototype.computeMomentOfInertia=function(){return Number.MAX_VALUE},o.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},o.prototype.updateArea=function(){for(var t=this.data,e=0,o=0;o<t.length-1;o++)e+=(t[o]+t[o+1])/2*this.elementWidth;this.area=e},o.prototype.computeAABB=function(t,e){t.upperBound[0]=this.elementWidth*this.data.length+e[0],t.upperBound[1]=this.maxValue+e[1],t.lowerBound[0]=e[0],t.lowerBound[1]=-Number.MAX_VALUE}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js","./Shape":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Shape.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Line.js":[function(t,e){function o(t){this.length=t||1,s.call(this,s.LINE)}var s=t("./Shape"),i=t("../math/vec2");e.exports=o,o.prototype=new s,o.prototype.computeMomentOfInertia=function(t){return t*Math.pow(this.length,2)/12},o.prototype.updateBoundingRadius=function(){this.boundingRadius=this.length/2};var r=[i.create(),i.create()];o.prototype.computeAABB=function(t,e,o){var s=this.length/2;i.set(r[0],-s,0),i.set(r[1],s,0),t.setFromPoints(r,e,o,0)}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Shape":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Shape.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Particle.js":[function(t,e){function o(){s.call(this,s.PARTICLE)}var s=t("./Shape"),i=t("../math/vec2");e.exports=o,o.prototype=new s,o.prototype.computeMomentOfInertia=function(){return 0},o.prototype.updateBoundingRadius=function(){this.boundingRadius=0},o.prototype.computeAABB=function(t,e){i.copy(t.lowerBound,e),i.copy(t.upperBound,e)}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Shape":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Shape.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Plane.js":[function(t,e){function o(){s.call(this,s.PLANE)}{var s=t("./Shape"),i=t("../math/vec2");t("../utils/Utils")}e.exports=o,o.prototype=new s,o.prototype.computeMomentOfInertia=function(){return 0},o.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},o.prototype.computeAABB=function(t,e,o){var s=0,r=i.set;"number"==typeof o&&(s=o%(2*Math.PI)),0===s?(r(t.lowerBound,-Number.MAX_VALUE,-Number.MAX_VALUE),r(t.upperBound,Number.MAX_VALUE,0)):s===Math.PI/2?(r(t.lowerBound,0,-Number.MAX_VALUE),r(t.upperBound,Number.MAX_VALUE,Number.MAX_VALUE)):s===Math.PI?(r(t.lowerBound,-Number.MAX_VALUE,0),r(t.upperBound,Number.MAX_VALUE,Number.MAX_VALUE)):s===3*Math.PI/2?(r(t.lowerBound,-Number.MAX_VALUE,-Number.MAX_VALUE),r(t.upperBound,0,Number.MAX_VALUE)):(r(t.lowerBound,-Number.MAX_VALUE,-Number.MAX_VALUE),r(t.upperBound,Number.MAX_VALUE,Number.MAX_VALUE)),i.add(t.lowerBound,t.lowerBound,e),i.add(t.upperBound,t.upperBound,e)},o.prototype.updateArea=function(){this.area=Number.MAX_VALUE}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js","./Shape":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Shape.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Rectangle.js":[function(t,e){function o(t,e){this.width=t||1,this.height=e||1;var o=[s.fromValues(-t/2,-e/2),s.fromValues(t/2,-e/2),s.fromValues(t/2,e/2),s.fromValues(-t/2,e/2)],n=[s.fromValues(1,0),s.fromValues(0,1)];r.call(this,o,n),this.type=i.RECTANGLE}var s=t("../math/vec2"),i=t("./Shape"),r=t("./Convex");e.exports=o,o.prototype=new r([]),o.prototype.computeMomentOfInertia=function(t){var e=this.width,o=this.height;return t*(o*o+e*e)/12},o.prototype.updateBoundingRadius=function(){var t=this.width,e=this.height;this.boundingRadius=Math.sqrt(t*t+e*e)/2};s.create(),s.create(),s.create(),s.create();o.prototype.computeAABB=function(t,e,o){t.setFromPoints(this.vertices,e,o,0)},o.prototype.updateArea=function(){this.area=this.width*this.height}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","./Convex":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Convex.js","./Shape":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Shape.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Shape.js":[function(t,e){function o(t){this.type=t,this.id=o.idCounter++,this.boundingRadius=0,this.collisionGroup=1,this.collisionMask=1,t&&this.updateBoundingRadius(),this.material=null,this.area=0,this.sensor=!1,this.updateArea()}e.exports=o,o.idCounter=0,o.CIRCLE=1,o.PARTICLE=2,o.PLANE=4,o.CONVEX=8,o.LINE=16,o.RECTANGLE=32,o.CAPSULE=64,o.HEIGHTFIELD=128,o.prototype.computeMomentOfInertia=function(){throw new Error("Shape.computeMomentOfInertia is not implemented in this Shape...")},o.prototype.updateBoundingRadius=function(){throw new Error("Shape.updateBoundingRadius is not implemented in this Shape...")},o.prototype.updateArea=function(){},o.prototype.computeAABB=function(){}},{}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/solver/GSSolver.js":[function(t,e){function o(t){r.call(this,t,r.GS),t=t||{},this.iterations=t.iterations||10,this.tolerance=t.tolerance||1e-10,this.arrayStep=30,this.lambda=new n.ARRAY_TYPE(this.arrayStep),this.Bs=new n.ARRAY_TYPE(this.arrayStep),this.invCs=new n.ARRAY_TYPE(this.arrayStep),this.useZeroRHS=!1,this.frictionIterations=0,this.usedIterations=0}function s(t){for(var e=t.length;e--;)t[e]=0}var i=t("../math/vec2"),r=t("./Solver"),n=t("../utils/Utils"),a=t("../equations/FrictionEquation");e.exports=o,o.prototype=new r,o.prototype.solve=function(t,e){this.sortEquations();var r=0,c=this.iterations,l=this.frictionIterations,u=this.equations,p=u.length,h=Math.pow(this.tolerance*p,2),d=e.bodies,f=e.bodies.length,v=(i.add,i.set,this.useZeroRHS),g=this.lambda;if(this.usedIterations=0,p)for(var m=0;m!==f;m++){var y=d[m];y.updateSolveMassProperties()}g.length<p&&(g=this.lambda=new n.ARRAY_TYPE(p+this.arrayStep),this.Bs=new n.ARRAY_TYPE(p+this.arrayStep),this.invCs=new n.ARRAY_TYPE(p+this.arrayStep)),s(g);for(var j=this.invCs,b=this.Bs,g=this.lambda,m=0;m!==u.length;m++){var A=u[m];(A.timeStep!==t||A.needsUpdate)&&(A.timeStep=t,A.update()),b[m]=A.computeB(A.a,A.b,t),j[m]=A.computeInvC(A.epsilon)}var A,E,m,w;if(0!==p){for(m=0;m!==f;m++){var y=d[m];y.resetConstraintVelocity()}if(l){for(r=0;r!==l;r++){for(E=0,w=0;w!==p;w++){A=u[w];var x=o.iterateEquation(w,A,A.epsilon,b,j,g,v,t,r);E+=Math.abs(x)}if(this.usedIterations++,h>=E*E)break}for(o.updateMultipliers(u,g,1/t),w=0;w!==p;w++){var B=u[w];if(B instanceof a){for(var U=0,S=0;S!==B.contactEquations.length;S++)U+=B.contactEquations[S].multiplier;U*=B.frictionCoefficient/B.contactEquations.length,B.maxForce=U,B.minForce=-U}}}for(r=0;r!==c;r++){for(E=0,w=0;w!==p;w++){A=u[w];var x=o.iterateEquation(w,A,A.epsilon,b,j,g,v,t,r);E+=Math.abs(x)}if(this.usedIterations++,h>=E*E)break}for(m=0;m!==f;m++)d[m].addConstraintVelocity();o.updateMultipliers(u,g,1/t)}},o.updateMultipliers=function(t,e,o){for(var s=t.length;s--;)t[s].multiplier=e[s]*o},o.iterateEquation=function(t,e,o,s,i,r,n,a){var c=s[t],l=i[t],u=r[t],p=e.computeGWlambda(),h=e.maxForce,d=e.minForce;n&&(c=0);var f=l*(c-p-o*u),v=u+f;return d*a>v?f=d*a-u:v>h*a&&(f=h*a-u),r[t]+=f,e.addToWlambda(f),f}},{"../equations/FrictionEquation":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/equations/FrictionEquation.js","../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js","./Solver":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/solver/Solver.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/solver/Solver.js":[function(t,e){function o(t,e){t=t||{},s.call(this),this.type=e,this.equations=[],this.equationSortFunction=t.equationSortFunction||!1}var s=(t("../utils/Utils"),t("../events/EventEmitter"));e.exports=o,o.prototype=new s,o.prototype.solve=function(){throw new Error("Solver.solve should be implemented by subclasses!")};var i={bodies:[]};o.prototype.solveIsland=function(t,e){this.removeAllEquations(),e.equations.length&&(this.addEquations(e.equations),i.bodies.length=0,e.getBodies(i.bodies),i.bodies.length&&this.solve(t,i))},o.prototype.sortEquations=function(){this.equationSortFunction&&this.equations.sort(this.equationSortFunction)},o.prototype.addEquation=function(t){t.enabled&&this.equations.push(t)},o.prototype.addEquations=function(t){for(var e=0,o=t.length;e!==o;e++){var s=t[e];s.enabled&&this.equations.push(s)}},o.prototype.removeEquation=function(t){var e=this.equations.indexOf(t);-1!==e&&this.equations.splice(e,1)},o.prototype.removeAllEquations=function(){this.equations.length=0},o.GS=1,o.ISLAND=2},{"../events/EventEmitter":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/events/EventEmitter.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/OverlapKeeper.js":[function(t,e){function o(){this.overlappingShapesLastState=new i,this.overlappingShapesCurrentState=new i,this.recordPool=[],this.tmpDict=new i,this.tmpArray1=[]}function s(t,e,o,s){this.shapeA=e,this.shapeB=s,this.bodyA=t,this.bodyB=o}{var i=t("./TupleDictionary");t("./Utils")}e.exports=o,o.prototype.tick=function(){for(var t=this.overlappingShapesLastState,e=this.overlappingShapesCurrentState,o=t.keys.length;o--;){var s=t.keys[o],i=t.getByKey(s),r=e.getByKey(s);i&&!r&&this.recordPool.push(i)}t.reset(),t.copy(e),e.reset()},o.prototype.setOverlapping=function(t,e,o,i){var r=(this.overlappingShapesLastState,this.overlappingShapesCurrentState);if(!r.get(e.id,i.id)){var n;this.recordPool.length?(n=this.recordPool.pop(),n.set(t,e,o,i)):n=new s(t,e,o,i),r.set(e.id,i.id,n)}},o.prototype.getNewOverlaps=function(t){return this.getDiff(this.overlappingShapesLastState,this.overlappingShapesCurrentState,t)},o.prototype.getEndOverlaps=function(t){return this.getDiff(this.overlappingShapesCurrentState,this.overlappingShapesLastState,t)},o.prototype.bodiesAreOverlapping=function(t,e){for(var o=this.overlappingShapesCurrentState,s=o.keys.length;s--;){var i=o.keys[s],r=o.data[i];if(r.bodyA===t&&r.bodyB===e||r.bodyA===e&&r.bodyB===t)return!0}return!1},o.prototype.getDiff=function(t,e,o){var o=o||[],s=t,i=e;o.length=0;for(var r=i.keys.length;r--;){var n=i.keys[r],a=i.data[n];if(!a)throw new Error("Key "+n+" had no data!");var c=s.data[n];c||o.push(a)}return o},o.prototype.isNewOverlap=function(t,e){var o=0|t.id,s=0|e.id,i=this.overlappingShapesLastState,r=this.overlappingShapesCurrentState;return!i.get(o,s)&&!!r.get(o,s)},o.prototype.getNewBodyOverlaps=function(t){this.tmpArray1.length=0;var e=this.getNewOverlaps(this.tmpArray1);return this.getBodyDiff(e,t)},o.prototype.getEndBodyOverlaps=function(t){this.tmpArray1.length=0;var e=this.getEndOverlaps(this.tmpArray1);return this.getBodyDiff(e,t)},o.prototype.getBodyDiff=function(t,e){e=e||[];for(var o=this.tmpDict,s=t.length;s--;){var i=t[s];o.set(0|i.bodyA.id,0|i.bodyB.id,i)}for(s=o.keys.length;s--;){var i=o.getByKey(o.keys[s]);i&&e.push(i.bodyA,i.bodyB)}return o.reset(),e},s.prototype.set=function(t,e,o,i){s.call(this,t,e,o,i)}},{"./TupleDictionary":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/TupleDictionary.js","./Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/TupleDictionary.js":[function(t,e){function o(){this.data={},this.keys=[]}var s=t("./Utils");e.exports=o,o.prototype.getKey=function(t,e){return t=0|t,e=0|e,(0|t)===(0|e)?-1:0|((0|t)>(0|e)?t<<16|65535&e:e<<16|65535&t)},o.prototype.getByKey=function(t){return t=0|t,this.data[t]},o.prototype.get=function(t,e){return this.data[this.getKey(t,e)]},o.prototype.set=function(t,e,o){if(!o)throw new Error("No data!");var s=this.getKey(t,e);return this.data[s]||this.keys.push(s),this.data[s]=o,s},o.prototype.reset=function(){for(var t=this.data,e=this.keys,o=e.length;o--;)delete t[e[o]];e.length=0},o.prototype.copy=function(t){this.reset(),s.appendArray(this.keys,t.keys);for(var e=t.keys.length;e--;){var o=t.keys[e];this.data[o]=t.data[o]}}},{"./Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js":[function(t,e){function o(){}e.exports=o,o.appendArray=function(t,e){if(e.length<15e4)t.push.apply(t,e);else for(var o=0,s=e.length;o!==s;++o)t.push(e[o])},o.splice=function(t,e,o){o=o||1;for(var s=e,i=t.length-o;i>s;s++)t[s]=t[s+o];t.length=i},o.ARRAY_TYPE="undefined"!=typeof P2_ARRAY_TYPE?P2_ARRAY_TYPE:"undefined"!=typeof Float32Array?Float32Array:Array,o.extend=function(t,e){for(var o in e)t[o]=e[o]},o.defaults=function(t,e){t=t||{};for(var o in e)o in t||(t[o]=e[o]);return t}},{}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/world/Island.js":[function(t,e){function o(){this.equations=[],this.bodies=[]}var s=t("../objects/Body");e.exports=o,o.prototype.reset=function(){this.equations.length=this.bodies.length=0};var i=[];o.prototype.getBodies=function(t){var e=t||[],o=this.equations;i.length=0;for(var s=0;s!==o.length;s++){var r=o[s];-1===i.indexOf(r.bodyA.id)&&(e.push(r.bodyA),i.push(r.bodyA.id)),-1===i.indexOf(r.bodyB.id)&&(e.push(r.bodyB),i.push(r.bodyB.id))}return e},o.prototype.wantsToSleep=function(){for(var t=0;t<this.bodies.length;t++){var e=this.bodies[t];if(e.type===s.DYNAMIC&&!e.wantsToSleep)return!1}return!0},o.prototype.sleep=function(){for(var t=0;t<this.bodies.length;t++){var e=this.bodies[t];e.sleep()}return!0}},{"../objects/Body":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/Body.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/world/IslandManager.js":[function(t,e){function o(){this._nodePool=[],this._islandPool=[],this.equations=[],this.islands=[],this.nodes=[],this.queue=[]}var s=(t("../math/vec2"),t("./Island")),i=t("./IslandNode"),r=t("../objects/Body");e.exports=o,o.getUnvisitedNode=function(t){for(var e=t.length,o=0;o!==e;o++){var s=t[o];if(!s.visited&&s.body.type===r.DYNAMIC)return s}return!1},o.prototype.visit=function(t,e,o){e.push(t.body);for(var s=t.equations.length,i=0;i!==s;i++){var r=t.equations[i];-1===o.indexOf(r)&&o.push(r)}},o.prototype.bfs=function(t,e,s){var i=this.queue;for(i.length=0,i.push(t),t.visited=!0,this.visit(t,e,s);i.length;)for(var n,a=i.pop();n=o.getUnvisitedNode(a.neighbors);)n.visited=!0,this.visit(n,e,s),n.body.type===r.DYNAMIC&&i.push(n)},o.prototype.split=function(t){for(var e=t.bodies,r=this.nodes,n=this.equations;r.length;)this._nodePool.push(r.pop());for(var a=0;a!==e.length;a++)if(this._nodePool.length){var c=this._nodePool.pop();c.reset(),c.body=e[a],r.push(c)}else r.push(new i(e[a]));for(var l=0;l!==n.length;l++){var u=n[l],a=e.indexOf(u.bodyA),p=e.indexOf(u.bodyB),h=r[a],d=r[p];h.neighbors.push(d),d.neighbors.push(h),h.equations.push(u),d.equations.push(u)}for(var f=this.islands;f.length;){var v=f.pop();v.reset(),this._islandPool.push(v)}for(var g;g=o.getUnvisitedNode(r);){var v=this._islandPool.length?this._islandPool.pop():new s;this.bfs(g,v.bodies,v.equations),f.push(v)}return f}},{"../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../objects/Body":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/Body.js","./Island":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/world/Island.js","./IslandNode":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/world/IslandNode.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/world/IslandNode.js":[function(t,e){function o(t){this.body=t,this.neighbors=[],this.equations=[],this.visited=!1
}e.exports=o,o.prototype.reset=function(){this.equations.length=0,this.neighbors.length=0,this.visited=!1,this.body=null}},{}],"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/world/World.js":[function(t,e){function o(t){p.apply(this),t=t||{},this.springs=[],this.bodies=[],this.disabledBodyCollisionPairs=[],this.solver=t.solver||new s,this.narrowphase=new v(this),this.islandManager=new y,this.gravity=r.fromValues(0,-9.78),t.gravity&&r.copy(this.gravity,t.gravity),this.frictionGravity=r.length(this.gravity)||10,this.useWorldGravityAsFrictionGravity=!0,this.useFrictionGravityOnZeroGravity=!0,this.doProfiling=t.doProfiling||!1,this.lastStepTime=0,this.broadphase=t.broadphase||new i,this.broadphase.setWorld(this),this.constraints=[],this.defaultMaterial=new d,this.defaultContactMaterial=new f(this.defaultMaterial,this.defaultMaterial),this.lastTimeStep=1/60,this.applySpringForces=!0,this.applyDamping=!0,this.applyGravity=!0,this.solveConstraints=!0,this.contactMaterials=[],this.time=0,this.stepping=!1,this.bodiesToBeRemoved=[],this.fixedStepTime=0,this.islandSplit="undefined"!=typeof t.islandSplit?!!t.islandSplit:!1,this.emitImpactEvent=!0,this._constraintIdCounter=0,this._bodyIdCounter=0,this.postStepEvent={type:"postStep"},this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.addSpringEvent={type:"addSpring",spring:null},this.impactEvent={type:"impact",bodyA:null,bodyB:null,shapeA:null,shapeB:null,contactEquation:null},this.postBroadphaseEvent={type:"postBroadphase",pairs:null},this.sleepMode=o.NO_SLEEPING,this.beginContactEvent={type:"beginContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null,contactEquations:[]},this.endContactEvent={type:"endContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null},this.preSolveEvent={type:"preSolve",contactEquations:null,frictionEquations:null},this.overlappingShapesLastState={keys:[]},this.overlappingShapesCurrentState={keys:[]},this.overlapKeeper=new m}{var s=t("../solver/GSSolver"),i=(t("../solver/Solver"),t("../collision/NaiveBroadphase")),r=t("../math/vec2"),n=t("../shapes/Circle"),a=(t("../shapes/Rectangle"),t("../shapes/Convex")),c=(t("../shapes/Line"),t("../shapes/Plane")),l=t("../shapes/Capsule"),u=t("../shapes/Particle"),p=t("../events/EventEmitter"),h=t("../objects/Body"),d=(t("../shapes/Shape"),t("../objects/LinearSpring"),t("../material/Material")),f=t("../material/ContactMaterial"),v=(t("../constraints/DistanceConstraint"),t("../constraints/Constraint"),t("../constraints/LockConstraint"),t("../constraints/RevoluteConstraint"),t("../constraints/PrismaticConstraint"),t("../constraints/GearConstraint"),t("../../package.json"),t("../collision/Broadphase"),t("../collision/SAPBroadphase"),t("../collision/Narrowphase")),g=t("../utils/Utils"),m=t("../utils/OverlapKeeper"),y=t("./IslandManager");t("../objects/RotationalSpring")}if(e.exports=o,"undefined"==typeof performance&&(performance={}),!performance.now){var j=Date.now();performance.timing&&performance.timing.navigationStart&&(j=performance.timing.navigationStart),performance.now=function(){return Date.now()-j}}o.prototype=new Object(p.prototype),o.NO_SLEEPING=1,o.BODY_SLEEPING=2,o.ISLAND_SLEEPING=4,o.prototype.addConstraint=function(t){this.constraints.push(t)},o.prototype.addContactMaterial=function(t){this.contactMaterials.push(t)},o.prototype.removeContactMaterial=function(t){var e=this.contactMaterials.indexOf(t);-1!==e&&g.splice(this.contactMaterials,e,1)},o.prototype.getContactMaterial=function(t,e){for(var o=this.contactMaterials,s=0,i=o.length;s!==i;s++){var r=o[s];if(r.materialA.id===t.id&&r.materialB.id===e.id||r.materialA.id===e.id&&r.materialB.id===t.id)return r}return!1},o.prototype.removeConstraint=function(t){var e=this.constraints.indexOf(t);-1!==e&&g.splice(this.constraints,e,1)};var b=(r.create(),r.create(),r.create(),r.create(),r.create(),r.create(),r.create()),A=r.fromValues(0,0),E=r.fromValues(0,0),w=(r.fromValues(0,0),r.fromValues(0,0));o.prototype.step=function(t,e,o){if(o=o||10,e=e||0,0===e)this.internalStep(t),this.time+=t;else{var s=Math.floor((this.time+e)/t)-Math.floor(this.time/t);s=Math.min(s,o);for(var i=performance.now(),n=0;n!==s&&(this.internalStep(t),!(performance.now()-i>1e3*t));n++);this.time+=e;for(var a=this.time%t,c=a/t,l=0;l!==this.bodies.length;l++){var u=this.bodies[l];u.type!==h.STATIC&&u.sleepState!==h.SLEEPING?(r.sub(w,u.position,u.previousPosition),r.scale(w,w,c),r.add(u.interpolatedPosition,u.position,w),u.interpolatedAngle=u.angle+(u.angle-u.previousAngle)*c):(r.copy(u.interpolatedPosition,u.position),u.interpolatedAngle=u.angle)}}};var x=[];o.prototype.internalStep=function(t){this.stepping=!0;var e,s,i=this,n=this.doProfiling,a=this.springs.length,c=this.springs,l=this.bodies,u=this.gravity,p=this.solver,d=this.bodies.length,f=this.broadphase,v=this.narrowphase,m=this.constraints,y=b,j=(r.scale,r.add),A=(r.rotate,this.islandManager);if(this.overlapKeeper.tick(),this.lastTimeStep=t,n&&(e=performance.now()),this.useWorldGravityAsFrictionGravity){var E=r.length(this.gravity);0===E&&this.useFrictionGravityOnZeroGravity||(this.frictionGravity=E)}if(this.applyGravity)for(var w=0;w!==d;w++){var B=l[w],U=B.force;B.type===h.DYNAMIC&&B.sleepState!==h.SLEEPING&&(r.scale(y,u,B.mass*B.gravityScale),j(U,U,y))}if(this.applySpringForces)for(var w=0;w!==a;w++){var S=c[w];S.applyForce()}if(this.applyDamping)for(var w=0;w!==d;w++){var B=l[w];B.type===h.DYNAMIC&&B.applyDamping(t)}for(var k=f.getCollisionPairs(this),q=this.disabledBodyCollisionPairs,w=q.length-2;w>=0;w-=2)for(var C=k.length-2;C>=0;C-=2)(q[w]===k[C]&&q[w+1]===k[C+1]||q[w+1]===k[C]&&q[w]===k[C+1])&&k.splice(C,2);var _=m.length;for(w=0;w!==_;w++){var P=m[w];if(!P.collideConnected)for(var C=k.length-2;C>=0;C-=2)(P.bodyA===k[C]&&P.bodyB===k[C+1]||P.bodyB===k[C]&&P.bodyA===k[C+1])&&k.splice(C,2)}this.postBroadphaseEvent.pairs=k,this.emit(this.postBroadphaseEvent),v.reset(this);for(var w=0,L=k.length;w!==L;w+=2)for(var M=k[w],F=k[w+1],N=0,I=M.shapes.length;N!==I;N++)for(var R=M.shapes[N],V=M.shapeOffsets[N],T=M.shapeAngles[N],G=0,O=F.shapes.length;G!==O;G++){var D=F.shapes[G],W=F.shapeOffsets[G],X=F.shapeAngles[G],z=this.defaultContactMaterial;if(R.material&&D.material){var Y=this.getContactMaterial(R.material,D.material);Y&&(z=Y)}this.runNarrowphase(v,M,R,V,T,F,D,W,X,z,this.frictionGravity)}for(var w=0;w!==d;w++){var K=l[w];K._wakeUpAfterNarrowphase&&(K.wakeUp(),K._wakeUpAfterNarrowphase=!1)}if(this.has("endContact")){this.overlapKeeper.getEndOverlaps(x);for(var H=this.endContactEvent,G=x.length;G--;){var Z=x[G];H.shapeA=Z.shapeA,H.shapeB=Z.shapeB,H.bodyA=Z.bodyA,H.bodyB=Z.bodyA,this.emit(H)}}var J=this.preSolveEvent;J.contactEquations=v.contactEquations,J.frictionEquations=v.frictionEquations,this.emit(J);var _=m.length;for(w=0;w!==_;w++)m[w].update();if(v.contactEquations.length||v.frictionEquations.length||m.length)if(this.islandSplit){for(A.equations.length=0,g.appendArray(A.equations,v.contactEquations),g.appendArray(A.equations,v.frictionEquations),w=0;w!==_;w++)g.appendArray(A.equations,m[w].equations);A.split(this);for(var w=0;w!==A.islands.length;w++){var Q=A.islands[w];Q.equations.length&&p.solveIsland(t,Q)}}else{for(p.addEquations(v.contactEquations),p.addEquations(v.frictionEquations),w=0;w!==_;w++)p.addEquations(m[w].equations);this.solveConstraints&&p.solve(t,this),p.removeAllEquations()}for(var w=0;w!==d;w++){var K=l[w];K.sleepState!==h.SLEEPING&&K.type!==h.STATIC&&o.integrateBody(K,t)}for(var w=0;w!==d;w++)l[w].setZeroForce();if(n&&(s=performance.now(),i.lastStepTime=s-e),this.emitImpactEvent&&this.has("impact"))for(var $=this.impactEvent,w=0;w!==v.contactEquations.length;w++){var te=v.contactEquations[w];te.firstImpact&&($.bodyA=te.bodyA,$.bodyB=te.bodyB,$.shapeA=te.shapeA,$.shapeB=te.shapeB,$.contactEquation=te,this.emit($))}if(this.sleepMode===o.BODY_SLEEPING)for(w=0;w!==d;w++)l[w].sleepTick(this.time,!1,t);else if(this.sleepMode===o.ISLAND_SLEEPING&&this.islandSplit){for(w=0;w!==d;w++)l[w].sleepTick(this.time,!0,t);for(var w=0;w<this.islandManager.islands.length;w++){var Q=this.islandManager.islands[w];Q.wantsToSleep()&&Q.sleep()}}if(this.stepping=!1,this.bodiesToBeRemoved.length){for(var w=0;w!==this.bodiesToBeRemoved.length;w++)this.removeBody(this.bodiesToBeRemoved[w]);this.bodiesToBeRemoved.length=0}this.emit(this.postStepEvent)};var B=r.create(),U=r.create();o.integrateBody=function(t,e){var o=t.invMass,s=t.force,i=t.position,n=t.velocity;r.copy(t.previousPosition,t.position),t.previousAngle=t.angle,t.fixedRotation||(t.angularVelocity+=t.angularForce*t.invInertia*e,t.angle+=t.angularVelocity*e),r.scale(B,s,e*o),r.add(n,B,n),r.scale(U,n,e),r.add(i,i,U),t.aabbNeedsUpdate=!0},o.prototype.runNarrowphase=function(t,e,o,s,i,n,a,c,l,u,p){if(0!==(o.collisionGroup&a.collisionMask)&&0!==(a.collisionGroup&o.collisionMask)){r.rotate(A,s,e.angle),r.rotate(E,c,n.angle),r.add(A,A,e.position),r.add(E,E,n.position);var d=i+e.angle,f=l+n.angle;t.enableFriction=u.friction>0,t.frictionCoefficient=u.friction;var v;v=e.type===h.STATIC||e.type===h.KINEMATIC?n.mass:n.type===h.STATIC||n.type===h.KINEMATIC?e.mass:e.mass*n.mass/(e.mass+n.mass),t.slipForce=u.friction*p*v,t.restitution=u.restitution,t.surfaceVelocity=u.surfaceVelocity,t.frictionStiffness=u.frictionStiffness,t.frictionRelaxation=u.frictionRelaxation,t.stiffness=u.stiffness,t.relaxation=u.relaxation,t.contactSkinSize=u.contactSkinSize;var g=t[o.type|a.type],m=0;if(g){var y=o.sensor||a.sensor,j=t.frictionEquations.length;m=o.type<a.type?g.call(t,e,o,A,d,n,a,E,f,y):g.call(t,n,a,E,f,e,o,A,d,y);var b=t.frictionEquations.length-j;if(m){if(e.allowSleep&&e.type===h.DYNAMIC&&e.sleepState===h.SLEEPING&&n.sleepState===h.AWAKE&&n.type!==h.STATIC){var w=r.squaredLength(n.velocity)+Math.pow(n.angularVelocity,2),x=Math.pow(n.sleepSpeedLimit,2);w>=2*x&&(e._wakeUpAfterNarrowphase=!0)}if(n.allowSleep&&n.type===h.DYNAMIC&&n.sleepState===h.SLEEPING&&e.sleepState===h.AWAKE&&e.type!==h.STATIC){var B=r.squaredLength(e.velocity)+Math.pow(e.angularVelocity,2),U=Math.pow(e.sleepSpeedLimit,2);B>=2*U&&(n._wakeUpAfterNarrowphase=!0)}if(this.overlapKeeper.setOverlapping(e,o,n,a),this.has("beginContact")&&this.overlapKeeper.isNewOverlap(o,a)){var S=this.beginContactEvent;if(S.shapeA=o,S.shapeB=a,S.bodyA=e,S.bodyB=n,S.contactEquations.length=0,"number"==typeof m)for(var k=t.contactEquations.length-m;k<t.contactEquations.length;k++)S.contactEquations.push(t.contactEquations[k]);this.emit(S)}if("number"==typeof m&&b>1)for(var k=t.frictionEquations.length-b;k<t.frictionEquations.length;k++){var q=t.frictionEquations[k];q.setSlipForce(q.getSlipForce()/b)}}}}},o.prototype.addSpring=function(t){this.springs.push(t),this.addSpringEvent.spring=t,this.emit(this.addSpringEvent)},o.prototype.removeSpring=function(t){var e=this.springs.indexOf(t);-1!==e&&g.splice(this.springs,e,1)},o.prototype.addBody=function(t){-1===this.bodies.indexOf(t)&&(this.bodies.push(t),t.world=this,this.addBodyEvent.body=t,this.emit(this.addBodyEvent))},o.prototype.removeBody=function(t){if(this.stepping)this.bodiesToBeRemoved.push(t);else{t.world=null;var e=this.bodies.indexOf(t);-1!==e&&(g.splice(this.bodies,e,1),this.removeBodyEvent.body=t,t.resetConstraintVelocity(),this.emit(this.removeBodyEvent))}},o.prototype.getBodyById=function(t){for(var e=this.bodies,o=0;o<e.length;o++){var s=e[o];if(s.id===t)return s}return!1},o.prototype.disableBodyCollision=function(t,e){this.disabledBodyCollisionPairs.push(t,e)},o.prototype.enableBodyCollision=function(t,e){for(var o=this.disabledBodyCollisionPairs,s=0;s<o.length;s+=2)if(o[s]===t&&o[s+1]===e||o[s+1]===t&&o[s]===e)return void o.splice(s,2)},o.prototype.clear=function(){this.time=0,this.fixedStepTime=0,this.solver&&this.solver.equations.length&&this.solver.removeAllEquations();for(var t=this.constraints,e=t.length-1;e>=0;e--)this.removeConstraint(t[e]);for(var s=this.bodies,e=s.length-1;e>=0;e--)this.removeBody(s[e]);for(var i=this.springs,e=i.length-1;e>=0;e--)this.removeSpring(i[e]);for(var r=this.contactMaterials,e=r.length-1;e>=0;e--)this.removeContactMaterial(r[e]);o.apply(this)},o.prototype.clone=function(){var t=new o;return t.fromJSON(this.toJSON()),t};var S=r.create(),k=r.fromValues(0,0),q=r.fromValues(0,0);o.prototype.hitTest=function(t,e,o){o=o||0;var s=new h({position:t}),i=new u,p=t,d=0,f=S,v=k,g=q;s.addShape(i);for(var m=this.narrowphase,y=[],j=0,b=e.length;j!==b;j++)for(var A=e[j],E=0,w=A.shapes.length;E!==w;E++){var x=A.shapes[E],B=A.shapeOffsets[E]||v,U=A.shapeAngles[E]||0;r.rotate(f,B,A.angle),r.add(f,f,A.position);var C=U+A.angle;(x instanceof n&&m.circleParticle(A,x,f,C,s,i,p,d,!0)||x instanceof a&&m.particleConvex(s,i,p,d,A,x,f,C,!0)||x instanceof c&&m.particlePlane(s,i,p,d,A,x,f,C,!0)||x instanceof l&&m.particleCapsule(s,i,p,d,A,x,f,C,!0)||x instanceof u&&r.squaredLength(r.sub(g,f,t))<o*o)&&y.push(A)}return y},o.prototype.setGlobalEquationParameters=function(t){t=t||{};for(var e=0;e!==this.constraints.length;e++)for(var o=this.constraints[e],s=0;s!==o.equations.length;s++){var i=o.equations[s];"undefined"!=typeof t.stiffness&&(i.stiffness=t.stiffness),"undefined"!=typeof t.relaxation&&(i.relaxation=t.relaxation),i.needsUpdate=!0}for(var e=0;e!==this.contactMaterials.length;e++){var o=this.contactMaterials[e];"undefined"!=typeof t.stiffness&&(o.stiffness=t.stiffness,o.frictionStiffness=t.stiffness),"undefined"!=typeof t.relaxation&&(o.relaxation=t.relaxation,o.frictionRelaxation=t.relaxation)}var o=this.defaultContactMaterial;"undefined"!=typeof t.stiffness&&(o.stiffness=t.stiffness,o.frictionStiffness=t.stiffness),"undefined"!=typeof t.relaxation&&(o.relaxation=t.relaxation,o.frictionRelaxation=t.relaxation)},o.prototype.setGlobalStiffness=function(t){this.setGlobalEquationParameters({stiffness:t})},o.prototype.setGlobalRelaxation=function(t){this.setGlobalEquationParameters({relaxation:t})}},{"../../package.json":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/package.json","../collision/Broadphase":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/Broadphase.js","../collision/NaiveBroadphase":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/NaiveBroadphase.js","../collision/Narrowphase":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/Narrowphase.js","../collision/SAPBroadphase":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/collision/SAPBroadphase.js","../constraints/Constraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/Constraint.js","../constraints/DistanceConstraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/DistanceConstraint.js","../constraints/GearConstraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/GearConstraint.js","../constraints/LockConstraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/LockConstraint.js","../constraints/PrismaticConstraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/PrismaticConstraint.js","../constraints/RevoluteConstraint":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/constraints/RevoluteConstraint.js","../events/EventEmitter":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/events/EventEmitter.js","../material/ContactMaterial":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/material/ContactMaterial.js","../material/Material":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/material/Material.js","../math/vec2":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/math/vec2.js","../objects/Body":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/Body.js","../objects/LinearSpring":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/LinearSpring.js","../objects/RotationalSpring":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/objects/RotationalSpring.js","../shapes/Capsule":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Capsule.js","../shapes/Circle":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Circle.js","../shapes/Convex":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Convex.js","../shapes/Line":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Line.js","../shapes/Particle":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Particle.js","../shapes/Plane":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Plane.js","../shapes/Rectangle":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Rectangle.js","../shapes/Shape":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/shapes/Shape.js","../solver/GSSolver":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/solver/GSSolver.js","../solver/Solver":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/solver/Solver.js","../utils/OverlapKeeper":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/OverlapKeeper.js","../utils/Utils":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/utils/Utils.js","./IslandManager":"/Users/paul/dev/projects/rocket-juggler/node_modules/p2/src/world/IslandManager.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/pie-slice/index.js":[function(t,e){function o(t){if(2>t||t>360)throw new Error("sliceCount must be between 2 and 360, inclusive")}var s=t("./lib/pie"),i=t("./lib/slice");e.exports={slice:function(t,e){o(t),e=e||{};var r=[],n=360/t,a=n/2,c=0,l=c+n,u=0;for(e.firstSliceFacesUp&&(r.push(i(0,360-a,360)),r.push(i(0,0,a)),u=1,c=a,l=c+n);t>u;u++,c+=n,l+=n)r.push(i(u,c,l));return s(r,!!e.yDown)}}},{"./lib/pie":"/Users/paul/dev/projects/rocket-juggler/node_modules/pie-slice/lib/pie.js","./lib/slice":"/Users/paul/dev/projects/rocket-juggler/node_modules/pie-slice/lib/slice.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/pie-slice/lib/pie.js":[function(t,e){function o(t){return t*(180/Math.PI)}function s(t){return t>=0&&90>=t?90-t:t>90&&180>=t?360-t+90:-t+90}function i(t,e){var o=Object.create(n);return o.slices=t,o.yDown=e,o}var r=t("vec2d");e.exports=i;var n={whatSlice:function(t,e){this.yDown&&(e.y>t.y?e={x:e.x,y:t.y-(e.y-t.y)}:e.y<t.y&&(e={x:e.x,y:t.y+(t.y-e.y)}));for(var i=r(e).minus(r(t)),n=o(i.angle()),a=s(n),c=0;c<this.slices.length;c++)if(this.slices[c].contains(a))return this.slices[c].number}}},{vec2d:"/Users/paul/dev/projects/rocket-juggler/node_modules/pie-slice/node_modules/vec2d/index.js"}],"/Users/paul/dev/projects/rocket-juggler/node_modules/pie-slice/lib/slice.js":[function(t,e){function o(t,e,o){var i=Object.create(s);return i.min=e,i.max=o,i.number=t,i}e.exports=o;var s={contains:function(t){return this.min<=t&&t<this.max}}},{}],"/Users/paul/dev/projects/rocket-juggler/node_modules/pie-slice/node_modules/vec2d/index.js":[function(t,e){function o(t,e){this.x=t,this.y=e}function s(t){return new o(Math.cos(t),Math.sin(t))}function i(t,e){if(null==t)return new o(0,0,0);if(Array.isArray(t))return new o(parseFloat(t[0],10),parseFloat(t[1],10));if("object"==typeof t)return new o(parseFloat(t.x,10),parseFloat(t.y,10));if("string"==typeof t&&null==e){var s=t.match(r);if(s)return new o(parseFloat(s[1],10),parseFloat(s[2],10));throw new Error("Vec2d: cannot parse: "+t)}return new o(parseFloat(t,10),parseFloat(e,10))}e.exports=i,i.Vec2d=o,i.unit=s,o.unit=s;var r=/\((-?[.\d]+), (-?[.\d]+)\)/;o.prototype.offset=function(t,e){return new o(this.x+t,this.y+e)},o.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},o.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},o.prototype.plus=function(t){return this.clone().add(t)},o.prototype.minus=function(t){return this.clone().sub(t)},o.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this},o.prototype.mult=function(t){return this.x*=t.x,this.y*=t.y,this},o.prototype.times=function(t){return this.clone().mult(t)},o.prototype.div=function(t){return this.x/=t.x,this.y/=t.y,this},o.prototype.divBy=function(t){return this.clone().div(t)},o.prototype.scale=function(t){return this.x*=t,this.y*=t,this},o.prototype.scaled=function(t){return this.clone().scale(t)},o.prototype.clone=function(){return new o(this.x,this.y)},o.prototype.apply=function(t){return this.x=t(this.x),this.y=t(this.y),this},o.prototype.applied=function(t){return this.clone().apply(t)},o.prototype.distanceSqrd=function(t){var e=t.x-this.x,o=t.y-this.y;return e*e+o*o},o.prototype.distance=function(t){return Math.sqrt(this.distanceSqrd(t))},o.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},o.prototype.toString=function(){return"("+this.x+", "+this.y+")"},o.prototype.lengthSqrd=function(){return this.x*this.x+this.y*this.y},o.prototype.length=function(){return Math.sqrt(this.lengthSqrd())},o.prototype.angle=function(){return 0===this.lengthSqrd()?0:Math.atan2(this.y,this.x)},o.prototype.normalize=function(){var t=this.length();return 0===t?this:this.scale(1/t)},o.prototype.normalized=function(){return this.clone().normalize()},o.prototype.boundMin=function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this},o.prototype.boundMax=function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this},o.prototype.floor=function(){return this.apply(Math.floor)},o.prototype.floored=function(){return this.applied(Math.floor)},o.prototype.ceil=function(){return this.apply(Math.ceil)},o.prototype.ceiled=function(){return this.applied(Math.ceil)},o.prototype.project=function(t){return this.scale(this.dot(t)/t.lengthSqrd()),this},o.prototype.dot=function(t){return this.x*t.x+this.y*t.y},o.prototype.rotate=function(t){var e=this.x*t.x-this.y*t.y;return this.y=this.x*t.y+this.y*t.x,this.x=e,this},o.prototype.rotated=function(t){return this.clone().rotate(t)},o.prototype.reflect=function(t){return this.reflectAboutLine(new o(0,0),t)},o.prototype.reflectAboutLine=function(t,e){var s=new o(e.x-t.x,e.y-t.x),i=s.x;s.x=-s.y,s.y=i,s.normalize();var r=2*this.dot(s);return this.x-=r*s.x,this.y-=r*s.y,this}},{}],"/Users/paul/dev/projects/rocket-juggler/node_modules/vec2/vec2.js":[function(t,e){!function o(t,s,i){function r(t,e){return this instanceof r?(n(t)?(e=t[1],t=t[0]):"object"==typeof t&&t&&(e=t.y,t=t.x),this.x=r.clean(t||0),void(this.y=r.clean(e||0))):new r(t,e)}var n=function(t){return"[object Array]"===Object.prototype.toString.call(t)};r.prototype={change:function(t){if("function"==typeof t)this.observers?this.observers.push(t):this.observers=[t];else if(this.observers&&this.observers.length)for(var e=this.observers.length-1;e>=0;e--)this.observers[e](this,t);return this},ignore:function(t){if(this.observers)if(t)for(var e=this.observers,o=e.length;o--;)e[o]===t&&e.splice(o,1);else this.observers=[];return this},set:function(t,e,o){if("number"!=typeof t&&(o=e,e=t.y,t=t.x),this.x===t&&this.y===e)return this;var s=null;return o!==!1&&this.observers&&this.observers.length&&(s=this.clone()),this.x=r.clean(t),this.y=r.clean(e),o!==!1?this.change(s):void 0},zero:function(){return this.set(0,0)},clone:function(){return new this.constructor(this.x,this.y)},negate:function(t){return t?new this.constructor(-this.x,-this.y):this.set(-this.x,-this.y)},add:function(t,e,o){return"number"!=typeof t&&(o=e,n(t)?(e=t[1],t=t[0]):(e=t.y,t=t.x)),t+=this.x,e+=this.y,o?new this.constructor(t,e):this.set(t,e)},subtract:function(t,e,o){return"number"!=typeof t&&(o=e,n(t)?(e=t[1],t=t[0]):(e=t.y,t=t.x)),t=this.x-t,e=this.y-e,o?new this.constructor(t,e):this.set(t,e)},multiply:function(t,e,o){return"number"!=typeof t?(o=e,n(t)?(e=t[1],t=t[0]):(e=t.y,t=t.x)):"number"!=typeof e&&(o=e,e=t),t*=this.x,e*=this.y,o?new this.constructor(t,e):this.set(t,e)},rotate:function(t,e,o){var s,i,r=this.x,n=this.y,a=Math.cos(t),c=Math.sin(t);return e=e?-1:1,s=a*r-e*c*n,i=e*c*r+a*n,o?new this.constructor(s,i):this.set(s,i)},length:function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},lengthSquared:function(){var t=this.x,e=this.y;return t*t+e*e},distance:function(t){var e=this.x-t.x,o=this.y-t.y;return Math.sqrt(e*e+o*o)},nearest:function(t){for(var e,o=Number.MAX_VALUE,s=null,i=t.length-1;i>=0;i--)e=this.distance(t[i]),o>=e&&(o=e,s=t[i]);return s},normalize:function(t){var e=this.length(),o=e<Number.MIN_VALUE?0:1/e;return t?new this.constructor(this.x*o,this.y*o):this.set(this.x*o,this.y*o)},equal:function(t,e){return"number"!=typeof t&&(n(t)?(e=t[1],t=t[0]):(e=t.y,t=t.x)),r.clean(t)===this.x&&r.clean(e)===this.y},abs:function(t){var e=Math.abs(this.x),o=Math.abs(this.y);return t?new this.constructor(e,o):this.set(e,o)},min:function(t,e){var o=this.x,s=this.y,i=t.x,r=t.y,n=i>o?o:i,a=r>s?s:r;return e?new this.constructor(n,a):this.set(n,a)},max:function(t,e){var o=this.x,s=this.y,i=t.x,r=t.y,n=o>i?o:i,a=s>r?s:r;return e?new this.constructor(n,a):this.set(n,a)},clamp:function(t,e,o){var s=this.min(e,!0).max(t);return o?s:this.set(s.x,s.y)},lerp:function(t,e,o){return this.add(t.subtract(this,!0).multiply(e),o)},skew:function(t){return t?new this.constructor(-this.y,this.x):this.set(-this.y,this.x)},dot:function(t){return r.clean(this.x*t.x+t.y*this.y)},perpDot:function(t){return r.clean(this.x*t.y-this.y*t.x)},angleTo:function(t){return Math.atan2(this.perpDot(t),this.dot(t))},divide:function(t,e,o){if("number"!=typeof t?(o=e,n(t)?(e=t[1],t=t[0]):(e=t.y,t=t.x)):"number"!=typeof e&&(o=e,e=t),0===t||0===e)throw new Error("division by zero");if(isNaN(t)||isNaN(e))throw new Error("NaN detected");return o?new this.constructor(this.x/t,this.y/e):this.set(this.x/t,this.y/e)},isPointOnLine:function(t,e){return(t.y-this.y)*(t.x-e.x)===(t.y-e.y)*(t.x-this.x)},toArray:function(){return[this.x,this.y]},fromArray:function(t){return this.set(t[0],t[1])},toJSON:function(){return{x:this.x,y:this.y}},toString:function(){return"("+this.x+", "+this.y+")"},constructor:r},r.fromArray=function(t,e){return new(e||r)(t[0],t[1])},r.precision=s||8;var a=Math.pow(10,r.precision);return r.clean=t||function(t){if(isNaN(t))throw new Error("NaN detected");if(!isFinite(t))throw new Error("Infinity detected");return Math.round(t)===t?t:Math.round(t*a)/a},r.inject=o,t||(r.fast=o(function(t){return t}),"undefined"!=typeof e&&"object"==typeof e.exports?e.exports=r:window.Vec2=window.Vec2||r),r}()},{}]},{},["./app/index.js"]);